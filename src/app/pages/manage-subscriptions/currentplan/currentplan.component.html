
<div class="container" *ngIf="getallplans==false && revieworder==false">
    <div class="row">
        <!-- <div class="col-md-12">
                <h3 id="planHeading">Features will be enabled based on the selected plan</h3>
                <h4 id="ctr">Choose the right one for your valuable business</h4>
        </div> -->
        <div class="col-md-12 errordiv" *ngIf='error'>
                <h2>{{error}}</h2>
            </div>
        <span *ngIf='!error' class="col-md-12 row">
        <div  *ngFor="let planlist of plansList; let i=index ;trackBy:loopTrackBy">
            <div class="col-md-3 plansBox" *ngIf="planlist.subscribed">
            <h4>
                <span id="planName" *ngIf="planlist.nickName =='Standard'"><b>Free Tier</b>
                </span> 
                <span id="planName" *ngIf="planlist.nickName !='Standard'"><b>{{planlist.nickName}}</b>
                </span> 
                <span *ngIf="planlist.subscribed" class="current-plan">Current Plan</span>
                <!-- <span *ngIf="planlist.enterpriseSubscribed&&planlist.nickName =='Enterprise'" class="requested-plan">Requested</span> -->
              </h4>
            <h6 class="processes" *ngFor='let value of planlist.features'><i *ngIf="value.active" class="fa fa-check-circle" aria-hidden="true"></i><i *ngIf="!value.active"  class="fa fa-times-circle" aria-hidden="true"></i><span>{{value.name}}
                    <label *ngIf="value.limited">Limited</label></span>
                </h6>

            <h5 *ngIf="planlist.nickName !='Enterprise'" style="font-weight:800;text-align: center;">$ {{planlist.amount}}.00 <span  style="font-size: 13px;font-weight: 500">/ user per {{planlist.term}}</span></h5>
            <!-- <button *ngIf="planlist.nickName !='Enterprise' && planlist.nickName!='Free Tier'" [disabled]="planlist.subscribed" class="btn btn-primary selectplanbtn" (click)="selectedPlan(planlist)">Select</button> -->
            <button *ngIf="planlist.nickName =='Free Tier'" [disabled]="planlist.freeSubscribed||planlist.subscribed" class="btn btn-primary selectplanbtn" (click)="selectedPlan(planlist)">Activate</button>

            <h5 *ngIf="planlist.nickName =='Enterprise'" class="enterprice">Enterprise Solution</h5>
            <button *ngIf="planlist.nickName =='Enterprise'" [disabled]="(planlist.enterpriseSubscribed)"class="btn btn-primary selectplanbtn" (click)="contactUsSwal()">Contact Us</button>
        </div>
        </div>
        </span>

        <button *ngIf='!error' class="btn btn-primary selectplanbtn" (click)="getAllPlans()">Upgrade</button>

            <!-- <div class="col-md-12 row conditions">
            <div class="col-md-8"></div>
            <div class="col-md-4 tc-privacy">
                    <span class='pull-right'> <a class='terms' (click)='termsConditionsOpen(template)'>Terms & Conditions</a>
                        <a class="policy" (click)='privacyOpen(privacyTemplate)'>Privacy Policy</a> </span>
                 </div>
            </div> -->
            <div class="col-md-3" style="display: block;height: 50px" ></div>
    </div>
</div>



<div class="container" *ngIf="getallplans && revieworder==false">
    <div class="row">
      <div class="row">
        <div class="col-md-8">
                <h3 id="planHeading">Features will be enabled based on the selected plan</h3>
                <h4 id="ctr">Choose the right one for your valuable business</h4>
        </div>
        <div class="col-md-4">
        <button *ngIf='!error' class="btn btn-primary selectplanbtn" style="float: right;margin-top: 14px;" (click)="currentplan()">Back</button>
      </div>
    </div>
        <div class="col-md-12 errordiv" *ngIf='error'>
                <h2>{{error}}</h2>
            </div>
        <span *ngIf='!error' class="col-md-12 row">
        <div  *ngFor="let planlist of plansList; let i=index ;trackBy:loopTrackBy">
          <div class="col-md-3 plansBox" style="margin: 1%;" *ngIf="(planlist.subscribed ||  planlist.active) && (planlist.nickName=='Standard' || planlist.nickName=='Professional' || planlist.nickName=='Enterprise')">
                <h4><span id="planName" *ngIf="planlist.nickName =='Standard'"><b>Free Tier</b>
                </span> 
                <span id="planName" *ngIf="planlist.nickName !='Standard'"><b>{{planlist.nickName}}</b>
                </span> <span *ngIf="planlist.subscribed" class="current-plan">Current Plan</span>
                    <span *ngIf="planlist.enterpriseSubscribed&&planlist.nickName =='Enterprise'" class="requested-plan">Requested</span></h4>
                <h6 class="processes" *ngFor='let value of planlist.features'><i *ngIf="value.active" class="fa fa-check-circle" aria-hidden="true"></i><i *ngIf="!value.active"  class="fa fa-times-circle" aria-hidden="true"></i><span>{{value.name}}
                        <label *ngIf="value.limited">Limited</label></span>
                    </h6>

                <h5 *ngIf="planlist.nickName !='Enterprise'" style="font-weight:800;text-align: center;">$ {{planlist.amount}}.00 <span  style="font-size: 13px;font-weight: 500">/ user per {{planlist.term}}</span></h5>
                <button *ngIf="planlist.nickName !='Enterprise' && planlist.nickName!='Free Tier'" [disabled]="planlist.subscribed || planlist.nickName=='Standard'" class="btn btn-primary selectplanbtn" (click)="selectedPlan(planlist)">Select</button>
                <button *ngIf="planlist.nickName =='Free Tier'" [disabled]="planlist.freeSubscribed||planlist.subscribed" class="btn btn-primary selectplanbtn" (click)="selectedPlan(planlist)">Activate</button>

                <h5 *ngIf="planlist.nickName =='Enterprise'" class="enterprice">Enterprise Solution</h5>
                <button *ngIf="planlist.nickName =='Enterprise'" [disabled]="(planlist.enterpriseSubscribed)"class="btn btn-primary selectplanbtn" (click)="contactUs()">Contact Us</button>
            </div>
          </div>
        </span>
        
            <!-- <div class="col-md-12 row conditions">
            <div class="col-md-8"></div>
            <div class="col-md-4 tc-privacy">
                    <span class='pull-right'> <a class='terms' (click)='termsConditionsOpen(template)'>Terms & Conditions</a>
                        <a class="policy" (click)='privacyOpen(privacyTemplate)'>Privacy Policy</a> </span>
                 </div>
            </div> -->
            <div class="col-md-3" style="display: block;height: 50px" ></div>
    </div>
</div>





<div class="container review_layout" *ngIf="revieworder">
    <div class="">
      <!-- <div id="particles-js"></div> -->
     
      <div class="row">
        <mat-card class="mat3-card">
  
          <!-- <div class="brand">
            <img src="assets/images/EZFlow_horizontal_full_color.png">
          </div> -->
          <div class="col-md-11 review-heading">
            <h4 id="" class="plan_label ">Features will be enabled based on the selected plan</h4>
            <h5 id="paymnt-subheding">Review your order to proceed payment</h5>
            <!-- <p class="pay_titles" style="margin-left:7%;width:100%">Card Details<button class="btn"
                (click)="editCardDetails()" title="Edit card"></button>
            </p> -->
          </div>
          <!-- <form  autocomplete="off" class="col-md-12 row carddetail"> -->
            <div class="col-md-10 carddetail row">

                <div class="col-md-2"></div>
                
                <div class="col-md-3">
                    <div class="col-md-12">
                      <label for="cardHolder">Cardholder Name</label>
                      <h4>{{cardDetails[0].name}}</h4>
                    </div>
      
                        <div class="month col-md-12">
                          <label for="month">Month (MM)</label>
                          <h4>{{cardDetails[0].cardExpMonth}}</h4>
                        </div>
              </div>
        
                <div class="col-md-4">
                      <div class="row">
                      <div class="col-sm-8">
                        <label for="cardNumber">Card Number </label>
                        <h4>XXXX-XXXX-XXXX-{{cardDetails[0].cardLast4}}</h4>
                      </div>
                        <div class="col-sm-4">
                          <label for="year">Year (YYYY)</label>
                          <h4>{{cardDetails[0].cardExpYear}}</h4>
                        </div>
                       
                        <!-- <div class='col-sm-12 apply-coupon'>
                            <p *ngIf='!iscoupon' (click)='haveCoupon()'>Have a coupon ?</p>
                         <span *ngIf='iscoupon' class="row"><input type="text" name='coupon' #coupon='ngModel' [(ngModel)]='couponcode' placeholder="Enter Coupon Code" class='col-sm-6 form-control coupon-input' (keypress)="lettersAndNumbers($event)" required>
                              <button class='btn hoverable applybtn' (click)='applyCoupon(couponcode)' [disabled] = "coupon.invalid || isapplied">Apply</button></span>
                              <div style="overflow-wrap: break-word;" class="errordiv col-md-6">
                                  <span *ngIf="success" class="alert-success text-center coupon_alertsuccess">{{success}}</span>
                                  </div>
                              <div style="overflow-wrap: break-word;" class="errordiv col-md-6 couponerror">
                                  <span *ngIf="error" class="alert-danger text-center coupon_alert">{{error}}</span>
                                  </div>
                        </div> -->
                    </div>
                </div>
                          
                <!-- <div class="col-md-2"></div> -->
                <div class="col-md-3 plan_detail_box">
                  <div class=" ">
                    <h5 class="select_label">Subscription Details</h5>
                    <div class=" ">
                      <div class=" ">
                        <h6 class="plan_label">Plan   <span class="plan">  {{name}}</span>
                             <button class="backbtn" (click)="chooseplan()">Change plan</button>
                             </h6>
                      </div>
                      <div class="period">
                        <p>Billing Period : {{selected_plans.term}}</p>
                        <p>Plan Amount : ${{selected_plans.amount}}</p>
                        <!-- <p>No. of Users : {{noOfusers}}</p>
                        <p *ngIf='isapplied'>Discount : ${{couponAmount}}</p>
                        <p>Tax({{taxPercentage}}%) : ${{taxamount}}</p> -->
                      </div>
                    </div>
        
                    <!-- <div class="plandetails">
                      <hr>
                         <h5 class="plandetails"> Total Payable : ${{totalPay}} </h5>
                    <hr>
                        </div> -->
                  </div>
                </div>
                <div class="col-md-2"></div>
                <!-- <div class="col-md-10" class="agreecheckbox">
                    <input type="checkbox" name="checkbox" [(ngModel)]="isagree" (change)="onchangechekbox()"><span>   I agree with the terms of service and the    <a class="policy" (click)='privacyPolicy(privacyTemplate)'>   Privacy Policy</a></span>
                  </div>
                <div class="col-md-3"></div>
        
                   <div class="col-md-1" >
                      <button class="btn buybtn" style="margin-left:40px"(click)="buyProductPlan(template); clicked = true;" [disabled]="isdiable || clicked">Buy Now</button>
                    </div>
                    <div class="col-md-3" style="display: block;height: 50px" ></div> -->
                  </div>
          <!-- </form> -->
          <!-- <div class="pull-right">
            <button class="btn buybtn"  (click)="buyProductPlan(template); clicked = true;"
              [disabled]="isdiable || clicked">Buy Now</button>
          </div> -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-6"></div>
                <div class="col-sm-6">
                  <!-- <button class="btn buybtn"  (click)="chooseplan()">Choose Plan</button> -->
                  <button class="btn buybtn"  (click)="buyProductPlan(template)">Buy Now</button>
                  </div>
                  <div class="col-md-3" style="display: block;height: 13px" ></div>
            </div>
          </div>
  
        </mat-card>
      </div>
    </div>
  </div>
  
  <ng-template #template>
  <div class="modal-header modelprhead">
    <h4 class="modal-title pull-left">Subscription Confirmation</h4>
      <!-- <button type="button" class="close pull-right" aria-label="Close" (click)="modalref.hide()">
        <span aria-hidden="true"><img src="../../../../assets/images/Projects/circle-close.svg" alt=""></span>
      </button> -->
    </div>

    <div class="modal-body modelprbody resourcescreen">
        <table class="sub-confirmation">
            <tr>
              <td>Product</td>
              <td> :  </td>
              <td>{{productId}} </td>
            </tr>
            <tr>
              <td>Plan</td>
              <td> :  </td>
              <td>{{selected_plans.nickName}}</td>
            </tr>
            <tr>
              <td>Order Id</td>
              <td> :</td>
              <td>{{subscriptionDetails.id}} </td>
            </tr>
            <tr>
              <td>Subscription Id</td>
              <td> :</td>
              <td>{{subscriptionDetails.subscriptionId[0]}}</td>
            </tr>
            <!-- <tr>
              <td>Amount Paid</td>
              <td> :{{totalPay}}</td>
              <td></td>
            </tr> -->
            <tr>
              <td>Period</td>
              <td> :</td>
              <td> {{selected_plans.term}}</td>
            </tr>
          </table>
      <!-- </div> -->
  </div>          
  <div class="modal-footer modelprfooter">
    <div class="col-md-12 confirmationmsg">
        <button class="btn btn-primary" (click)='close_modal()'>Ok</button>
      </div>
  </div>
</ng-template>