<div class="col-md-12 pr-0 packagecontentdiv" *ngIf="getallplans==false && revieworder==false">
  <!-- <div class="col-md-12">
                <h3 id="planHeading">Features will be enabled based on the selected plan</h3>
                <h4 id="ctr">Choose the right one for your valuable business</h4>
        </div> -->
    <div class="col-12 p-0 errordiv" *ngIf='error'>
      <h2>{{error}}</h2>
    </div>
    <div *ngIf='!error' class="col-md-12 p-0 row">
      <div *ngFor="let planlist of plansList; let i=index ;trackBy:loopTrackBy">
        <div class="col plansBox" *ngIf="planlist.subscribed">
          <div class="plandetailscont">
            <h4>
              <span *ngIf="expiry>=0">
                <p style="color:red">Current plan expires in {{expiry}} days</p>
              </span>
              <span *ngIf="expiry<0">
                <p style="color:red">Current plan has expired. Please Upgrade</p>
              </span>
              <span class="planName" *ngIf="planlist.nickName =='Standard'"><b>Free Tier</b>
              </span>
              <span class="planName" *ngIf="planlist.nickName !='Standard'"><b>{{planlist.nickName}}</b>
              </span>
              <span *ngIf="planlist.subscribed" class="current-plan">Current Plan</span>
              <!-- <span *ngIf="planlist.enterpriseSubscribed&&planlist.nickName =='Enterprise'" class="requested-plan">Requested</span> -->
            </h4>
            <p class="processes" *ngFor='let value of planlist.features'>
              <i *ngIf="value.active"
                class="fa fa-check-circle" aria-hidden="true"></i>
              <i *ngIf="!value.active" class="fa fa-times-circle"
                aria-hidden="true"></i>
              <span>{{value.name}}
                <span class="limited" *ngIf="value.limited">Limited</span>
              </span>
            </p>
            <h5 *ngIf="planlist.nickName !='Enterprise'">
              ${{planlist.amount}}.00
              <span  *ngIf="planlist.nickName=='Standard'">/ per month</span>
              <span  *ngIf="planlist.nickName=='Professional'">/ per year</span>
            </h5>
          </div>
          <div class="row justify-content-center">
            <!-- <button *ngIf="planlist.nickName !='Enterprise' && planlist.nickName!='Free Tier'" [disabled]="planlist.subscribed" 
                  class="btn bluebg-button selectplanbtn" (click)="selectedPlan(planlist)">Select</button> -->
            <button *ngIf="planlist.nickName =='Free Tier'" [disabled]="planlist.freeSubscribed||planlist.subscribed"
              class="btn bluebg-button selectplanbtn" (click)="selectedPlan(planlist)">Activate</button>

            <h5 *ngIf="planlist.nickName =='Enterprise'" class="enterprice">Enterprise Solution</h5>
            <button *ngIf="planlist.nickName =='Enterprise'" [disabled]="(planlist.enterpriseSubscribed)"
              class="btn bluebg-button selectplanbtn">Contact Us</button>
          </div>
        </div>
      </div>
    </div>

    <!-- <button *ngIf='!error' class="btn bluebg-button selectplanbtn" (click)="getAllPlans()">Upgrade</button> -->

    <!-- <div class="col-md-12 row conditions">
            <div class="col-md-8"></div>
            <div class="col-md-4 tc-privacy">
                    <span class='pull-right'> <a class='terms' (click)='termsConditionsOpen(template)'>Terms & Conditions</a>
                        <a class="policy" (click)='privacyOpen(privacyTemplate)'>Privacy Policy</a> </span>
                 </div>
            </div> -->


    <!-- need to check with krishna
      <div class="col-3" style="display: block;height: 50px"></div> -->
</div>


<div class="col-md-12 pr-0 packagecontentdiv" *ngIf="getallplans && revieworder==false">
    <div class="" *ngIf='!error'>
      <h4 id="planHeading">Features will be enabled based on the selected plan</h4>
      <h5 id="ctr">Choose the right one for your valuable business</h5>
    </div>
        <!-- <div class="col-4">
          <button *ngIf='!error' class="btn btn-primary selectplanbtn"
            (click)="currentplan()">Back</button>
        </div> -->
    <div class="col-12 p-0 errordiv" *ngIf='error'>
      <h2>{{error}}</h2>
    </div>
    <div *ngIf='!error' class="col-12 p-0 row">
      <div  *ngFor="let planlist of plansList | orderBy:'amount'; let i=index ;trackBy:loopTrackBy">
        <div class="col plansBox" 
            *ngIf="(planlist.subscribed ||  planlist.active) && (planlist.nickName=='Standard' || planlist.nickName=='Professional' || planlist.nickName=='Enterprise')">
            <div class="plandetailscont">
              <h4>
                <span  class="planName" *ngIf="planlist.nickName =='Standard'">Free Tier</span>
    
                <span  class="planName" *ngIf="planlist.nickName !='Standard'">{{planlist.nickName}}</span>
    
                <span *ngIf="planlist.subscribed" class="current-plan">Current Plan</span>
    
                <span *ngIf="planlist.enterpriseSubscribed&&planlist.nickName =='Enterprise'"
                  class="requested-plan">Requested</span>
              </h4>
              <p class="processes" *ngFor='let value of planlist.features'>
                <i *ngIf="value.active"
                  class="fa fa-check-circle" aria-hidden="true"></i>
                <i *ngIf="!value.active" class="fa fa-times-circle"
                  aria-hidden="true"></i>
                <span>{{value.name}}
                  <span *ngIf="value.limited" class="limited">Limited</span>
                </span>
              </p>
    
              <h5 *ngIf="planlist.nickName !='Enterprise'" >
                ${{planlist.amount}}.00
                <span  *ngIf="planlist.nickName=='Standard'">/ per month</span>
                <span  *ngIf="planlist.nickName=='Professional'">/ per year</span>
              </h5>
            </div>
            <div class="row justify-content-center">
              <button *ngIf="planlist.nickName !='Enterprise' && planlist.nickName!='Free Tier'"
                [disabled]="planlist.subscribed || planlist.nickName=='Standard'" class="btn bluebg-button selectplanbtn"
                (click)="selectedPlan(planlist)">Select</button>
              <button *ngIf="planlist.nickName =='Free Tier'" [disabled]="planlist.freeSubscribed||planlist.subscribed"
                class="btn bluebg-button selectplanbtn" (click)="selectedPlan(planlist)">Activate</button>
  
              <h5 *ngIf="planlist.nickName =='Enterprise'" class="enterprice">Enterprise Solution</h5>
              <button *ngIf="planlist.nickName =='Enterprise'" [disabled]="(planlist.enterpriseSubscribed)"
                class="btn bluebg-button selectplanbtn" (click)="contactUs()">Contact Us</button>
            </div>
            
        </div>
      </div>
    </div>
      <!-- <div class="col-md-12 row conditions">
              <div class="col-md-8"></div>
              <div class="col-md-4 tc-privacy">
                      <span class='pull-right'> <a class='terms' (click)='termsConditionsOpen(template)'>Terms & Conditions</a>
                          <a class="policy" (click)='privacyOpen(privacyTemplate)'>Privacy Policy</a> </span>
                   </div>
              </div> -->
              
      <!-- need to check with krishna
        <div class="col-md-3" style="display: block;height: 50px"></div> -->
</div>


<div class="col-md-12 pr-0 packagecontentdiv" *ngIf="revieworder">
  <div class="">
    <h4 id="planHeading">Features will be enabled based on the selected plan</h4>
    <h5 id="ctr">Review your order to proceed payment</h5>
    <!-- <p class="pay_titles" >Card Details<button class="btn"
                (click)="editCardDetails()" title="Edit card"></button>
            </p> -->
  </div>
  <!-- <form  autocomplete="off" class="col-md-12 row carddetail"> -->
    <div class="carddetail row">
      <div class="col-sm-6 pl-0 row">
        <div class="col-6 pl-0">
          <label for="cardHolder">Cardholder Name</label>
          <p>{{cardDetails[0].name}}</p>
        </div>
        <div class="col-6 pr-0">
          <label for="cardNumber">Card Number </label>
          <p>XXXX-XXXX-XXXX-{{cardDetails[0].cardLast4.slice(-3)}}</p>
        </div>
        <div class="col-6 pl-0 month">
          <label for="month">Month (MM)</label>
            <p>{{cardDetails[0].cardExpMonth}}</p>
        </div>
        <div class="col-6 pr-0">
          <label for="year">Year (YYYY)</label>
          <p>{{cardDetails[0].cardExpYear}}</p>
        </div>
        <!-- <div class='col-sm-12 apply-coupon'>
                        <p *ngIf='!iscoupon' (click)='haveCoupon()'>Have a coupon ?</p>
                     <span *ngIf='iscoupon' class="row"><input type="text" name='coupon' #coupon='ngModel' [(ngModel)]='couponcode' placeholder="Enter Coupon Code" class='col-sm-6 form-control coupon-input' (keypress)="lettersAndNumbers($event)" required>
                          <button class='btn hoverable applybtn' (click)='applyCoupon(couponcode)' [disabled] = "coupon.invalid || isapplied">Apply</button></span>
                          <div  class="errordiv col-md-6">
                              <span *ngIf="success" class="alert-success text-center coupon_alertsuccess">{{success}}</span>
                              </div>
                          <div  class="errordiv col-md-6 couponerror">
                              <span *ngIf="error" class="alert-danger text-center coupon_alert">{{error}}</span>
                              </div>
          </div> -->
      </div>
      <div class="col-6 pr-0 row">
        <div class="col-12 p-0">
          <h5 class="select_label">Subscription Details</h5>
        </div>
        <div class="col-4 pl-0">
          <label class="plan_label">Plan</label>
          <p>{{name}}
            <button class="backbtn" (click)="chooseplan()"><a class="link">Change plan</a></button>
          </p>
        </div>
        <div class="col-4 p-0">
          <label>Billing Period</label>
          <p>{{selected_plans.term}}</p>
        </div>
        <div class="col-4 pr-0">
          <label>Plan Amount</label>
          <p>${{selected_plans.amount}}</p>
        </div>
        <!-- <p>No. of Users : {{noOfusers}}</p>
                <p *ngIf='isapplied'>Discount : ${{couponAmount}}</p>
                <p>Tax({{taxPercentage}}%) : ${{taxamount}}</p>
              <h5 class="plandetails"> Total Payable : ${{totalPay}} </h5> -->
         <!-- <div class="col-md-10" class="agreecheckbox">
                  <input type="checkbox" name="checkbox" [(ngModel)]="isagree" (change)="onchangechekbox()"><span>   I agree with the terms of service and the    <a class="policy" (click)='privacyPolicy(privacyTemplate)'>   Privacy Policy</a></span>
              </div>
              <div class="col-md-1" >
                    <button class="btn buybtn" (click)="buyProductPlan(template); clicked = true;" [disabled]="isdiable || clicked">Buy Now</button>
              </div> -->
      </div>
    </div>
  <!-- </form> -->
    <!-- <div class="pull-right">
        <button class="btn buybtn"  (click)="buyProductPlan(template); clicked = true;"
          [disabled]="isdiable || clicked">Buy Now</button>
      </div> -->
    <div class="row justify-content-end">
        <!-- <button class="btn buybtn"  (click)="chooseplan()">Choose Plan</button> -->
      <button class="btn bluebg-button buybtn" [disabled]="isdiable" (click)="buyProductPlan(template)">Buy Now</button>
    </div>
</div>


<ng-template #template>
  <div class="modal-header modelprhead">
    <h4 class="modal-title pull-left">Subscription Confirmation</h4>
    <!-- <button type="button" class="close pull-right" aria-label="Close" (click)="modalref.hide()">
        <span aria-hidden="true"><img src="../../../../assets/images/Projects/circle-close.svg" alt=""></span>
      </button> -->
  </div>

  <div class="modal-body modelprbody resourcescreen">
    <table class="sub-confirmation">
      <tr>
        <td>Product</td>
        <td> : </td>
        <td>{{productId}} </td>
      </tr>
      <tr>
        <td>Plan</td>
        <td> : </td>
        <td *ngIf="selected_plans.nickName=='Standard'">Free Tier</td>
        <td *ngIf="selected_plans.nickName=='Professional'">{{selected_plans.nickName}}</td>
      </tr>
      <tr>
        <td>Order Id</td>
        <td> :</td>
        <td>{{subscriptionDetails.id}} </td>
      </tr>
      <tr>
        <td>Subscription Id</td>
        <td> :</td>
        <td>{{subscriptionDetails.subscriptionId[0]}}</td>
      </tr>
      <!-- <tr>
              <td>Amount Paid</td>
              <td> :{{totalPay}}</td>
              <td></td>
            </tr> -->
      <tr>
        <td>Period</td>
        <td> :</td>
        <td> {{selected_plans.term}}</td>
      </tr>
    </table>
    <!-- </div> -->
  </div>
  <div class="modal-footer modelprfooter">
    <div class="col-md-12 confirmationmsg">
      <button class="btn btn-primary" (click)='close_modal()'>Ok</button>
    </div>
  </div>
</ng-template>