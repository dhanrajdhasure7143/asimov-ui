<div class="container-fluid">
  <div class="row">
      <div class="col-md-6 row">
          <br>
          <div class="col-md-3">
            <span>
                  <select class="rpa-control" [(ngModel)]="timezone">
                      <option value="" disabled>Select Timezone</option>
                      <option *ngFor="let timeZone of timesZones" [value]="timeZone">
                          {{timeZone}}
                      </option>
                  </select>

            </span>&nbsp;&nbsp;
            <span  *ngIf="processid!='' && processid !=undefined">
              <mat-form-field>
                  <mat-label>Select Environemt</mat-label>
                  <mat-select [(ngModel)]="selectedEnvironment">
                      <mat-option *ngFor="let env of Environments" [value]="env.environmentId">
                          {{env.environmentName}}
                      </mat-option>
                  </mat-select>
              </mat-form-field>
            </span>
          </div>
          <div class="col-md-1">
            <span style="padding:5px">
              <button (click)="reset()" tooltip="Reset"><i class="fa fa-undo"></i></button>
            </span>
          </div>
          <div class="col-md-12">


              <cron-editor #cronEditorDemo [(cron)]="cronExpression" [disabled]="isCronDisabled" [(options)]="cronOptions">Cron here...
              </cron-editor>


              <br>

          </div>
          <div class="col-md-3">
                  <input type="date" class="rpa-control" [(ngModel)]="startdate" [min]="startdate"  (change)="enddate=startdate">
          </div>

          <div class="col-md-3 text-center">

              <ngx-timepicker-field [controlOnly]="true" [defaultTime]="'23:11'" [format]="24" [(ngModel)]="starttime"></ngx-timepicker-field>
          </div>

          <div class="col-md-3">

                  <input type="date" class="rpa-control" [(ngModel)]="enddate" [min]="startdate" >
          </div>
          <div class="col-md-3 text-center">

              <ngx-timepicker-field [controlOnly]="true" [defaultTime]="'23:11'" [format]="24" [(ngModel)]="endtime"></ngx-timepicker-field>
          </div>

          <div class="pull-right" style="padding:10px">
              <br><br>
              <button class="btn btn-primary eiap-btn" (click)="add_sch()">Add</button>
          </div>
          <br><br>
      </div>


      <div class="col-md-6 row">
          <div class="col-md-12">
              <br>
              <div class="text-right">
                  <span style="padding:5px">
                      <button [disabled]="!(flags.startflag)"  tooltip="Start" mat-mini-fab color="basic"   (click)="start_schedule()" >
                        <i class="fa fa-play"></i>
                      </button>
                    </span>
                  <span style="padding:5px">
                      <button [disabled]="!(flags.pauseflag)"  tooltip="Pause"   mat-mini-fab color="basic"   (click)="pause_schedule()">
                        <i class="fa fa-pause"></i>
                      </button>
                    </span>
                  <span style="padding:5px">
                      <button  [disabled]="!(flags.resumeflag)"  tooltip="Resume"  mat-mini-fab color="basic"   (click)="resume_schedule()">
                        <i class="fa fa-play-circle"></i>
                      </button>
                    </span>

                  <span style="padding:5px">
                    <button [disabled]="!(flags.deleteflag)" tooltip="Delete"  mat-mini-fab color="basic"   (click)="delete_schedule()">
                      <i class="fa fa-trash"></i>
                    </button>
                  </span>
                  <span style="padding:5px">
                    <button   mat-mini-fab color="basic"   tooltip="Refresh"  (click)="get_schedule()">
                      <i class="fa fa-sync-alt"></i>
                    </button>
                  </span>
              </div>
              <br><br>

              <!--For Bot Schedule-->
              <div  *ngIf="botid!='' && botid !=undefined">
              <table class="table">
                  <thead>
                      <th class="text-center"><input type="checkbox" (click)="check_all($event)"></th>
                      <th>Schedule Interval</th>
                      <th>Timezone</th>
                      <th>Last Run</th>
                      <th>Next Run</th>
                      <th>Status</th>
                  </thead>
                  <tbody>
                      <tr *ngFor="let schedule of schedule_list  | paginate: { itemsPerPage: 4,currentPage: q }">
                          <td class="text-center"><input type="checkbox" (click)="check_schedule($event,schedule.intervalId)" [checked]="schedule.check"></td>
                          <td>{{convertcron(schedule.scheduleInterval)}}</td>
                          <td>{{ schedule.timeZone}}</td>
                          <td *ngIf="schedule.lastRunTime!='null' && schedule.nextRunTime!=undefined">{{schedule.lastRunTime}}</td>
                          <td *ngIf="schedule.lastRunTime=='null' || schedule.nextRunTime==undefined">--</td>
                          <td *ngIf="schedule.nextRunTime!='null' && schedule.nextRunTime!=undefined">{{schedule.lastRunTime}}</td>
                          <td *ngIf="schedule.nextRunTime=='null' || schedule.nextRunTime==undefined">--</td>
                          <td *ngIf="schedule.botActionStatus!=undefined">{{schedule.botActionStatus}}</td>
                          <td *ngIf="schedule.botActionStatus==undefined">{{schedule.save_status}}</td>
                      </tr>
                  </tbody>
              </table>
              <pagination-controls (pageChange)="q = $event"></pagination-controls>
              </div>
              <div class="text-right">
                  <button class="btn btn-primary eiap-btn" (click)="saveschedule()">Save</button>
              </div>
          </div>
      </div>
  </div>
</div>
