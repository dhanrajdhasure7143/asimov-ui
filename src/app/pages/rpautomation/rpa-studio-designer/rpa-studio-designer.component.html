<div class="container-fluid main-content1 main-content">
  <div class=" content-area">
    <div class="row  module-heading title ">
      <div class="col-md-2 ">
          <span class="module-heading-title" (click)="removenodes()">RPA Studio</span>
      </div>
      <div class="col-md-7  ">
        
                <div class="actionsmenu-right"  *ngIf="current_instance != undefined">
                  <div class="action-item "   dropdown   placement="bottom" tooltip="Versions" >
                      <button class=" dropdown-action-item clickable dropdown-toggle" id="Versions" dropdownToggle type="button"
                        aria-controls="versions">
                        <img src="../../../../assets/images/RPA/icon_latest/layer.svg" />
                        <!-- <span><i class="ri-stack-line"></i></span> -->
                        &nbsp;Version &nbsp;{{current_instance.selectedversion}} &nbsp;<span class="caret"></span>
                    </button>
                    <ul id="versions" style="max-width:300px;max-height:250px;overflow:auto;left:auto;" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
                      <li  role="menuitem" class="clickable"  (click)="current_instance.selectedversion=version.vId;current_instance.switchversion(version.vId)"  *ngFor="let version of current_instance.versionsList" style="white-space: nowrap;" >
                        
                        Version&nbsp; {{version.vId}}
                      </li>
                    </ul>
                  </div>
                  <div class="action-item" dropdown  #dropdown="bs-dropdown"   [insideClick]="true" >
                    <button class= "dropdown-action-item clickable dropdown-toggle" id="Environments" placement="bottom" tooltip="Environments" dropdownToggle type="button"
                    aria-controls="environments">
                    <img src="../../../../assets/images/RPA/icon_latest/desktop.svg" />
                      &nbsp;
                      <span *ngIf=" current_instance.selectedEnvironments.length==0">Environment</span>
                      <span *ngIf=" current_instance.selectedEnvironments.length>=1">{{current_instance.selectedEnvironments[0].environmentName}}<span *ngIf="current_instance.selectedEnvironments.length>1">...({{current_instance.selectedEnvironments.length}})</span></span>
                      &nbsp;<span class="caret"></span>
                    </button>
                    <ul id="environments" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
                      <li  role="menuitem" class="clickable"  *ngFor="let env of  current_instance.environment" style="white-space: nowrap;" >
                        <input type="checkbox" [checked]="env.checked==true" (change)=" current_instance.checkuncheckenv(env.environmentId)" >
                        &nbsp; {{env.environmentName}}
                      </li>
                      <li role="menuitem" class="clickable"  >
                        <span class="clickable"  (click)=" current_instance.create_env();">
                          <img src="../../../../assets/images/RPA/icon_latest/pluse-blue.svg" class="testplus"/>
                          New
                        
                        </span>
                      </li>
                    </ul>
                  </div>
                
                  <div class="action-item" placement="bottom" tooltip="Save Bot" (click)=" current_instance.saveBotFunAct()">
                    <img src="../../../../assets/images/RPA/icon_latest/save.svg" />
                    <!-- <i class="ri-save-line"></i> -->
                  </div>
                  <!-- <div class="action-item" >
                      <i class="ri-play-line"></i>
                  </div> -->
          
                  <div class="action-item"  placement="bottom" tooltip="Start Bot"  (click)=" current_instance.executionAct()">
                    <img src="../../../../assets/images/RPA/icon_latest/play.svg" />
                      <!-- <i class="ri-play-circle-line"></i> -->
                  </div>
                  <div class="action-item"  placement="bottom" tooltip="Stop Bot" (click)=" current_instance.stopBot()">
                    <img src="../../../../assets/images/RPA/icon_latest/pause.svg" />
                      <!-- <i class="ri-stop-circle-line"></i> -->
                  </div>
                
 
                  <div class="action-item" placement="bottom" tooltip="Predefined Bots">
                    <img src="../../../../assets/images/RPA/icon_latest/duplicate.svg" />
                      <!-- <i class="ri-file-copy-line"></i> -->
                  </div>
                  <div class="action-item" placement="bottom" tooltip="View Logs" (click)=" current_instance.viewlogdata( current_instance.logspopup,'open')">
                    <img src="../../../../assets/images/RPA/icon_latest/artboard.svg" />
                      <!-- <i class="ri-clipboard-line"></i> -->
                  </div>
                  <div class="action-item" placement="bottom" tooltip="Scheduler" (click)=" current_instance.openschedule()">
                    <img src="../../../../assets/images/RPA/icon_latest/time.svg" />
                      <!-- <i class="ri-history-line"></i> -->
                  </div>
                  <div class="action-item" placement="bottom" tooltip="Download">
                    <button type="button" placement="bottom" id="dropdownMenuButton" class="downloadBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <img src="../../../../assets/images/RPA/icon_latest/download.svg"   />
                    </button>
                    <div class="rpa-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <div><a class="dropdown-item clickable" (click)=" current_instance.childBotWorkspace.downloadJpeg()">&nbsp;<span>JPEG</span></a></div>
                      <div><a class="dropdown-item clickable" (click)=" current_instance.childBotWorkspace.downloadPng()">&nbsp;<span>PNG</span></a></div>
                      <div><a class="dropdown-item clickable" (click)=" current_instance.childBotWorkspace.downloadPdf()">&nbsp;<span>PDF</span></a></div>
                    </div>
                  </div>
                  <div class="action-item" (click)="current_instance.childBotWorkspace.zoomin('')">
                    <img src="../../../assets/images/BPMS/zoom-in.svg"/>
                  </div>
                  <div class="action-item" (click)="current_instance.childBotWorkspace.zoomout('')">
                    <img src="../../../assets/images/BPMS/zoom-out.svg"/>
                  </div>
                  <div class="action-item" placement="bottom" tooltip="Reset">
                    <button (click)=" current_instance.childBotWorkspace.reset('');slider=0;">
                      <img src="../../../../assets/images/RPA/icon_latest/repeat.svg" />
                      <!-- <i class="fa fa-sync-alt" style="font-size:18px;font-weight: 700;"></i> -->
                    </button>
                  </div>
                  <div class="action-item" dropdown>
                      
                      <button class="clickable  text-primary dropdown-toggle" placement="bottom" tooltip="More" id="otherActions" dropdownToggle type="button"
                      aria-controls="other_actions">
                      <img src="../../../../assets/images/RPA/icon_latest/more.svg" />
                      <!-- <i class="ri-more-2-fill"></i> -->
                      </button>
                      <ul id="other_actions" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
                        <li class="clickable" class="clickable action-item-data" >
                            <button  placement="bottom"  [disabled]="current_instance.savebotrespose == undefined" tooltip="Delete Bot" (click)=" current_instance.delete()">
                              <img src="../../../../assets/images/RPA/icon_latest/delete.svg" />&nbsp;&nbsp;Delete
                            </button>
                        </li>  
                        <li  role="menuitem" class="clickable action-item-data"  style="white-space: nowrap;" >
                              <button  placement="top" tooltip="Reset Bot" (click)=" current_instance.reset()" >
                                <img src="../../../../assets/images/RPA/icon_latest/reset.svg" />&nbsp;&nbsp;Reset
                              </button>
                        </li>
                        <li  role="menuitem" class="clickable action-item-data"   style="white-space: nowrap;" >
                            <button  placement="top" tooltip="Export Bot" (click)=" current_instance.exportbot(current_instance.botState)" >
                              <img src="../../../../assets/images/RPA/icon_latest/export.svg" />&nbsp;&nbsp;Export 
                            </button>
                        </li>
                    
                      </ul>
                  </div>
                </div>
              
      </div>
      <div class="col-md-3">
          <button  type="button" *ngIf="tabsArray.length > 0" class="btn btn-default" aria-hidden="true" placement="bottom" id="Load_Bot" (click)="rpa_studio.onLoad()">
              <img src="../../../../assets/images/RPA/icon_latest/load-blue.svg" class="default-img">
              <img src="../../../../assets/images/RPA/icon_latest/load.svg" class="hover-img">&nbsp;&nbsp;Load
            </button>
            
            <button  type="button"  *ngIf="tabsArray.length > 0"  class="btn btn-primary"  aria-hidden="true" placement="bottom" id="Create_Bot" (click)="rpa_studio.onCreate(0)">
              <img src="../../../../assets/images/Projects/White-plus.svg" class="testplus" />
              Create
            </button>
      </div>
   
  </div>
  <div class="toolset-mainheader" >
    <div class="actionsheaderdiv">
      <span class="module-sub-header-title clickable">
      <span   *ngIf="toolset_instance != undefined" (click)="toolset_instance.sidenavbutton=!(toolset_instance.sidenavbutton)">
        <img src="../../../../assets/images/RPA/icon_latest/menu-line.svg" *ngIf="toolset_instance.sidenavbutton==false" class="testplus" />
        <img src="../../../../assets/images/RPA/icon_latest/close.svg" *ngIf="toolset_instance.sidenavbutton==true" class="toolset-close testplus" />
        Toolset & Actions
      </span>
    </span>
    </div>
 
  </div>
  <mat-tab-group class="tabs" (selectedTabChange)="change_active_bot($event)" [selectedIndex]="tabsArray.length -1 " >
      <!-- <span class="clickable">Toolset & Actions</span>  -->
      
      <mat-tab  *ngFor="let tab of tabsArray">
        <ng-template mat-tab-label>
            <mat-icon class="text-primary">android</mat-icon>
            <span class="tab-botname">{{tab.botName}}</span>
            <div class="text-right">
              <button [id]="'close_bot_'+tab.botName"  class="bot-close" (click)="removetab(tab)">
                <img src="../../../../assets/images/RPA/icon_latest/close.svg" />
                <!-- <i class="fa fa-times"  ></i> -->
              </button>
            </div>
        </ng-template>
        <app-rpa-toolset [bot]="tab" #rpa_bot_instance ></app-rpa-toolset>
      </mat-tab>
      <mat-tab [disabled]="true">
        <ng-template mat-tab-label>
          <span  [matMenuTriggerFor]="menu" class="clickable text-primary"><i class="fa fa-plus"></i></span>
          <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="rpa_studio.onCreate(0)">Create New</button>
              <button mat-menu-item  (click)="rpa_studio.onLoad()">Load</button>
            </mat-menu>
            
        </ng-template>
      </mat-tab>
  </mat-tab-group>
</div>