<div class="row col-md-12 p-0 h-100">
  <div *ngIf="false" class="actionsmenu row">
    <div class="col-md-3 p-0">
      <div class="actionsmenu-left">
        <button class="action-item" placement="bottom" tooltip="Toolset & Actions" *ngIf="rpa_toolset.sidenavbutton==false" (click)="rpa_toolset.sidenavbutton=true">
            <span class="pull-left">
              <img src="../../../../assets/images/RPA/icon_latest/menu-line.svg" class="toolset-menuicon" />Toolset & Actions
            </span>
        </button>
      </div>
    </div>
    <div class="col-md-9 p-0">
      <div class="actionsmenu-right">
        <div class="action-item "   dropdown   >
            <button class=" dropdown-action-item clickable dropdown-toggle" id="Versions" dropdownToggle type="button"
            placement="bottom" tooltip="Versions" aria-controls="versions">
              <img src="../../../../assets/images/RPA/icon_latest/layer.svg" />
              &nbsp;Version &nbsp;{{selectedversion}} &nbsp;<span class="caret"></span>
          </button>
          <ul id="versions" style="max-width:300px;max-height:250px;overflow:auto;left:auto;" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
            <li  role="menuitem" class="clickable"  (click)="selectedversion=version.vId;switchversion(version.vId)"  *ngFor="let version of versionsList" style="white-space: nowrap;" >
              
               Version&nbsp; {{version.vId}}
            </li>
          </ul>
        </div>
        <div class="action-item" dropdown  #dropdown="bs-dropdown"   [insideClick]="true" >
          <button class= "dropdown-action-item clickable dropdown-toggle" id="Environments" placement="bottom" tooltip="Environments" dropdownToggle type="button"
          aria-controls="environments">
          <img src="../../../../assets/images/RPA/icon_latest/desktop.svg" />
            &nbsp;
            <span *ngIf="selectedEnvironments.length==0">Environment</span>
            <span *ngIf="selectedEnvironments.length>=1">{{selectedEnvironments[0].environmentName}}<span *ngIf="selectedEnvironments.length>1">...({{selectedEnvironments.length}})</span></span>
            &nbsp;<span class="caret"></span>
          </button>
          <ul id="environments" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
            <li  role="menuitem" class="clickable"  *ngFor="let env of environment" style="white-space: nowrap;" >
              <input type="checkbox" [checked]="env.checked==true" (change)="checkuncheckenv(env.environmentId)" >
              &nbsp; {{env.environmentName}}
            </li>
            <li role="menuitem" class="clickable"  >
              <span class="clickable"  (click)="create_env();">
                <img src="../../../../assets/images/RPA/icon_latest/pluse-blue.svg" class="testplus"/>
                New
               
              </span>
            </li>
          </ul>
        </div>
       
        <div class="action-item" placement="bottom" tooltip="Save Bot" (click)="saveBotFunAct()">
          <img src="../../../../assets/images/RPA/icon_latest/save.svg" />         
        </div>
      

        <div class="action-item"  placement="bottom" tooltip="Start Bot"  (click)="executionAct()">
        <img src="../../../../assets/images/RPA/icon_latest/play.svg" />         
        </div>
        <div class="action-item"  placement="bottom" tooltip="Stop Bot" (click)="stopBot()">
          <img src="../../../../assets/images/RPA/icon_latest/pause.svg" />      
        </div>
      
        <div class="action-item" placement="bottom" tooltip="Predefined Bots">
          <img src="../../../../assets/images/RPA/icon_latest/duplicate.svg" />
        </div>
        <div class="action-item" placement="bottom" tooltip="View Logs" (click)="viewlogdata(logspopup,'open')">
          <img src="../../../../assets/images/RPA/icon_latest/artboard.svg" />
        </div>
        <div class="action-item" placement="bottom" tooltip="Scheduler" (click)="openschedule()">
          <img src="../../../../assets/images/RPA/icon_latest/time.svg" />
        </div>
        <div class="action-item"  >
          <button type="button" placement="bottom" tooltip="Download" id="dropdownMenuButton" class="downloadBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img src="../../../../assets/images/RPA/icon_latest/download.svg"   />
          </button>
          <div class="rpa-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
            <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadJpeg()">&nbsp;<span>JPEG</span></a></div>
            <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPng()">&nbsp;<span>PNG</span></a></div>
            <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPdf()">&nbsp;<span>PDF</span></a></div>
          </div>
        </div>
        <div class="action-item" placement="bottom" tooltip="Reset">
          <button (click)="childBotWorkspace.reset('');slider=0;">
            <img src="../../../../assets/images/RPA/icon_latest/repeat.svg" />
          </button>
        </div>
        <div class="action-item" dropdown>
            
            <button class="clickable  text-primary dropdown-toggle" placement="bottom" tooltip="More" id="otherActions" dropdownToggle type="button"
            aria-controls="other_actions">
            <img src="../../../../assets/images/RPA/icon_latest/more.svg" />
            </button>
            <ul id="other_actions" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
              <li class="clickable" class="clickable action-item-data" >
                  <button  placement="bottom"  [disabled]="savebotrespose == undefined" tooltip="Delete Bot" (click)="delete()">
                    <img src="../../../../assets/images/RPA/icon_latest/delete.svg" />&nbsp;&nbsp;Delete
                  </button>
              </li>  
              <li  role="other_actions" class="clickable action-item-data"  style="white-space: nowrap;" >
                    <button  placement="top" tooltip="Reset Bot" (click)="reset()" >
                      <img src="../../../../assets/images/RPA/icon_latest/reset.svg" />&nbsp;&nbsp;Reset
                    </button>
              </li>
              <li  role="other_actions" class="clickable action-item-data"   style="white-space: nowrap;" >
                  <button  placement="top" tooltip="Export Bot" (click)="exportbot(botState)" >
                    <img src="../../../../assets/images/RPA/icon_latest/export.svg" />&nbsp;&nbsp;Export 
                  </button>
              </li>
           
            </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-12 main-container" style="display:flex">

   



    <div class="col-md-12 p-0">
      <app-rpa-studio-designerworkspace [bot]="botState"></app-rpa-studio-designerworkspace>
      <div class="rpa-custom-slider">
      
          <button class="action-item hovericon" placement="left" tooltip="Zoom in"(click)="childBotWorkspace.zoomin('')">
              <img src="../../../../assets/images/RPA/icon_latest/Zoom In.svg"/>
          </button>
          
            <button class="action-item hovericon"  placement="left" tooltip="Zoom out" (click)="childBotWorkspace.zoomout('')">
              <img src="../../../../assets/images/RPA/icon_latest/Zoom Out.svg"/>
            </button>
            
              <button class="action-item hovericon" placement="left" tooltip="Fit to screen" (click)="childBotWorkspace.reset('');slider=0;">
                <img src="../../../../assets/images/RPA/icon_latest/Fit screen.svg" />
              
              </button>
         
        </div>
    </div>

    <div *ngIf="false" class="col-md-1 p-0">
    <div class="rpa-custom-slider">
   

    </div>

    </div>

  </div>

  
    
</div>













<div *ngIf="schpop">
  <div id='sch' class="rpa-modal schedulemod" style="display:block">
      <div class="rpa-modal-content">
          <div class="rpa-modal-header">
              <span class="rpa-modal-close" (click)="closesch()"><img src="../../../../assets/images/RPA/icon_latest/close.svg" alt=""></span>
              <h4>Scheduler</h4>
          </div>
          <div class="modal-body actions-mbody">
            <app-rpa-scheduler [data]="schedule"></app-rpa-scheduler>
          </div>
      </div>
  </div>
</div>


  <ng-template #logspopup *ngIf="savebotrespose!=undefined">
    <!-- <div *ngIf="savebotrespose!=undefined"> -->
      <app-rpa-so-logs [logsbotid]="logsbotid" [logsmodalref]="logsmodalref" [AllVersionsList]="AllVersionsList" [selectedversion]="savebotrespose.version"></app-rpa-so-logs>
      
    <!-- </div> -->
 
  </ng-template>





<div [id]="'rpa_createenvironment'+'_'+botState.botName"  class="rpa-modal">
  <div class="rpa-modal-content">
    <div class="rpa-modal-header">
        <span class="rpa-modal-close" (click)=" close_c_env()"><img src="../../../../assets/images/RPA/icon_latest/close.svg" alt=""></span>
        <h4>Create Environment</h4>
    </div>
    <div class="modal-body createenv-mbody">

      <form [formGroup]="insertForm" (ngSubmit)="savedata()">
        <div class="container m-contanier form-body">
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="environmentName">Name<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control data" formControlName="environmentName" #environmentName value="" placeholder="Enter Name">
            <span *ngIf="(insertForm.get('environmentName').invalid && insertForm.get('environmentName').touched) && !insertForm.controls['environmentName'].hasError('maxlength')" class="errspan required">Name Required*</span>
            <div *ngIf="insertForm.controls['environmentName'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="environmentType">Type<span class="star">*</span></label>
            <select class="form-control" formControlName="environmentType" (change)="EnvType1()">
                <option value="" [selected]="true">--Select Type--</option>
                <option value="Windows">Windows</option>
                <option value="Mac">Mac</option>
                <option value="Linux">Linux</option>

            </select>
            <span *ngIf="insertForm.get('environmentType').invalid && insertForm.get('environmentType').touched" 
                class="errspan required">Type Required*</span>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="agentPath">Agent Path<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="agentPath" value="" placeholder="Enter Agent Path">
            <span *ngIf="(insertForm.get('agentPath').invalid && insertForm.get('agentPath').touched) && !insertForm.controls['agentPath'].hasError('maxlength')" class="errspan required"> Agent Path Required*</span>

            <div *ngIf="insertForm.controls['agentPath'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>            
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="categoryId">Category<span class="star">*</span></label>
            <select type="text" class="form-control" formControlName="categoryId"  [value]="categoryList.length==1?categoryList[0].categoryId:'0'">
                <option value="0" disabled>Select Category</option>
                <option [value]="category.categoryId" *ngFor="let category of categoryList">{{category.categoryName}}</option>
            </select>   
             <span *ngIf="(insertForm.get('categoryId').invalid && insertForm.get('categoryId').touched)"  class="errspan required"> Category Required*</span>
        </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="hostAddress"> IP Address/Host<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="hostAddress" value="" placeholder="Enter IP Address/Host">
            <span *ngIf="(insertForm.get('hostAddress').invalid && insertForm.get('hostAddress').touched) && !insertForm.controls['hostAddress'].hasError('maxlength') && !insertForm.controls['hostAddress'].hasError('pattern')" class="errspan required"> IP Address/Host Required*</span>
            <div *ngIf="(insertForm.controls['hostAddress'].hasError('pattern') && !insertForm.controls['hostAddress'].hasError('maxlength')) && insertForm.get('hostAddress').touched" class="errspan required">
                Invalid IP Address format
            </div>
            <div *ngIf="(insertForm.controls['hostAddress'].hasError('pattern') && insertForm.controls['hostAddress'].hasError('maxlength'))" class="errspan required">
                Invalid IP Address format
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="userName">Username<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="username" value="" placeholder="Enter Username">
            <span *ngIf="(insertForm.get('username').invalid && insertForm.get('username').touched) && !insertForm.controls['username'].hasError('maxlength')" class="errspan required"> Username Required*</span>

            <div *ngIf="insertForm.controls['username'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>            
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="password">Password<span class="star">*</span></label>
            <input [type]="passwordtype1 ? 'text': 'password'" maxlength="51" class="form-control" formControlName="password" value="" placeholder="Enter Password" passwordToggle>
            <span *ngIf="passwordtype1==false" (click)="passwordtype1 =!passwordtype1"  class="pdicon">
              <img src="../../../../../assets/images/Projects/eye-show.svg"  class="testplus1">
            </span>
            <span *ngIf="passwordtype1==true" (click)="passwordtype1 =!passwordtype1"  class="pdicon">
              <img src="../../../../../assets/images/Projects/eye-hide.svg"  class="testplus1">
            </span>

            <span *ngIf="(insertForm.get('password').invalid && insertForm.get('password').touched) && !insertForm.controls['password'].hasError('maxlength')" class="errspan required"> Password Required*</span>

            <div *ngIf="insertForm.controls['password'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="connectionType">Connection Type<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="connectionType" value="" placeholder="Enter Connection Type" readonly>
            <span *ngIf="(insertForm.get('connectionType').invalid && insertForm.get('connectionType').touched) && !insertForm.controls['connectionType'].hasError('maxlength')" class="errspan required"> Connection Type Required*</span>
            <div *ngIf="insertForm.controls['connectionType'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="portNumber">Port<span class="star">*</span></label>
            <input type="text" maxlength="7" class="form-control" (keyup)=" (event.charCode > 47 && event.charCode < 58)" formControlName="portNumber" value="" placeholder="Enter Port">

            <span *ngIf="(insertForm.get('portNumber').invalid && insertForm.get('portNumber').touched) && !insertForm.controls['portNumber'].hasError('maxlength')" class="errspan required"> Port Required*</span>

            <div *ngIf="insertForm.controls['portNumber'].hasError('maxlength')" class="errspan required">
                Maximum of 6 characters
            </div>
          </div>
          <div class="col-md-6 p-0 form-group">
            <input type="checkbox" formControlName="activeStatus"> Active
          </div>
        </div>
        <div class="form-footer">
          <button type="button" class="btn btn-default"  (click)="resetEnvForm()">Reset</button>
          <button type="button" class="btn btn-primary"  (click)="testConnection('insert')" [disabled]="insertForm.invalid">Test Connection</button>   
          <button type="button" class="btn btn-primary"  (click)="saveEnvironment()" [disabled]="insertForm.invalid || submitted">Save</button>
        </div>
  

      </form>

    </div>

  </div>
</div>


<ng-template #auditLogsPopup>
  <div ngb-modal-draggable [ngbModalDraggableHandle]="draggableHandle" class="cursor-all-scroll">
  <div #draggableHandle class="modal-header modelprhead newmodelcla">
    Audit Logs  
    <span class="pull-right">
      <span class=" clickable" (click)="auditLogsModelRef.hide()">
        <img src="../../../../assets/images/Projects/circle-close.svg" alt="">
      </span>
    </span>
  </div>
  </div>
  <div class="modal-body newmodelbodycl" >
    <div class="logs-container" style="background: white;">
          <div *ngIf="auditLogsData.length!=0">
            <div class="log-row"   *ngFor="let log of auditLogsData">
              <span *ngIf="log.Status=='UpdatedConfig'">
                <b>{{log.changedBy}}</b> updated <b>{{log.taskName}}</b> task input field <b>{{log.changeActivity}}</b> from <b>{{log.previousValue}}</b> to <b>{{log.newValue}}</b> on
                <span *ngIf="log.changedDate!=null && log.changedDate!=undefined">
                  {{log.changedDate| date:'MMM dd, y, HH:mm:ss'}}
                </span>
      
              </span>
              <span *ngIf="log.Status=='AddedTask'">
                <b>{{log.changedBy}}</b> added task <b>{{log.taskName}}</b> on 
                <span *ngIf="log.changedDate!=null && log.changedDate!=undefined">
                  {{log.changedDate| date:'MMM dd, y, HH:mm:ss'}}
                </span>
              </span>
              <span *ngIf="log.Status=='RemovedTask'">
                <b>{{log.changedBy}}</b> removed task <b>{{log.taskName}}</b> on
                <span *ngIf="log.changedDate!=null && log.changedDate!=undefined">
                  {{log.changedDate| date:'MMM dd, y, HH:mm:ss'}}
                </span>
              </span>
              <span *ngIf="log.Status=='AddedEnv'">
                <b>{{log.changedBy}}</b> added environment <b>{{log.taskName}}</b> on
                <span *ngIf="log.changedDate!=null && log.changedDate!=undefined">
                  {{log.changedDate| date:'MMM dd, y, HH:mm:ss'}}
                </span>
              </span>
              <span *ngIf="log.Status=='RemovedEnv'">
                <b>{{log.changedBy}}</b> removed environment <b>{{log.taskName}}</b> on 
                <span *ngIf="log.changedDate!=null && log.changedDate!=undefined">
                  {{log.changedDate| date:'MMM dd, y, HH:mm:ss'}}
                </span>
              </span>

              
              <span *ngIf="log.Status=='BotCreated'">
                <b>{{log.changedBy}}</b> created bot <b>{{log.taskName}}</b> on
                <span *ngIf="log.changedDate!=null && log.changedDate!=undefined">
                  {{log.changedDate| date:'MMM dd, y, HH:mm:ss'}}
                </span>
              </span>
              
            </div>
          </div>
          <div class="text-center" *ngIf="auditLogsData.length==0">
            <img style="height:300px" src="../../../../assets/images/RPA/No-Items.svg">
            <br>
            <h6>No Items To Display</h6>
          </div>
    </div>

  </div>


</ng-template>