<div class="row col-md-12 p-0 h-100">
  <div *ngIf="false" class="actionsmenu row">
    <div class="col-md-3 p-0">
      <div class="actionsmenu-left">
        <button class="action-item" placement="bottom" tooltip="Toolset & Actions" *ngIf="rpa_toolset.sidenavbutton==false" (click)="rpa_toolset.sidenavbutton=true">
            <!-- <span><i class="ri-function-line"></i></span>&nbsp;Toolset -->
            <span class="pull-left">
              <img src="../../../../assets/images/RPA/icon_latest/menu-line.svg" class="toolset-menuicon" />Toolset & Actions
            </span>
        </button>
      </div>
    </div>
    <div class="col-md-9 p-0">
      <div class="actionsmenu-right">
        <div class="action-item "   dropdown   >
            <button class=" dropdown-action-item clickable dropdown-toggle" id="Versions" dropdownToggle type="button"
            placement="bottom" tooltip="Versions" aria-controls="versions">
              <img src="../../../../assets/images/RPA/icon_latest/layer.svg" />
              <!-- <span><i class="ri-stack-line"></i></span> -->
              &nbsp;Version &nbsp;{{selectedversion}} &nbsp;<span class="caret"></span>
          </button>
          <ul id="versions" style="max-width:300px;max-height:250px;overflow:auto;left:auto;" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
            <li  role="menuitem" class="clickable"  (click)="selectedversion=version.vId;switchversion(version.vId)"  *ngFor="let version of versionsList" style="white-space: nowrap;" >
              
               Version&nbsp; {{version.vId}}
            </li>
          </ul>
        </div>
        <div class="action-item" dropdown  #dropdown="bs-dropdown"   [insideClick]="true" >
          <button class= "dropdown-action-item clickable dropdown-toggle" id="Environments" placement="bottom" tooltip="Environments" dropdownToggle type="button"
          aria-controls="environments">
          <img src="../../../../assets/images/RPA/icon_latest/desktop.svg" />
            <!-- <span><i class="ri-mac-line"></i></span> -->
            &nbsp;
            <span *ngIf="selectedEnvironments.length==0">Environment</span>
            <span *ngIf="selectedEnvironments.length>=1">{{selectedEnvironments[0].environmentName}}<span *ngIf="selectedEnvironments.length>1">...({{selectedEnvironments.length}})</span></span>
            &nbsp;<span class="caret"></span>
          </button>
          <ul id="environments" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
            <li  role="menuitem" class="clickable"  *ngFor="let env of environment" style="white-space: nowrap;" >
              <input type="checkbox" [checked]="env.checked==true" (change)="checkuncheckenv(env.environmentId)" >
              &nbsp; {{env.environmentName}}
            </li>
            <li role="menuitem" class="clickable"  >
              <span class="clickable"  (click)="create_env();">
                <img src="../../../../assets/images/RPA/icon_latest/pluse-blue.svg" class="testplus"/>
                New
                <!-- <i class="fa  fa-plus"></i>&nbsp;&nbsp;New -->
              </span>
            </li>
          </ul>
        </div>
       
        <div class="action-item" placement="bottom" tooltip="Save Bot" (click)="saveBotFunAct()">
          <img src="../../../../assets/images/RPA/icon_latest/save.svg" />
          <!-- <i class="ri-save-line"></i> -->
        </div>
        <!-- <div class="action-item" >
            <i class="ri-play-line"></i>
        </div> -->

        <div class="action-item"  placement="bottom" tooltip="Start Bot"  (click)="executionAct()">
          <img src="../../../../assets/images/RPA/icon_latest/play.svg" />
            <!-- <i class="ri-play-circle-line"></i> -->
        </div>
        <div class="action-item"  placement="bottom" tooltip="Stop Bot" (click)="stopBot()">
          <img src="../../../../assets/images/RPA/icon_latest/pause.svg" />
            <!-- <i class="ri-stop-circle-line"></i> -->
        </div>
      
        <div class="action-item" placement="bottom" tooltip="Predefined Bots">
          <img src="../../../../assets/images/RPA/icon_latest/duplicate.svg" />
            <!-- <i class="ri-file-copy-line"></i> -->
        </div>
        <div class="action-item" placement="bottom" tooltip="View Logs" (click)="viewlogdata(logspopup,'open')">
          <img src="../../../../assets/images/RPA/icon_latest/artboard.svg" />
            <!-- <i class="ri-clipboard-line"></i> -->
        </div>
        <div class="action-item" placement="bottom" tooltip="Scheduler" (click)="openschedule()">
          <img src="../../../../assets/images/RPA/icon_latest/time.svg" />
            <!-- <i class="ri-history-line"></i> -->
        </div>
        <div class="action-item"  >
          <button type="button" placement="bottom" tooltip="Download" id="dropdownMenuButton" class="downloadBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img src="../../../../assets/images/RPA/icon_latest/download.svg"   />
          </button>
          <div class="rpa-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
            <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadJpeg()">&nbsp;<span>JPEG</span></a></div>
            <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPng()">&nbsp;<span>PNG</span></a></div>
            <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPdf()">&nbsp;<span>PDF</span></a></div>
          </div>
        </div>
        <div class="action-item" placement="bottom" tooltip="Reset">
          <button (click)="childBotWorkspace.reset('');slider=0;">
            <img src="../../../../assets/images/RPA/icon_latest/repeat.svg" />
            <!-- <i class="fa fa-sync-alt" style="font-size:18px;font-weight: 700;"></i> -->
          </button>
        </div>
        <div class="action-item" dropdown>
            
            <button class="clickable  text-primary dropdown-toggle" placement="bottom" tooltip="More" id="otherActions" dropdownToggle type="button"
            aria-controls="other_actions">
            <img src="../../../../assets/images/RPA/icon_latest/more.svg" />
            <!-- <i class="ri-more-2-fill"></i> -->
            </button>
            <ul id="other_actions" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-basic">
              <li class="clickable" class="clickable action-item-data" >
                  <button  placement="bottom"  [disabled]="savebotrespose == undefined" tooltip="Delete Bot" (click)="delete()">
                    <img src="../../../../assets/images/RPA/icon_latest/delete.svg" />&nbsp;&nbsp;Delete
                  </button>
              </li>  
              <li  role="other_actions" class="clickable action-item-data"  style="white-space: nowrap;" >
                    <button  placement="top" tooltip="Reset Bot" (click)="reset()" >
                      <img src="../../../../assets/images/RPA/icon_latest/reset.svg" />&nbsp;&nbsp;Reset
                    </button>
              </li>
              <li  role="other_actions" class="clickable action-item-data"   style="white-space: nowrap;" >
                  <button  placement="top" tooltip="Export Bot" (click)="exportbot(botState)" >
                    <img src="../../../../assets/images/RPA/icon_latest/export.svg" />&nbsp;&nbsp;Export 
                  </button>
              </li>
           
            </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-12 main-container" style="display:flex">

   



    <div class="col-md-12 p-0">
      <app-rpa-studio-designerworkspace [bot]="botState"></app-rpa-studio-designerworkspace>
      <div class="rpa-custom-slider">
          <!-- <ng5-slider id="zoominzoomout" [value]="slider" [(ngModel)]="slider" [options]="options" (mouseup)="sliderEvent()"></ng5-slider> -->
          <button class="action-item hovericon" placement="left" tooltip="Zoom in"(click)="childBotWorkspace.zoomin('')">
              <img src="../../../../assets/images/RPA/icon_latest/Zoom In.svg"/>
          </button>
          
            <button class="action-item hovericon"  placement="left" tooltip="Zoom out" (click)="childBotWorkspace.zoomout('')">
              <img src="../../../../assets/images/RPA/icon_latest/Zoom Out.svg"/>
            </button>
            
              <button class="action-item hovericon" placement="left" tooltip="Fit to screen" (click)="childBotWorkspace.reset('');slider=0;">
                <img src="../../../../assets/images/RPA/icon_latest/Fit screen.svg" />
                <!-- <i class="fa fa-sync-alt" style="font-size:18px;font-weight: 700;"></i> -->
              </button>
         
        </div>
    </div>

    <div *ngIf="false" class="col-md-1 p-0">
    <div class="rpa-custom-slider">
      <!-- <ng5-slider id="zoominzoomout" [value]="slider" [(ngModel)]="slider" [options]="options" (mouseup)="sliderEvent()"></ng5-slider> -->

    </div>
  
  <!-- <button style="width: 45px; display: none;" tooltip="Reset" placement="bottom" (click)="childBotWorkspace.reset('');slider=0;"><i class="fa fa-sync-alt text-primary"></i></button>
    <div class="download" style="display:none;">
      <button type="button" placement="bottom" id="dropdownMenuButton" class="downloadBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <img style="filter: none; width: 100%" src="../../../../assets/downloadimage.svg">
      </button>
      <div class="rpa-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
        <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadJpeg()"><i class="fas fa-file-image"> </i>&nbsp;<span>JPEG</span></a></div>
        <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPng()"><i class="fas fa-file-image"></i>&nbsp;<span>PNG</span></a></div>
        <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPdf()"><i class="fas fa-file-pdf"></i>&nbsp;<span>PDF</span></a></div>
      </div>
    </div> -->
    </div>

  </div>

  
      <!--
        <div style="margin: 1px -2px 0px 0px;border: 1px solid lightgray;text-align:center; width:50px"id="dragicons">
          <!-- <button type="button"class="scroll top">
            <img style="width:18px;text-align:center;"src="..\\assets\images\RPA\UpArrow.svg">
          </button> -->
<!--

          <div class="nodes" tooltip="Scheduler" >
            <div class="" >
              <span>
                <button class="text-center" (click)="openschedule()" >
                  <img class="imageI1" src="/assets/images/RPA/rpa-actions/schedule.svg">
                </button>
              </span>
            </div>
          </div>
          <div class="nodes"  tooltip="Bot Store">
            <div class="" >
              <span>
                <img src="/assets/images/RPA/rpa-actions/botStore.svg" class="imageI1">
              </span>
            </div>
          </div>
          <div class="nodes" tooltip="Environments">
            <div class="" >
              <span>
                <img src="/assets/images/RPA/rpa-actions/environments.svg" class="imageI1">
              </span>
            </div>
          </div>
          <div class="nodes">
            <div class="" tooltip="Save Bot">
              <span>
                <img class="imageI1" src="/assets/images/RPA/rpa-actions/save.svg">
              </span>
            </div>
          </div>
          <div class="nodes">
            <div class=""  tooltip="Edit Bot">
              <span>
                <img class="imageI1" src="/assets/images/RPA/rpa-actions/edit.svg">
              </span>
            </div>
          </div>


          <div class="nodes">
            <div class=""  tooltip="Start Bot">
              <span>
                <img class="imageI1" src="/assets/images/RPA/rpa-actions/play.svg">
              </span>
            </div>
          </div>


          <div class="nodes">
            <div class=""  tooltip="Stop Bot" >
              <span>
                <img class="imageI1" src="/assets/images/RPA/stop (1).svg">
              </span>
            </div>
          </div>

          <div class="nodes">
            <div class=""  tooltip="Versions">
              <span>
                <img src="/assets/images/RPA/rpa-actions/version.svg" class="imageI1">
              </span>
            </div>
          </div>
          <!-- <button (click)="scrollbottom()"type="button"class="scroll bottom">
            <img style="width:18px;text-align:center;"src="..\\assets\images\RPA\DownArrow.svg">
          </button> -->

          <!--
        </div>-->


        <!-- <div id="menuicons" class="menuicons_rpa">
    


          <div class="nodes ">
            <div class="clickable  text-primary" id="schedule" tooltip="Scheduler" placement="bottom" >
              <span>
                <button class="text-center" (click)="openschedule()" >
                  <i class="fa fa-calendar"></i>
                </button>
              </span>
            </div>
          </div>
          <div class="nodes" dropdown [insideClick]="true"  >

            <button class="clickable  text-primary dropdown-toggle"  id="bots" dropdownToggle type="button"
            aria-controls="bot-store" >
              <span  tooltip="Bot Store" placement="bottom" >
                <i class="fa fa-robot text-primary"></i>
              </span>

            </button>

            <ul id="bot-store" style="max-width:300px;max-height:250px;overflow:auto;"   *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="button-basic" >
                <li role="menuitem" class="clickable" style="white-space: nowrap;"  *ngFor="let bot of predefinedbotsData"  >
                  <a   class="clickable"  (click)="loadpredefinedbot(bot.botId)"> {{bot.botName}}</a>
                </li>
            </ul>

          </div>
          <div class="nodes" dropdown  #dropdown="bs-dropdown"   [insideClick]="true" >
            <button class="clickable  text-primary dropdown-toggle" id="Environments" dropdownToggle type="button"
            aria-controls="environments" >
              <span placement="bottom" tooltip="Environments" >
                <i class="fa fa-desktop"></i>
              </span>

            </button>
            <ul id="environments" style="max-width:300px;max-height:250px;overflow:auto;" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="button-basic">
              <li  role="menuitem" class="clickable"  *ngFor="let env of environment" style="white-space: nowrap;" >
                <input type="checkbox" [checked]="env.checked==true" (change)="checkuncheckenv(env.environmentId)" >
                &nbsp; {{env.environmentName}}
              </li>
              <li role="menuitem" class="clickable"  >
                <span class="clickable"  (click)="create_env();"><i class="fa  fa-plus"></i>&nbsp;&nbsp;New</span>
              </li>
            </ul>

          </div>
          <div class="nodes">
            <div class="clickable  text-primary" *ngIf="childBotWorkspace!=undefined" >
              <button  placement="bottom" id="savebot" [disabled]="envflag==false || childBotWorkspace.finaldataobjects.length==0" tooltip="Save Bot" (click)="saveBotFunAct()">
                <i class="fa fa-save"></i>
              </button>
            </div>
          </div>


          <div class="nodes" >
            <div class="clickable text-primary" >
              <button [disabled]="savebotrespose == undefined"  id="startbot"  placement="bottom" tooltip="Start Bot"  (click)="executionAct()">
                <i class="fas fa-play "></i>
              </button>
            </div>
          </div>


          <div class="nodes">
            <div class="clickable text-primary" >
              <button placement="bottom" [disabled]="(pausebot==false && resumebot==false)"  id="stopbot"   tooltip="Stop Bot"   (click)="stopBot()">
                <i class="fas fa-stop "></i>
              </button>
            </div>
          </div>


          <div class="nodes" *ngIf="resumebot==false">
            <div class="clickable text-primary">
              <button   placement="bottom"  [disabled]="savebotrespose == undefined || pausebot==false" tooltip="Pause Bot" (click)="pauseBot()">
                <i class="fas fa-pause"></i>
              </button>
            </div>
          </div>

          <div class="nodes" *ngIf="resumebot==true">
            <div class="clickable text-primary">
              <button   placement="bottom"  [disabled]="savebotrespose == undefined && resumebot==true" tooltip="Resume Bot" (click)="resumeBot()">
                <i class="fa fa-play-circle" aria-hidden="true"></i>
              </button>
            </div>
          </div>

          <div class="nodes">
            <div class="clickable text-primary"  id="Logs" >
              <button  placement="bottom" [disabled]="savebotrespose == undefined" tooltip="View Logs" (click)="viewlogdata()">
                <i class="fas fa-list"></i>
              </button>
            </div>
          </div>

          <div class="nodes">
            <div class="clickable text-primary"  id="delete"   >
              <button  placement="bottom" [disabled]="savebotrespose == undefined" tooltip="Delete Bot" (click)="delete()">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
          <div class="nodes">
            <div class="clickable text-primary"  id="reset"  >
              <button  placement="bottom" tooltip="Reset Bot" (click)="reset()" >
                <i class="fas fa-sync-alt "></i>
              </button>
            </div>
          </div>
          <div class="nodes">
            <div class="clickable text-primary"  id="reset"  >
              <button  placement="bottom" tooltip="Export Bot" (click)="exportbot(botState)" >
                <i class="fas fa-file-export "></i>
              </button>
            </div>
          </div>
       


        </div> -->


    <!-- <div >


      <select class="form-control versions"  id="versions"  [(ngModel)]="selectedversion" (change)="switchversion($event.target.value)">
        <option *ngIf="savebotrespose==undefined" [value]="undefined" >V 1</option>
        <option *ngFor="let version of versionsList" [value]="version.vId">V {{version.vId}}</option>
      </select>
      <br>
      <div style="height:200px" class="rpa-custom-slider">
        <ng5-slider id="zoominzoomout" [value]="slider" [(ngModel)]="slider" [options]="options" (mouseup)="sliderEvent()"></ng5-slider>

      </div>
      <br>
      <button style="width: 45px;" tooltip="Reset" placement="bottom" (click)="childBotWorkspace.reset('');slider=0;"><i class="fa fa-sync-alt text-primary"></i></button><br>
      <br><br>
      <br><br><br>
      <div class="download">
        <button type="button" placement="bottom" id="dropdownMenuButton" class="downloadBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <img style="filter: none; width: 30px;" src="../../../../assets/downloadimage.svg">
        </button>
        <div class="rpa-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
          <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadJpeg()"><i class="fas fa-file-image"> </i>&nbsp;<span>JPEG</span></a></div>
          <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPng()"><i class="fas fa-file-image"></i>&nbsp;<span>PNG</span></a></div>
          <div><a class="dropdown-item clickable" (click)="childBotWorkspace.downloadPdf()"><i class="fas fa-file-pdf"></i>&nbsp;<span>PDF</span></a></div>
        </div>
      </div>
    </div> -->

</div>













<div *ngIf="schpop">
  <div id='sch' class="rpa-modal schedulemod" style="display:block">
      <div class="rpa-modal-content">
          <div class="rpa-modal-header">
              <span class="rpa-modal-close" (click)="closesch()"><img src="../../../../assets/images/RPA/icon_latest/close.svg" alt=""></span>
              <h4>Scheduler</h4>
          </div>
          <div class="modal-body actions-mbody">
            <app-rpa-scheduler [data]="schedule"></app-rpa-scheduler>
          </div>
      </div>
  </div>
</div>


<ng-template #logspopup>
  <div class="modal-header modelprhead newmodelcla">
    <!-- <span *ngIf="viewlogid1!=undefined">      
   
      <button (click)="viewlogid1=undefined" class="backarrcl">
        <img src="../../../../assets/images/RPA/arrow.svg" style="height:17px">
      </button>&nbsp;&nbsp;
    </span>  -->
    <span *ngIf="viewlogid1!=undefined && selectedIterationTask==undefined" class="module-back-button" (click)="viewlogid1=undefined">
      <i class="fas fa-arrow-left" aria-hidden="true"></i>
    </span>


    <span *ngIf="selectedIterationTask!=undefined" class="module-back-button"  (click)="selectedIterationTask=undefined;selectedIterationId=0">
    <i class="fas fa-arrow-left" aria-hidden="true"></i>
  </span>
    Logs  
   
    <span *ngIf="viewlogid1!=undefined">
      - Run ID - {{viewlogid1}}
    </span>
    <span *ngIf="selectedIterationTask!=undefined">
        - Iteration ID -
        <select *ngIf="iterationsList.length!=0" class="logsVersionFilter clickable" style="width:50px" (change)="IterationId($event)"  [value]="selectedIterationId" >
           
            <option *ngFor="let iteration of iterationsList" [selected]="selectedIterationId==iteration" [value]="iteration">
                 {{iteration}}
            </option>
          </select>
          <span *ngIf="iterationsList.length==0">-</span>
      </span>
    <span (click)="viewlogdata(logspopup,'update')" *ngIf="viewlogid1==undefined && selectedIterationTask==undefined" class="clickable refecls"  >
      Refresh
    </span>

    <span (click)="ViewlogByrunid(viewlogid1, filteredLogVersion)" *ngIf="viewlogid1!=undefined && selectedIterationTask==undefined" class="clickable refecls">
      Refresh
      </span>

      <span (click)="getLoopIterations(selectedIterationTask, selectedIterationId)" *ngIf="selectedIterationTask!=undefined" class="clickable refecls">
          Refresh
      </span>

    <span class="pull-right">
   
    <span class=" clickable" (click)="logsmodalref.hide()">
      <img src="../../../../assets/images/Projects/circle-close.svg" alt="">
    </span>
   
  </span>
  </div>
  <div class="modal-body newmodelbodycl" *ngIf="viewlogid1==undefined && selectedIterationTask==undefined" [id]="viewlogid" >
      <!-- <div class="rpa-modal-header">
         <h4>Logs</h4>
      </div> -->
    <div class="logs-container" *ngIf="logsLoading==false" style="background: white;">
   
            <table mat-table class="logs-table"  (matSortChange)="sortasc($event)" [dataSource]="Viewloglist" #logsSort="matSort" matSort>


                <!-- Run Id Column -->
                <ng-container matColumnDef="run_id">
                    <th mat-header-cell  *matHeaderCellDef mat-sort-header style="padding-left:55px;width:13%"> Run ID </th>
                    <td mat-cell *matCellDef="let element" style="padding-left:55px;width:13%"><button style="color:#00a1e3; text-decoration: underline;" (click)="ViewlogByrunid(element.run_id,element.version)">{{element.run_id}}</button></td>
                </ng-container>

                <!-- Version Column -->
                <ng-container matColumnDef="version">
                    <th mat-header-cell *matHeaderCellDef> Version
                      <span >
                        <select class="logsVersionFilter clickable" (change)="changeLogVersion($event)" [value]="filteredLogVersion" >
                          <option [selected]="filteredLogVersion==version.vId" [value]="version.vId" *ngFor="let version of AllVersionsList">V {{version.vId}}</option>
                        </select>
                      </span>
                   </th>
                    <td mat-cell *matCellDef="let element">
                        <span *ngIf="element.version!=null">V{{element.version}}</span>
                        <span *ngIf="element.version == undefined">-</span>
                    </td>
                </ng-container>

                <!-- Start Date Column -->
                <ng-container matColumnDef="start_date">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef style="width:25%;"> Start Date </th>
                    <td mat-cell *matCellDef="let element" style="width:25%;">
                        <span *ngIf="element.start_date!=null">{{element.start_date.split('T')[0] | date:'EEE MMM d, yyyy' }},{{element.start_time.slice(11,19)}}</span>
                        <span *ngIf="element.start_date == undefined">--</span>
                    </td>
                </ng-container>

                <!-- End Date Column -->

                <ng-container matColumnDef="end_date">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef style="width:25%;"> End Date </th>
                    <td mat-cell *matCellDef="let element" style="width:25%;">
                        <span *ngIf="element.end_date!=null">{{element.end_date.split('T')[0] | date:'EEE MMM d, yyyy' }},{{element.end_time.slice(11,19)}}</span>
                        <span *ngIf="element.end_date == undefined">--</span>
                    </td>
                </ng-container>
                <ng-container matColumnDef="bot_status">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>Status</th>
                    <td class="" mat-cell *matCellDef="let element">
                            <span *ngIf="element.bot_status=='Running'" class="text-primary" >
                              <span>
                                <img src="../../../../assets/images/RPA/DotSpin.gif" class="testplus">
                              </span>
                              {{element.bot_status}}&nbsp;&nbsp;&nbsp;
                              <span class="btn btn-xs btn-primary clickable" (click)="updateLog(element.run_id,logspopup)" >Kill</span> 
                            </span>
                            <span *ngIf="element.bot_status=='Success'" >
                              <span>
                                <img src="../../../../assets/images/RPA/icon_latest/Success.svg" class="testplus">
                              </span>
                              <span>{{element.bot_status}}</span>
                            </span>

                            <span *ngIf="element.bot_status=='Failure'" >
                              <span>
                                <img src="../../../../assets/images/RPA/icon_latest/close-red.svg" class="testplus">
                              </span>
                              <span>{{element.bot_status}}</span>
                            </span>
                            <!--<img src="../../../../assets/images/RPA/newicon.png" style="filter: none; width: 20px;">-->
                            <span *ngIf="element.bot_status=='New'" class="text-primary tableActionsIcons">
                              <span >
                               <img src="../../../../assets/images/RPA/userobot.png" class="testplus">
                              </span>
                              <span>{{element.bot_status}}</span>
                            </span>

                            <span *ngIf="element.bot_status=='Stop' ||element.bot_status=='Stopped'  "  >
                              <span  >
                                <img src="../../../../assets/images/RPA/icon_latest/stop.svg" class="testplus">
                              </span>
                              <span>{{element.bot_status}}</span>
                            </span>

                            <span *ngIf="element.bot_status=='Pause'||element.bot_status=='Paused'" >
                              <span >
                                <img src="../../../../assets/images/SO/pause-circle.svg" class="testplus">
                                <!-- <i class="fas fa-pause-circle text-primary"></i> -->
                              </span>
                              <span>{{element.bot_status}}</span>
                            </span>

                        <span *ngIf="element.bot_status == undefined || element.bot_status == null">-</span></td>
                </ng-container>

               

                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <div *ngIf="filteredLogs.length==0" class="text-center">
              <img src="../../../../assets/images/RPA/No-Items.svg" style="height:250px">
              <h5>No Items To Display</h5>

            </div>
 
    </div>
    <div class="logs-container" *ngIf="logsLoading==true">
      <div class="logs-loader">
        <img src="../../../../assets/images/EZFlow_Loader.gif">
      </div>
    </div>
    <!-- <mat-paginator #logsPaginator [pageSize]="5" [showFirstLastButtons]="true"></mat-paginator>-->
  </div>
 
  <div [id]="viewlogid1" *ngIf="viewlogid1!=undefined && selectedIterationTask==undefined" class="modal-body modelprbody">
   
    <div class="logs-container" *ngIf="logsLoading==false">
   
        <table mat-table class="logs-table"  (matSortChange)="sortasc($event)" [dataSource]="logbyrunid" #sort2="matSort" matSort style="width:100%;">

            <!-- Task Name Column -->
            <ng-container matColumnDef="task_name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding-left:55px;width:18%"> Task Name </th>
                <td mat-cell *matCellDef="let element" style="padding-left:55px;width:18%">
                    <span *ngIf="element.task_name != null && element.task_name!='Loop-Start'" class="btntaskname">
                        {{(element.task_name.length > 25) ? ((element.task_name).slice(0, 25) + '...') : element.task_name}}
                     </span>
                      <span *ngIf="element.task_name=='Loop-Start'">
                      <button style="color:#00a1e3; text-decoration: underline;" (click)="getLoopIterations(element)">{{element.task_name}}</button>
                      </span>
                    <span *ngIf="element.task_name == undefined">-</span>
                </td>

            </ng-container>

            <!-- Status Column -->
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef style="width:13%">Status</th>
                <td class="" mat-cell *matCellDef="let element" style="width:13%">
                    <span *ngIf="element.status=='Running'" class="text-primary" >
                      <span>
                        <img src="../../../../assets/images/RPA/DotSpin.gif" class="testplus">
                      </span>{{element.status}}
                    </span>

                    <span *ngIf="element.status=='Success'" >
                      <span>
                        <img src="../../../../assets/images/RPA/icon_latest/Success.svg" class="testplus">
                      </span>
                      <span>{{element.status}}</span>
                    </span>

                    <span *ngIf="element.status=='Failure'" >
                      <span>
                        <img src="../../../../assets/images/RPA/icon_latest/close-red.svg" class="testplus">
                      </span>
                      <span>{{element.status}}</span>
                    </span>
                    <!--<img src="../../../../assets/images/RPA/newicon.png" style="filter: none; width: 20px;">-->
                    <span *ngIf="element.status=='New'" class="text-primary tableActionsIcons">
                      <span >
                      <img src="../../../../assets/images/RPA/userobot.png" class="testplus">
                      </span>
                      <span>{{element.status}}</span>
                    </span>

                    <span *ngIf="element.status=='Stop' || element.status=='Stopped'  " >
                      <span>
                        <!--<img src="../../../../assets/images/RPA/userobot.png" style="filter: none; width: 19px;">-->
                        <img src="../../../../../assets/images/RPA/icon_latest/stop.svg" class="testplus">
                      </span>
                      <span>{{element.status}}</span>
                    </span>

                    <span *ngIf="element.status=='Pause'||element.status=='Paused'" >
                      <span class="text-primary">
                        <img src="../../../../assets/images/SO/pause-circle.svg" class="testplus">
                        <!-- <i class="fas fa-pause-circle text-primary"></i> -->
                      </span>
                      <span>{{element.status}}</span>
                    </span>

                    <span *ngIf="element.status == undefined || element.status == null">-</span></td>
            </ng-container>

            <!-- Start date Column -->
            <ng-container   matColumnDef="start_date">
                <th mat-header-cell  mat-sort-header *matHeaderCellDef style="width:18%"> Start Date </th>
                <td mat-cell *matCellDef="let element" style="width:18%">
                    <span *ngIf="element.start_date != null">{{element.start_date.split('T')[0] | date:'EEE MMM d, yyyy' }},{{element.start_time.slice(11,19)}}</span>
                    <span *ngIf="element.start_date == undefined">--</span>
                </td>
            </ng-container>

            <!-- End Time Column -->


            <!-- End Date Column -->
            <ng-container matColumnDef="end_date">
                <th mat-header-cell  mat-sort-header  *matHeaderCellDef style="width:18%"> End Date </th>
                <td mat-cell *matCellDef="let element" style="width:18%">
                    <span *ngIf="element.end_date != null||element.end_date != undefined">{{element.end_date.split('T')[0] | date:'EEE MMM d, yyyy' }},{{element.end_time.slice(11,19)}}</span>
                    <span *ngIf="element.end_date == undefined">--</span>
                </td>
            </ng-container>

            <!-- Error Info Column -->
            <ng-container matColumnDef="error_info">
                <th mat-header-cell  mat-sort-header *matHeaderCellDef> Info </th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.error_info!=null && element.error_info != 'NA'" [tooltip]="element.error_info" class="btnerrorinfo">
                        {{(element.error_info.length > 50) ? ((element.error_info).slice(0, 50) + '...') : element.error_info}}</span>
                    <span *ngIf="element.error_info == undefined ||element.error_info == 'NA' ">-</span>
                    <!--<div class="errorinfoelement">{{element.error_info}}</div>-->
                </td>
            </ng-container>

            <ng-container matColumnDef="noData">
                <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="7">
                    No Records Found
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns1; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
            <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide': !respdata2}"></tr>
        </table>
       
    </div>
    <div class="logs-container " *ngIf="logsLoading==true">
      <div class="logs-loader">
        <img src="../../../../assets/images/EZFlow_Loader.gif">
      </div>
    </div>
    <!-- <mat-paginator #paginator2 [pageSize]="5" [showFirstLastButtons]="true"></mat-paginator> -->
  </div>


  <div *ngIf="selectedIterationTask!=undefined" class="modal-body modelprbody">
    <div *ngIf="logsLoading==false" class="logs-container"  >
      <table mat-table class="logs-table"   (matSortChange)="sortLoopsIteration($event)"  [dataSource]="loopbyrunid" #loopsort="matSort" matSort style="width:100%;">
        <ng-container matColumnDef="taskName">
          <th mat-header-cell  mat-sort-header  *matHeaderCellDef style="width:18%">Task Name </th>
          <td mat-cell *matCellDef="let element" style="width:18%">
              <span *ngIf="element.taskName != null||element.taskName != undefined">{{element.taskName}}</span>
              <span *ngIf="element.taskName == undefined">--</span>
          </td>
        </ng-container>
        <ng-container matColumnDef="startTS">
          <th mat-header-cell  mat-sort-header  *matHeaderCellDef style="width:18%">Start Time </th>
          <td mat-cell *matCellDef="let element" style="width:18%">
              <span *ngIf="element.startTS != null||element.startTS != undefined">{{element.startTS.split('T')[0] | date:'EEE MMM d, yyyy' }},{{element.startTS.slice(11,19)}}</span>
              <span *ngIf="element.startTS == undefined">--</span>
          </td>
        </ng-container>
        <ng-container matColumnDef="endTS">
          <th mat-header-cell  mat-sort-header  *matHeaderCellDef style="width:18%">End Time </th>
          <td mat-cell *matCellDef="let element" style="width:18%">
              <span *ngIf="element.endTS != null||element.endTS != undefined">{{element.endTS.split('T')[0] | date:'EEE MMM d, yyyy' }},{{element.endTS.slice(11,19)}}</span>
              <span *ngIf="element.endTS == undefined">--</span>
          </td>
        </ng-container>
          <ng-container matColumnDef="status">
            <th mat-header-cell  mat-sort-header  *matHeaderCellDef style="width:18%">Status</th>
            <td mat-cell *matCellDef="let element" style="width:18%">
                <span *ngIf="element.status == 1">
                  <span>
                    <img src="../../../../assets/images/RPA/userobot.png" class="testplus">
                  </span>  
                  New
                </span>
                <span *ngIf="element.status == 2">
                  <span>
                    <img src="../../../../assets/images/RPA/DotSpin.gif" class="testplus">
                  </span>
                  Running
                </span>
                <span *ngIf="element.status == 3">
                  <span>
                    <img src="../../../../assets/images/SO/pause-circle.svg" class="testplus">
                  </span>
                  Paused
                </span>
                <span *ngIf="element.status == 4">
                  <span  >
                    <img src="../../../../assets/images/RPA/icon_latest/stop.svg" class="testplus">
                  </span>
                  Stopped
                </span>
                <span *ngIf="element.status == 5">
                  <span>
                    <img src="../../../../assets/images/RPA/icon_latest/Success.svg" class="testplus">
                  </span>
                  Success
                </span>
                <span *ngIf="element.status == 6">  
                  <span>
                    <img src="../../../../assets/images/RPA/icon_latest/close-red.svg" class="testplus">
                  </span>
                  Failed
                </span>
               
                <span *ngIf="element.status == undefined">--</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="errorMsg">
          <th mat-header-cell  mat-sort-header  *matHeaderCellDef style="width:18%">Info</th>
          <td mat-cell *matCellDef="let element" style="width:18%">
              <span  [tooltip]="element.errorMsg" *ngIf="element.errorMsg != null||element.errorMsg != undefined || element.errorMsg!=''">  {{(element.errorMsg.length > 50) ? ((element.errorMsg).slice(0, 50) + '...') : element.errorMsg}}</span>
              <span *ngIf="element.errorMsg == undefined || element.errorMsg == ''">--</span>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedloopColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedloopColumns;"></tr>
    </table>
      <div *ngIf="fileteredLoopIterations.length==0" class="text-center">
        <img src="../../../../assets/images/RPA/No-Items.svg" style="height:250px">
        <h5>No Items To Display</h5>
      </div>
    </div>
    <div class="logs-container " *ngIf="logsLoading==true">
      <div class="logs-loader">
        <img src="../../../../assets/images/EZFlow_Loader.gif">
      </div>
    </div>
   
  </div>
</ng-template>

<div [id]="'rpa_createenvironment'+'_'+botState.botName"  class="rpa-modal">
  <div class="rpa-modal-content">
    <div class="rpa-modal-header">
        <span class="rpa-modal-close" (click)=" close_c_env()"><img src="../../../../assets/images/RPA/icon_latest/close.svg" alt=""></span>
        <h4>Create Environment</h4>
    </div>
    <div class="modal-body createenv-mbody">

      <form [formGroup]="insertForm" (ngSubmit)="savedata()">
        <div class="container m-contanier form-body">
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="environmentName">Name<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control data" formControlName="environmentName" #environmentName value="" placeholder="Enter Name">
            <span *ngIf="(insertForm.get('environmentName').invalid && insertForm.get('environmentName').touched) && !insertForm.controls['environmentName'].hasError('maxlength')" class="errspan required">Name Required*</span>
            <div *ngIf="insertForm.controls['environmentName'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="environmentType">Type<span class="star">*</span></label>
            <!--<input type="text" class="form-control" formControlName="environmentType" value=""
                        placeholder="Enter Environment Type" >-->
            <select class="form-control" formControlName="environmentType" (change)="EnvType1()">
                <option value="" [selected]="true">--Select Type--</option>
                <option value="Windows">Windows</option>
                <option value="Mac">Mac</option>
                <option value="Linux">Linux</option>

            </select>
            <span *ngIf="insertForm.get('environmentType').invalid && insertForm.get('environmentType').touched" 
                class="errspan required">Type Required*</span>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="agentPath">Agent Path<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="agentPath" value="" placeholder="Enter Agent Path">
            <span *ngIf="(insertForm.get('agentPath').invalid && insertForm.get('agentPath').touched) && !insertForm.controls['agentPath'].hasError('maxlength')" class="errspan required"> Agent Path Required*</span>

            <div *ngIf="insertForm.controls['agentPath'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>            
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="categoryId">Category<span class="star">*</span></label>
            <select type="text" class="form-control" formControlName="categoryId"  [value]="categoryList.length==1?categoryList[0].categoryId:'0'">
                <option value="0" disabled>Select Category</option>
                <option [value]="category.categoryId" *ngFor="let category of categoryList">{{category.categoryName}}</option>
            </select>   
             <span *ngIf="(insertForm.get('categoryId').invalid && insertForm.get('categoryId').touched)"  class="errspan required"> Category Required*</span>
        </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="hostAddress"> IP Address/Host<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="hostAddress" value="" placeholder="Enter IP Address/Host">
            <span *ngIf="(insertForm.get('hostAddress').invalid && insertForm.get('hostAddress').touched) && !insertForm.controls['hostAddress'].hasError('maxlength') && !insertForm.controls['hostAddress'].hasError('pattern')" class="errspan required"> IP Address/Host Required*</span>

            <!--<div *ngIf="insertForm.controls['hostAddress'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>-->
            <div *ngIf="(insertForm.controls['hostAddress'].hasError('pattern') && !insertForm.controls['hostAddress'].hasError('maxlength')) && insertForm.get('hostAddress').touched" class="errspan required">
                Invalid IP Address format
            </div>
            <div *ngIf="(insertForm.controls['hostAddress'].hasError('pattern') && insertForm.controls['hostAddress'].hasError('maxlength'))" class="errspan required">
                Invalid IP Address format
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="userName">Username<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="username" value="" placeholder="Enter Username">
            <span *ngIf="(insertForm.get('username').invalid && insertForm.get('username').touched) && !insertForm.controls['username'].hasError('maxlength')" class="errspan required"> Username Required*</span>

            <div *ngIf="insertForm.controls['username'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>            
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="password">Password<span class="star">*</span></label>
            <input [type]="passwordtype1 ? 'text': 'password'" maxlength="51" class="form-control" formControlName="password" value="" placeholder="Enter Password" passwordToggle>
            <span *ngIf="passwordtype1==false" (click)="passwordtype1 =!passwordtype1"  class="pdicon">
              <img src="../../../../../assets/images/Projects/eye-show.svg"  class="testplus1">
            </span>
            <span *ngIf="passwordtype1==true" (click)="passwordtype1 =!passwordtype1"  class="pdicon">
              <img src="../../../../../assets/images/Projects/eye-hide.svg"  class="testplus1">
            </span>

            <span *ngIf="(insertForm.get('password').invalid && insertForm.get('password').touched) && !insertForm.controls['password'].hasError('maxlength')" class="errspan required"> Password Required*</span>

            <div *ngIf="insertForm.controls['password'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="connectionType">Connection Type<span class="star">*</span></label>
            <input type="text" maxlength="51" class="form-control" formControlName="connectionType" value="" placeholder="Enter Connection Type" readonly>
            <span *ngIf="(insertForm.get('connectionType').invalid && insertForm.get('connectionType').touched) && !insertForm.controls['connectionType'].hasError('maxlength')" class="errspan required"> Connection Type Required*</span>
            <div *ngIf="insertForm.controls['connectionType'].hasError('maxlength')" class="errspan required">
                Maximum of 50 characters
            </div>
          </div>
          <div class="col-md-12 p-0 form-group">
            <label class="label-control" for="portNumber">Port<span class="star">*</span></label>
            <input type="text" maxlength="7" class="form-control" onkeypress="return (event.charCode > 47 && event.charCode < 58)" formControlName="portNumber" value="" placeholder="Enter Port">

            <span *ngIf="(insertForm.get('portNumber').invalid && insertForm.get('portNumber').touched) && !insertForm.controls['portNumber'].hasError('maxlength')" class="errspan required"> Port Required*</span>

            <div *ngIf="insertForm.controls['portNumber'].hasError('maxlength')" class="errspan required">
                Maximum of 6 characters
            </div>
          </div>
          <div class="col-md-6 p-0 form-group">
            <input type="checkbox" formControlName="activeStatus"> Active
          </div>
        </div>
        <div class="form-footer">
          <button type="button" class="btn btn-default"  (click)="resetEnvForm()">Reset</button>
          <button type="button" class="btn btn-primary"  (click)="testConnection('insert')" [disabled]="insertForm.invalid">Test Connection</button>   
          <button type="button" class="btn btn-primary"  (click)="saveEnvironment()" [disabled]="insertForm.invalid || submitted">Save</button>
        </div>
        <!-- <div class="form-footer">
          <input type="button" class="btn btn-primary" value="Save" (click)="saveEnvironment()" [disabled]="insertForm.invalid || submitted">
          <input type="button" class="btn btn-primary" value="Test Connection" (click)="testConnection('insert')" [disabled]="insertForm.invalid">
          <input type="button" class="btn btn-primary" value="Reset" (click)="resetEnvForm()">
        </div> -->

      </form>

    </div>

  </div>
</div>


<ng-template #auditLogsPopup>
  <div class="modal-header modelprhead newmodelcla">
    Audit Logs  
    <span class="pull-right">
      <span class=" clickable" (click)="auditLogsModelRef.hide()">
        <img src="../../../../assets/images/Projects/circle-close.svg" alt="">
      </span>
    </span>
  </div>
  <div class="modal-body newmodelbodycl" >
    <div class="logs-container" style="background: white;">
          <div *ngIf="auditLogsData.length!=0">
            <div class="log-row"   *ngFor="let log of auditLogsData">
              <span *ngIf="log.Status=='UpdatedConfig'">
                <b>{{log.changedBy}}</b> updated <b>{{log.taskName}}</b> task input field <b>{{log.changeActivity}}</b> from <b>{{log.previousValue}}</b> to <b>{{log.newValue}}</b> on {{log.changedDate}}
              </span>
              <span *ngIf="log.Status=='AddedTask'">
                <b>{{log.changedBy}}</b> added task <b>{{log.taskName}}</b> on {{log.changedDate}}
              </span>
              <span *ngIf="log.Status=='RemovedTask'">
                <b>{{log.changedBy}}</b> removed task <b>{{log.taskName}}</b> on {{log.changedDate}}
              </span>
              <span *ngIf="log.Status=='AddedEnv'">
                <b>{{log.changedBy}}</b> added environment <b>{{log.taskName}}</b> on {{log.changedDate}}
              </span>
              <span *ngIf="log.Status=='RemovedEnv'">
                <b>{{log.changedBy}}</b> removed environment <b>{{log.taskName}}</b> on {{log.changedDate}}
              </span>

              
              <span *ngIf="log.Status=='BotCreated'">
                <b>{{log.changedBy}}</b> created bot <b>{{log.taskName}}</b> on {{log.changedDate}}
              </span>
              
            </div>
          </div>
          <div class="text-center" *ngIf="auditLogsData.length==0">
            <img style="height:300px" src="../../../../assets/images/RPA/No-Items.svg">
            <br>
            <h6>No Items To Display</h6>
          </div>
    </div>

  </div>



</ng-template>