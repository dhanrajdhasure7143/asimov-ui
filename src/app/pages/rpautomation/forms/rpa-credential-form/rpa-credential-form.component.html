<div id="createcredentials" class="h-100">
    <div class="create-header">
        <h3 *ngIf="!isCreateForm">Update Credentials</h3>
        <h3 *ngIf="isCreateForm">Create Credentials</h3>
    </div>
    <div class="createform-overlay">
        <form [formGroup]="credentialForm" class="h-100">
            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="userName">Email<span class="star">*</span></label>
                <input type="text" maxlength="51" class="form-control data" formControlName="userName" #userName
                    value="" pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}"
                    placeholder="Enter Email">
                <span
                    *ngIf="(credentialForm.get('userName').invalid && credentialForm.get('userName').touched) && !credentialForm.controls['userName'].hasError('pattern')"
                    class="required">Email Required*</span>
                <span
                    *ngIf="(credentialForm.controls['userName'].hasError('pattern') || credentialForm.get('userName').hasError('required')) && !credentialForm.get('userName').hasError('required')"
                    class="required">Enter valid email address</span>
                <div *ngIf="credentialForm.controls['userName'].hasError('maxlength')" class="required">
                    Maximum of 50 characters
                </div>
            </div>

            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="serverName">Mail Server<span class="star">*</span></label>
                <select class="form-control" (change)="onChangeServer($event.target.value)" value="" formControlName="serverName">
                    <option value="" [selected]="true" hidden disabled>Select Mail Server</option>
                    <option value="Office365">Office365</option>
                    <option value="G-mail">G-mail</option>
                </select>
                <span
                    *ngIf="credentialForm.get('serverName').invalid && credentialForm.get('serverName').touched"
                    class="required"> Server Type Required*</span>
            </div>


            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="password">Password<span class="star" *ngIf="selectedMailServer != 'Office365'">*</span></label>
                <input [type]="passwordtype1 ? 'text': 'password'" maxlength="51" class="form-control"
                    formControlName="password" value="" placeholder="Enter Password" passwordToggle>
                <span *ngIf="passwordtype1==false" (click)="passwordtype1 =!passwordtype1" class="pdicon">
                    <img src="../../../../../assets/images/Projects/eye-show.svg" class="testplus1">
                </span>
                <span *ngIf="passwordtype1==true" (click)="passwordtype1 =!passwordtype1" class="pdicon">
                    <img src="../../../../../assets/images/Projects/eye-hide.svg" class="testplus1">
                </span>
                <span  *ngIf="selectedMailServer != 'Office365'">
                    <span *ngIf="(credentialForm.get('password').invalid && credentialForm.get('password').touched) && !credentialForm.controls['password'].hasError('maxlength')"
                        class="required"> Password Required*</span>
                    <div *ngIf="credentialForm.controls['password'].hasError('maxlength')" class="required">
                        Maximum of 50 characters
                    </div>
                </span>
            </div>
            

            <div [hidden]="!(selectedMailServer=='Office365')"  class="col-md-12 p-0 form-group">
                <label class="label-control" for="clientId">Client Id</label>
                <span *ngIf="!isCreateForm">
                    
                    <span *ngIf="credupdatedata.clientId !='' && credupdatedata.clientId !=null ">
                    <input class="form-control" [hidden]="!maskedFields.clientId" [value]="credupdatedata.tableClientId" [disabled]="true">
                    <span [hidden]="!maskedFields.clientId" (click)="maskedFields.clientId=false" class="suffixIconButton"><i class="pi pi-times"></i></span>
                    <input type="text"  [hidden]="maskedFields.clientId" maxlength="51" class="form-control"
                        formControlName="clientId" value="" placeholder="Enter Client Id" >
                    </span>
                    <span *ngIf="credupdatedata.clientId =='' || credupdatedata.clientId == null ">
                        <input type="text"   maxlength="51" class="form-control"
                        formControlName="clientId" value="" placeholder="Enter Client Id" >
                    </span>
                </span>
                <span *ngIf="isCreateForm">
                    <input type="text" maxlength="51" class="form-control"
                    formControlName="clientId" value="" placeholder="Enter Client Id" >
                </span>
            </div>




            <div [hidden]="!(selectedMailServer=='Office365')" class="col-md-12 p-0 form-group">
                <label class="label-control" for="clientSecret">Client Secret</label>
                <span *ngIf="!isCreateForm">
                    <span *ngIf="credupdatedata.clientSecret !='' && credupdatedata.clientSecret !=null ">
                  
                        <input class="form-control" [hidden]="!maskedFields.clientSecret" [value]="credupdatedata.tableClientSecret" [disabled]="true">
                        <span [hidden]="!maskedFields.clientSecret" (click)="maskedFields.clientSecret=false" class="suffixIconButton"><i class="pi pi-times"></i></span>
                    
                        <input type="text"  [hidden]="maskedFields.clientSecret"  maxlength="51" class="form-control"
                            formControlName="clientSecret" value="" placeholder="Enter Client Secret">
                
                    </span>
                    <span *ngIf="credupdatedata.clientSecret =='' || credupdatedata.clientSecret ==null ">
                        <input type="text" maxlength="51" class="form-control"
                        formControlName="clientSecret" value="" placeholder="Enter Client Secret">
                    </span>
                </span>

                <span  *ngIf="isCreateForm">
                    <input type="text"  maxlength="51" class="form-control"
                    formControlName="clientSecret" value="" placeholder="Enter Client Secret">
                </span>
            </div>
            <div [hidden]="!(selectedMailServer=='Office365')" class="col-md-12 p-0 form-group">
                <label class="label-control" for="officeTenant">Tenant Id</label>
                <span *ngIf="!isCreateForm">
                    <span *ngIf="credupdatedata.officeTenant !='' && credupdatedata.officeTenant !=null">
                        <input class="form-control" [hidden]="!maskedFields.officeTenant" [value]="credupdatedata.tableOfficeTenant" [disabled]="true">
                        <span [hidden]="!maskedFields.officeTenant" (click)="maskedFields.officeTenant=false" class="suffixIconButton"><i class="pi pi-times"></i></span>
                        <input type="text" [hidden]="maskedFields.officeTenant" maxlength="51" class="form-control"
                            formControlName="officeTenant" value="" placeholder="Enter Tenant Id" passwordToggle>
                    </span>
                    <span  *ngIf="credupdatedata.officeTenant =='' || credupdatedata.officeTenant ==null ">
                        <input type="text" maxlength="51" class="form-control"
                        formControlName="officeTenant" value="" placeholder="Enter Tenant Id" passwordToggle>
                    </span>
                </span>
                <span *ngIf="isCreateForm">
                    <input type="text"  maxlength="51" class="form-control"
                    formControlName="officeTenant" value="" placeholder="Enter Tenant Id" passwordToggle>
                </span>
            </div>
            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="categoryId">Category<span class="star">*</span></label>
                <select type="text" name="Category" class="form-control" formControlName="categoryId">
                    <option value="" disabled hidden>Select Category</option>
                    <option [value]="category.categoryId" *ngFor="let category of categoryList">
                        {{category.categoryName}}</option>
                </select>
                <span
                    *ngIf="(credentialForm.get('categoryId').invalid && credentialForm.get('categoryId').touched)"
                    class="required">Category Required*</span>
            </div>


            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="inBoundAddress">In Bound Address<span
                        class="star">*</span></label>
                <input type="text" maxlength="51" class="form-control data" formControlName="inBoundAddress"
                    #inBoundAddress value="" placeholder="Enter In Bound Address">
                <span
                    *ngIf="(credentialForm.get('inBoundAddress').invalid && credentialForm.get('inBoundAddress').touched) && !credentialForm.controls['inBoundAddress'].hasError('maxlength') && credentialForm.get('inBoundAddress').value==''"
                    class="required">In Bound Address is required*</span>
                <div *ngIf="credentialForm.controls['inBoundAddress'].hasError('maxlength')"
                    class="required">
                    Maximum of 50 characters
                </div>
                <div *ngIf="credentialForm.controls['inBoundAddress'].hasError('pattern') && !credentialForm.get('inBoundAddress').hasError('pattern')"  class="required">
                    Invalid In Bound Address format*
                </div>
                <span *ngIf="credentialForm.get('inBoundAddress').hasError('pattern')" class="required">Spaces and special characters are not allowed Excluding( _ & - )
                </span>
            </div>
            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="inBoundAddressPort">In Bound Address Port<span
                        class="star">*</span></label>
                <input type="text" (keydown)="inputNumberOnly($event)" maxlength="6" class="form-control data"
                    formControlName="inBoundAddressPort" #inBoundAddressPort value=""
                    placeholder="Enter In Bound Address Port">
                <span
                    *ngIf="(credentialForm.get('inBoundAddressPort').invalid && credentialForm.get('inBoundAddressPort').touched) && !credentialForm.controls['inBoundAddressPort'].hasError('maxlength')"
                    class="required">In Bound Address Port is required*</span>
                <div *ngIf="credentialForm.controls['inBoundAddressPort'].hasError('maxlength')"
                    class="required">
                    Maximum of 50 characters
                </div>
            </div>

            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="outBoundAddress">Out Bound Address<span
                        class="star">*</span></label>
                <input type="text" maxlength="51" class="form-control data" formControlName="outBoundAddress"
                    #outBoundAddress value="" placeholder="Enter Out Bound Address">
                <span *ngIf="(credentialForm.get('outBoundAddress').invalid && credentialForm.get('outBoundAddress').touched) && !credentialForm.controls['outBoundAddress'].hasError('maxlength') && !credentialForm.controls['outBoundAddress'].hasError('pattern')"
                            class="required">Out Bound Address is required*</span>
                <div *ngIf="credentialForm.controls['outBoundAddress'].hasError('maxlength')"
                            class="required">
                            Maximum of 50 characters
                </div>
                <div *ngIf="(credentialForm.controls['outBoundAddress'].hasError('pattern') && !credentialForm.controls['outBoundAddress'].hasError('maxlength'))  && credentialForm.get('outBoundAddress').touched"
                        class="required">
                        Invalid out Bound Address format*
                </div>
                <div *ngIf="(credentialForm.controls['outBoundAddress'].hasError('pattern') && credentialForm.controls['outBoundAddress'].hasError('maxlength')) && !credentialForm.get('outBoundAddress').hasError('pattern')"
                        class="required">
                        Invalid Out Bound Address format*
                </div>
                <span *ngIf="credentialForm.get('outBoundAddress').hasError('pattern')" class="required">Spaces and special characters are not allowed Excluding( _ & - )
                </span>
            </div>

            <div class="col-md-12 p-0 form-group">
                <label class="label-control" for="outboundAddressPort">Out Bound Address Port<span
                        class="star">*</span></label>
                <input type="text" (keydown)="inputNumberOnly($event)" maxlength="6" class="form-control data"
                    formControlName="outboundAddressPort" #outboundAddressPort value=""
                    placeholder="Enter Out Bound Address Port">
                <span
                    *ngIf="(credentialForm.get('outboundAddressPort').invalid && credentialForm.get('outboundAddressPort').touched) && !credentialForm.controls['outboundAddressPort'].hasError('maxlength')"
                    class="required">Out Bound Address Port is required*</span>
                <div *ngIf="credentialForm.controls['outboundAddressPort'].hasError('maxlength')"
                    class="required">
                    Maximum of 50 characters
                </div>
            </div>
                    
        </form>
        <div class="createform-footer">
            <button class="btn new-cancelbtn" (click)="resetCredForm()">Reset</button>
            <button *ngIf="isCreateForm" class="btn bluebg-button" [disabled]="credentialForm.invalid" (click)="saveCredentials()">Save
            </button>
            <button *ngIf="!isCreateForm" class="btn bluebg-button" [disabled]="credentialForm.invalid" (click)="saveCredentials()">Update
            </button>
        </div>
    </div>
</div>