<div class="maincont">
    <div class="maincont-contentarea">
        <div class="row main-content-head">
            <h3>
                <span class="title_text">Robotic Process Automation</span>
            </h3>
        </div>
        <div class="main-content-body">
            <div class="main-subheader">
                <div class="main-subheaderTitle">
                    <label class="main-subtitle">Letâ€™s Automate !</label>
                    <label class="subtitle-tag">Create and configure bots that suit your needs</label>
                    <div class="main-subheaderBtns">
                        <div class="rpa-home-block" id="createbot-Home">
                            <button  class="btn bluebg-button rpa-home-btn-title" id="create_newbot" (click)="openModal()" aria-hidden="true" placement="bottom">Import</button>
                        </div>
                        <!-- <div class="rpa-home-block" id="createbot-Home" *ngIf="!this.userRole.includes('Process Owner')">
                            <button [disabled]="true" class="btn bluebg-button rpa-home-btn-title" placement="bottom">Import</button>
                        </div> -->

                        <div class="rpa-home-block" id="createbot-Home" *ngIf="!this.userRole.includes('Process Owner') && !this.userRole.includes('RPA Developer')">
                            <button [disabled]="true" class="btn bluebg-button rpa-home-btn-title" id="create_newbot" (click)="openCreateBotOverlay()" aria-hidden="true" placement="bottom">Create</button>
                        </div>
                        <div class="rpa-home-block" id="createbot-Home" *ngIf="this.userRole.includes('Process Owner') || this.userRole.includes('RPA Developer')">
                            <button  class="btn bluebg-button rpa-home-btn-title" id="create_newbot" (click)="openCreateBotOverlay()" aria-hidden="true" placement="bottom">Create</button>
                        </div>
                        <div class="rpa-home-block" id="Configuration_Home">
                            <button class="btn reset-btn rpa-home-btn-title" id="create_Configuration"(click)="cofigurationList()" placement="bottom">Configurations</button>
                        </div>
                        <div class="rpa-home-block" id="Configuration_Home">
                            <button class="btn reset-btn rpa-home-btn-title" id="approvals"(click)="approvalsList()" placement="bottom">Approvals</button>
                        </div>
                    </div>
                </div>
                <img src="assets/images/RPA/icon_latest/bot_new.svg" alt=""/>
                <div class="rpa-home" style="display:none">
                    <div class="rpa-home-block" id="createbot-Home" style="border-radius: 3px;" *ngIf="this.isButtonVisible || enablecreatebot">
                        <img src="assets/images/RPA/create.svg" style="height:10vh;" alt="">
                        <button class="btn bluebg-button rpa-home-btn-title eiap-btn" id="create_newbot" style="margin-left:17px;" (click)="createoverlay()" aria-hidden="true" placement="bottom">Create</button>
                    </div>
                    <div class="rpa-home-block py-5" id="Configuration_Home" style="border-radius: 3px;" *ngIf="this.isButtonVisible || enableConfiguration">
                        <img src="assets/images/RPA/Environments.svg" style="height:10vh;" alt="">
                        <button class="btn reset-btn rpa-home-btn-title eiap-btn" id="create_Configuration" style="margin-left:17px;" [routerLink]="[ '/pages/rpautomation/configurations']" placement="bottom">Configurations</button>
                    </div>
                </div>

            </div>
            <div class="col-md-12 p-0">
                <div>
                    <div class="col-md-6 pl-0">
                        <h4 class="col-heads">My Workspace</h4>
                    </div>
                    <!-- <div class="row">
                                                
                        <div class="row col-md-6 p-0">
                            <div class="col-md-6 form-group pr-0 rpa-searchip">
                                <select class="form-control" (change)="searchByCategory(categoryName)" [disabled]="categaoriesList.length == 1"
                                #category="ngModel" [(ngModel)]="categoryName">
                                <option value="" disabled hidden>Select Category</option>
                                <option value="null" disabled hidden>Select Category</option>
                                <option value="undefined" disabled hidden>Select Category</option>
                                <option value="allcategories" *ngIf="categaoriesList.length > 1">All Categories</option>
                                    <option [value]="category.categoryName" *ngFor="let category of categaoriesList;let i=index;trackBy:loopTrackBy">{{category.categoryName | titlecase}}</option>
                                </select>
                            </div>
                            <div class="col-md-6 form-group pr-0 rpa-searchip">
                                <input class="form-control toolbar-search" type="text"  (keyup)="applySearchFilter($event.target.value)" placeholder="Search Workspace">
                                <img src="assets/images/search.svg" alt="" class="testplus1">
                            </div>
                        </div>

                    </div> -->

                    <div class="rpa-workspacegrid">
                        <p-table #dt1 [columns]="selectedColumns" [value]="bot_list" dataKey="botId" [globalFilterFields]="search_fields" responsiveLayout="scroll" [resizableColumns]="true" [scrollable]="true"
                        [reorderableColumns]="true">
                            <ng-template pTemplate="caption">
                                <div class="table-header">
                                    <div class="d-flex">
                                        <!-- <p-multiSelect [options]="columns_list" [(ngModel)]="selectedColumns" optionLabel="header"
                                            selectedItemsLabel="{0} columns selected" [style]="{minWidth: '200px'}"
                                                placeholder="Choose Columns">
                                        </p-multiSelect> -->
                                    
                                        <span class="p-input-icon-right gridsearch">
                                            <i class="pi pi-search"></i>
                                            <input type="text" pInputText placeholder="Search"  [(ngModel)]="searchValue" class="p-inputtext-lg" 
                                                (input)="dt1.filterGlobal($event.target.value, 'contains')">
                                        </span>
                                        <button pButton label="Clear" class="p-button-outlined"  (click)="clearTableFilters(dt1)">
                                        </button>
                                    </div>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th style="flex:0.2 1 0;" class="arrowcol"></th>
                                    <th *ngFor="let col of columns" [pSortableColumn]="col.ColumnName" pReorderableColumn pResizableColumn [style]="col.width">
                                        {{col.DisplayName}}
                                        <p-columnFilter *ngIf="col.ShowFilter &&col.filterWidget == 'normal'&& col.filterType == 'date'" [showAddButton]="false" [showOperator]="false" [showMatchModes]="false" type="{{col.filterType}}" [field]="col.ColumnName" display="menu"></p-columnFilter>
                                        <p-columnFilter *ngIf="col.ShowFilter &&col.filterWidget == 'normal'&& col.filterType == 'text'"
                                        [showAddButton]="false" [showOperator]="false" matchMode="contains" [showMatchModes]="false" [field]="col.ColumnName"
                                                display="menu" [showApplyButton]="false">
                                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                                <input type="text" pInputText [ngModel]="value" (ngModelChange)="filter($event)" class="p-inputtext" placeholder="Search">
                                            </ng-template>
                                        </p-columnFilter>
                                        <p-columnFilter *ngIf="col.ShowFilter && col.filterWidget == 'dropdown'"
                                        [field]="col.ColumnName" matchMode="equals" [showMatchModes]="false"
                                            [showOperator]="false" [showAddButton]="false" display="menu" [showApplyButton]="false" [showClearButton]="true">
                                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                                <p-dropdown [ngModel]="value" [options]="col.dropdownList"
                                                    (onChange)="filter($event.value)" placeholder="Select"></p-dropdown>
                                            </ng-template>
                                        </p-columnFilter>
                                        <p-sortIcon [field]="col.ColumnName" *ngIf="col.ShowFilter"></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-expanded="expanded" let-columns="columns" let-i="rowIndex">
                                <tr>
                                    <td style="flex:0.2 1 0;">
                                        <a href="#" [pRowToggler]="rowData" (click)="getBotImage(rowData)">
                                            <i [ngClass]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></i>
                                        </a>
                                    </td>
                                    <td *ngFor="let col of columns" [pTooltip]="rowData[col.ColumnName]" tooltipPosition="top" [tooltipDisabled]="!col.showTooltip" [style]="col.width" (dblclick)="onNavigateToWorkSpace(rowData)">
                                        <span *ngIf="col.ColumnName =='description'">{{rowData[col.ColumnName]?fitTableView(rowData['description']):'-'}}</span>
                                        <span *ngIf="col.DisplayName != 'Status' && col.DisplayName != 'Message'&& col.DisplayName != 'Actions'&& col.ColumnName !='description' && col.ColumnName != 'last_modified_date'">
                                            <span *ngIf='col.ColumnName =="createdBy"' class="prjlastupdateprofile">{{rowData['createdBy']|userLetters:users_list|uppercase}}
                                            </span>
                                            {{rowData[col.ColumnName]?rowData[col.ColumnName]:'-'}}
                                        </span>
                                        <span *ngIf="col.ColumnName == 'last_modified_date'">{{rowData[col.ColumnName]| date:'MMM dd, y HH:mm'}}</span>
                                        <span *ngIf="col.DisplayName == 'Status'" class="d-flex align-items-center">
                                        <span class="statusbadge_nc" [ngStyle]="{'background-color':getColor(rowData[col.ColumnName])}"></span> {{rowData[col.ColumnName]}}

                                            <!-- <span *ngIf="rowData['botStatus']=='Running'" class="text-primary">
                                                <img src="assets/images/RPA/DotSpin.gif" class="testplus1" alt="">
                                            </span>
                                            <span *ngIf="rowData['botStatus']=='Success'">
                                                <img src="assets/images/RPA/icon_latest/Success.svg" pTooltip="Success" tooltipPosition="top" class="testplus1" alt="">
                                            </span>
                                            <span *ngIf="rowData['botStatus']=='Failure'">
                                                <img src="assets/images/RPA/icon_latest/close-red.svg" pTooltip="Failed" tooltipPosition="top"  class="testplus1" alt="">
                                            </span>
                                            <span *ngIf="rowData['botStatus']=='New'" class="text-primary">
                                                <img src="assets/images/RPA/userobot.png"  pTooltip="New" tooltipPosition="top" class="testplus1" alt="">
                                            </span>
                                            <span *ngIf="rowData['botStatus']=='Stop' || rowData['botStatus']=='Stopped'">
                                                <img src="assets/images/RPA/icon_latest/stop.svg" pTooltip="Stopped" tooltipPosition="top" class="testplus1" alt="">
                                            </span>
                                            <span *ngIf="rowData['botStatus']=='Pause'||rowData['botStatus']=='Paused'" class="text-primary">
                                                <img src="assets/images/SO/pause-circle.svg" class="testplus1" alt="">
                                            </span>
                                            <span *ngIf="rowData['botStatus']==null">-</span> -->
                                        </span>
                                        <span  *ngIf="col.DisplayName == 'Actions'">
                                            <!-- <div class="flex-col" *ngIf="!this.userRole.includes('Process Owner') && !this.userRole.includes('RPA Developer')">
                                                <button pTooltip="Edit Bot" tooltipPosition="top" [disabled]="true" class="button-bot">
                                                    <img src="assets/images/RPA/icon_latest/edit-dis.svg" alt="" class="testplus"> 
                                                </button>
                                                <button pTooltip="Delete Bot" tooltipPosition="top" class="button-bot" [disabled]="true">
                                                    <img src="assets/images\RPA\icon_latest/delete-dis.svg" alt="" class="testplus">
                                                </button>
                                            </div> -->
                                            <div class="flex-col">
                                                <button pTooltip="Edit Bot" tooltipPosition="top" [disabled]="!((isButtonVisible==true && userName==rowData['createdBy'])||(isButtonVisible==false))" 
                                                        (click)="openEditBotOverlay(rowData)">
                                                    <img src="assets/images-n/gridicons/edit-default.svg" alt="" class="testplus default-icon"> 
                                                    <img src="assets/images-n/gridicons/edit-hover.svg" alt="" class="testplus hover-icon"> 
                                                    <!-- <img src="../assets/images/Projects/Edit-blue.svg" alt="" class="testplus ">  -->
                                                </button>                                                
                                                <button pTooltip="Delete Bot" tooltipPosition="top" [disabled]="isButtonVisible==true" (click)="botdelete(rowData)">
                                                    <img src="assets/images-n/gridicons/delete-default.svg" alt="" class="testplus default-icon"> 
                                                    <img src="assets/images-n/gridicons/delete-hover.svg" alt="" class="testplus hover-icon"> 
                                                </button>
                                                <button pTooltip="Export Bot" tooltipPosition="top" (click)="onclickDownload(rowData)">
                                                    <img src="assets/images-n/gridicons/download-default.svg" alt="" class="testplus default-icon"> 
                                                    <img src="assets/images-n/gridicons/download-hover.svg" alt="" class="testplus hover-icon"> 
                                                    <!-- <img src="assets/images/Projects/Download.svg" alt="" class="testplus">  -->
                                                </button>
                                            </div>
                                        </span>
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="rowexpansion" let-rowData let-columns="columns" let-i="rowIndex">
                                <tr class="botpreviewtr">
                                    <td [attr.colspan]="columns.length + 1" style="flex:0 0 100% !important;">
                                        <div class="diagram_container">
                                            <a class="btn open-btn-click btn-xs" (click)="onNavigateToWorkSpace(rowData)">
                                                Click to open
                                            </a>
                                            <div *ngIf="botImage !=undefined">
                                                <div class="rpa_botdiv" *ngIf="botImage.errorMessage==undefined">
                                                    <img [src]="botImage.svg" style="width:100%" alt="">
                                                </div>
                                                <div *ngIf="botImage.errorMessage != undefined" style="width:100%" class=" text-center">
                                                    <img src="assets/images/RPA/No-Items.svg" class="no-item-img" alt="">
                                                    <span class="d-block">{{botImage.errorMessage}}</span>
                                                </div>
                                            </div>
                                            <div *ngIf="botImage == undefined">
                                                <div class="text-center">
                                                    Loading...
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            
                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                    <td style="justify-content: center;" colspan="7">No Records Found</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>

                    <!-- <mat-accordion>
                        <div class="flex-row Tabletype">
                            <div class="TabletypeHeader" matSort>
                                <div class="flex-col header gridheader-th">
                                    <div class="cell cell1"></div>
                                </div>
                                <div class="flex-col header gridheader-th">
                                    <button mat-sort-header="botName">
                                        <span >Bot Name</span>
                                    </button>
                                </div>

                                <div class="flex-col header gridheader-th">
                                    <button mat-sort-header="description">
                                        <span >Description</span>
                                    </button>
                                </div>

                                <div class="flex-col header gridheader-th">
                                    <button mat-sort-header="categoryName">
                                      <span >Category</span>
                                    </button>
                                </div>

                                <div class="flex-col header gridheader-th">
                                    <button mat-sort-header="version_new">
                                        <span>Version</span> 
                                    </button>
                                </div>
                                <div class="flex-col header gridheader-th">
                                    <button class="cursor">
                                        <span>Status</span>
                                    </button>
                                </div>
                                <div class="flex-col header gridheader-th">
                                    <button classs="cursor">
                                        <span>Actions</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="rpa-home-table">
                            <mat-expansion-panel [hideToggle]="true" #botpanel1 (opened)="getBotImage(bot.botId,bot.version,$event)" *ngFor="let bot of (displayedRows$  | async ) ;let i=index;">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        <div class="flex-row">
                                            <div class="">
                                                <div class="cell cell1">
                                                    <i class="material-icons expand-open">chevron_right</i>
                                                    <i class="material-icons expand-close">expand_less</i>
                                                </div>
                                            </div>
                                            <div class="flex-col">

                                                <span [matTooltip]=bot.botName placement="bottom"> {{(bot.botName.length > 20) ? ((bot.botName).slice(0, 20) + '...') : bot.botName}}</span>
                                            </div>
                                            <div class="flex-col">
                                                <span *ngIf="bot.description!=null" placement="bottom" [matTooltip]="bot.description" class="btndes"> {{(bot.description.length > 20) ? ((bot.description).slice(0, 20) + '...') : bot.description}}</span>
                                                <span *ngIf="!bot.description">-</span>
                                            </div>
                                            <div class="flex-col">{{bot.categoryName}}</div>
                                            <div class="flex-col">V{{bot.version_new}}</div>
                                            <div class="flex-col">
                                                <span *ngIf="bot.botStatus=='Running'" class="text-primary">
                                                    <img src="assets/images/RPA/DotSpin.gif" class="testplus1">
                                                </span>
                                                <span *ngIf="bot.botStatus=='Success'">
                                                    <img src="assets/images/RPA/icon_latest/Success.svg" matTooltip="Success" placement="top" class="testplus1">
                                                </span>

                                                <span *ngIf="bot.botStatus=='Failure'">
                                                    <img src="assets/images/RPA/icon_latest/close-red.svg" matTooltip="Failed" placement="top" class="testplus1">
                                                </span>
                                                <span *ngIf="bot.botStatus=='New'" class="text-primary">
                                                    <img src="assets/images/RPA/userobot.png"  matTooltip="New" placement="top" class="testplus1">
                                                </span>

                                                <span *ngIf="bot.botStatus=='Stop' || bot.botStatus=='Stopped'">
                                                    <img src="assets/images/RPA/icon_latest/stop.svg" matTooltip="Stopped" placement="top" class="testplus1">
                                                </span>

                                                <span *ngIf="bot.botStatus=='Pause'||bot.botStatus=='Paused'" class="text-primary">
                                                    <img src="assets/images/SO/pause-circle.svg" class="testplus1">
                                                </span>
                                                <span *ngIf="bot.botStatus==null">---</span>
                                    
                                            </div>
                                            <div class="flex-col" *ngIf="!this.userRole.includes('Process Owner') && !this.userRole.includes('RPA Developer')">
                                                <button matTooltip="Edit Bot" placement="bottom" [disabled]="true" (click)="openEditBotOverlay(bot);botpanel1.toggle()">
                                                    <img src="assets/images/Projects/edit-black.svg" alt="" class="testplus"> </button>
                                                <button matTooltip="Delete Bot" placement="bottom" [disabled]="isButtonVisible==true" (click)="botdelete(bot.botId);botpanel1.toggle()"><img src="assets/images/Projects/delete-black.svg" alt="" class="testplus"></button>
                                            </div>
                                            <div class="flex-col" *ngIf="this.userRole.includes('Process Owner') || this.userRole.includes('RPA Developer')">
                                                <button matTooltip="Edit Bot" placement="bottom" [disabled]="!((isButtonVisible==true && userName==bot.createdBy)||(isButtonVisible==false))" (click)="openEditBotOverlay(bot);botpanel1.toggle()"><img src="assets/images/Projects/edit-black.svg" alt="" class="testplus "><img src="../assets/images/Projects/Edit-blue.svg" alt="" class="testplus hover-img"> </button>                                                
                                                <button matTooltip="Delete Bot" placement="bottom" [disabled]="isButtonVisible==true" (click)="botdelete(bot.botId);botpanel1.toggle()"><img src="assets/images/Projects/delete-black.svg" alt="" class="testplus ">
                                                <img src="assets/images/Projects/delete-red.svg" alt="" class="testplus hover-img"></button>
                                            </div>
                                        </div>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <div class="diagram_container">

                                    <a class="btn open-btn-click btn-xs" routerLink="/pages/rpautomation/designer" [queryParams]="{botId:bot.botId }">
                                        Click to open
                                    </a>
                                    <div *ngIf="botImage !=undefined">
                                        <div class="rpa_botdiv" *ngIf="botImage.errorMessage==undefined">
                                            <img [src]="botImage.svg" style="width:100%">
                                        </div>
                                        <div *ngIf="botImage.errorMessage != undefined" style="width:100%" class=" text-center">
                                            <img src="assets/images/RPA/No-Items.svg" class="no-item-img">
                                            <br>
                                            <span>{{botImage.errorMessage}}</span>
                                        </div>
                                    </div>
                                    <div *ngIf="botImage ==undefined">
                                        <div class="text-center">
                                            Loading
                                        </div>
                                    </div>
                                </div>

                            </mat-expansion-panel>
                            <div class="noDataMessage" *ngIf="noDataMessage" >No Data Found</div>
                        
                        </div>
                       

                    </mat-accordion> -->
                    
                </div>
                <!-- <div class="newpaginationdiv">
                    <mat-paginator #paginator301 [length]="totalRows$ | async" [pageIndex]="0" [pageSize]="10" [showFirstLastButtons]="true" [pageSizeOptions]="[5, 10, 25, 50]"></mat-paginator>
                </div> -->
            </div>

        </div>



        <!--Edit Bot UI Bot-->
        <!-- <div *ngIf="EdithiddenPopUp" > 
            <app-split-overlay (closeOverlay)="closeOverlay1($event)"  >
            <app-rpa-bot-form (output)="botFormOutput($event)" [unsavedBot]="false" [isCreateForm]="isCreateForm" [botDetails]="botDetails" [categoriesList]="categaoriesList" (closeFormOverlay)="closeFormOverlay($event)"></app-rpa-bot-form>
            </app-split-overlay>
          </div> -->

        <!-- <div id="edit-bot" class="modal rpa-modal">
            <div class="rpa-modal-content">
                <div class="rpa-modal-header">
                    <span class="rpa-modal-close" (click)="editclose()"><img src="assets/images/RPA/icon_latest/close.svg" alt=""></span>
                    <h4>Edit Bot Details</h4>
                </div>
                <div class="modal-body">

                    <form [formGroup]="editbot" (ngSubmit)="onEditBot()">

                        <div class="container m-contanier form-body">

                            <div class="col-md-12 p-0 form-group">

                                <label class="label-control" for="botName">Bot Name<span class="star">*</span></label>
                                <input type="text" formControlName="botName" autocomplete="off" placeholder="Enter Bot Name" [(ngModel)]="botName"  maxlength="31" (input)="validate(botName,$event)" class="form-control" name="botName" (change)="checkBotnamevalidation()" required/>
                                <div *ngIf="(editbot.get('botName').hasError('required') && editbot.get('botName').touched) && !editbot.controls['botName'].hasError('maxlength')" class="required">
                                    Bot Name Required
                                </div>
                                <div *ngIf="checkbotname && editbot.get('botName').touched" class="required">
                                    Bot Name already exists*
                                </div>
                                <div *ngIf="botNamespace" class="required">special characters are not allowed Excluding( _ & - )</div>

                                <div *ngIf="editbot.controls['botName'].hasError('maxlength')" class="required">
                                    Maximum of 30 characters exceeded.
                                </div>
                             
                            </div>

                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="botDepartment">Category<span class="star">*</span></label>

                                <select [(ngModel)]="rpaCategory" class="form-control" formControlName="department" name="botDepartment" [disabled]="categaoriesList.length==1" [value]="categaoriesList.length==1?categaoriesList[0].categoryId:''">
                                    <option  value="">--Select Category--</option>
                                    <option *ngFor ="let category of categaoriesList" [value]="category.categoryId">{{category.categoryName}}</option>
                                </select>
                                <div *ngIf="rpaCategory==='others'">
                                    <input type="text" class="form-control" formControlName="newCategoryName" onkeypress="return (event.charCode !== 32)" placeholder="Enter Category Name" [(ngModel)]="newRpaCategory">
                                </div>
                                <div *ngIf="editbot.get('department').invalid && editbot.get('department').touched" class="required">
                                    Category Required
                                </div>

                            </div>

                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="botDescription">Bot Description</label>
                                <textarea type="text" autocomplete="off" formControlName="description" placeholder="Enter Bot Description" ngModel maxlength="151" rows="3" class="form-control" name="botDescription"></textarea>

                                <div *ngIf="editbot.controls['description'].hasError('maxlength')" class="required">
                                    Maximum of 150 characters exceeded.
                                </div>

                            </div>

                        </div>

                        <div class="form-footer">
                            <button class="btn btn-primary edit-bot-button" [disabled]="editbot.invalid || botNamespace || checkbotname">Save</button>
                        </div>

                    </form>

                </div>
            </div>
        </div> -->

        <!--Create Bot Ui Template-->
        
        <!-- <div id="create-bot" class="rpa-modal">
            <div class="rpa-modal-content">
                <div class="rpa-modal-header">
                    <span class="rpa-modal-close" (click)="close()"><img src="assets/images/RPA/icon_latest/close.svg" alt=""></span>
                    <h4>Create Bot</h4>
                </div>
                <div class="modal-body">

                    <form [formGroup]="insertbot" (ngSubmit)="onCreateSubmit()">

                        <div class="container m-contanier form-body">
                            <div class="col-md-12 p-0 form-group">

                                <label class="label-control" for="botName">Bot Name<span class="star">*</span></label>
                                <input type="text" formControlName="botName" autocomplete="off" placeholder="Enter Bot Name" [(ngModel)]="botName"  ngModel maxlength="31" (input)="validate(botName,$event)" class="form-control" name="botName" (change)="checkBotnamevalidation()" required/>
                                <div *ngIf="(insertbot.get('botName').hasError('required') && insertbot.get('botName').touched) && !insertbot.controls['botName'].hasError('maxlength')" class="required">
                                    Bot Name Required
                                </div>
                                <div *ngIf="checkbotname && insertbot.get('botName').value" class="required">
                                    Bot Name  already exists*
                                </div>
                                <div *ngIf="botNamespace" class="required">special characters are not allowed Excluding( _ & - )</div>

                                <div *ngIf="insertbot.controls['botName'].hasError('maxlength')" class="required">
                                    Maximum of 30 characters exceeded
                                </div>
                            </div>


                         

                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="botDepartment">Category<span class="star">*</span></label>

                                <select [(ngModel)]="rpaCategory" class="form-control" [disabled]="categaoriesList.length==1" [value]="categaoriesList.length==1?categaoriesList[0].categoryId:''" formControlName="botDepartment" name="botDepartment">
                                    <option  value="">Select Category</option>
                                    <option *ngFor ="let category of categaoriesList" [value]="category.categoryId">{{category.categoryName}}</option>
                                </select>
                              
                                <div *ngIf="insertbot.get('botDepartment').invalid && insertbot.get('botDepartment').touched" class="required">
                                    Category Required
                                </div>

                            </div>
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="botDescription">Bot Description</label>
                                <textarea type="text" autocomplete="off" formControlName="botDescription" placeholder="Enter Bot Description" ngModel maxlength="151" rows="3" class="form-control" name="botDescription"></textarea>
                                <div *ngIf="insertbot.controls['botDescription'].hasError('maxlength')" class="required">
                                    Maximum of 150 characters exceeded
                                </div>
                            </div>

                            <div class="col-md-6 p-0 form-group">
                                <input type="checkbox" formControlName="predefinedBot" (click)="predefined($event)" name="predefinedBot">&nbsp; <span>Predefined Bot</span>
                            </div>
                        </div>
                        <div class="form-footer">
                            <button class="btn btn-primary" [disabled]="insertbot.invalid || botNamespace || checkbotname">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div> -->
    </div>
</div>



<!--Import Bot Code-->

<!-- <ng-template #template>
    <div class="modal-header modelprhead">
        <h4 class="modal-title pull-left">Import Bot</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true"><img alt="" src="../assets/images/Projects/circle-close.svg"></span>
      </button>
    </div>
    <div class="modal-body modelprbody">
        <div class="container p-0" style="width:100%">
            <div class="row">
                <div class="form-group col-md-12">
                    <label>Select Environment</label>
                    <select class="form-control" value="" [(ngModel)]="importenv">                        
                      <option value="">Select Environment</option>
                      <option *ngFor="let env of environments" [value]="env.environmentId">{{env.environmentName}}</option>
                  </select>
                </div>
                <div class="form-group col-md-12">
                    <label>Select Category</label>
                    <select class="form-control" value="" [(ngModel)]="importcat">                        
                    <option value="">Select Category</option>
                    <option *ngFor="let cat of categaoriesList" [value]="cat.categoryId">{{cat.categoryName}}</option>
                  </select>
                </div>
                <div class="form-group col-md-12">
                    <label>Browse File</label>
                    <div class="text-center">
                        <input (change)="upload($event.target.files[0])" type="file">
                    </div>
                    <span class="required">{{file_error}}</span>
                </div>


            </div>
        </div>
    </div>
    <div class="modal-footer modelprfooter">
        <div class="pull-right">
            <button (click)="importfile='';importcat='';importenv='';file_error='';modalRef.hide()" class="btn btn-default">Cancel</button>
            <button class="btn btn-primary btn-update" [disabled]="importfile=='' || importcat=='' || importenv=='' || file_error!=''" (click)="importbotfile()">Import</button>
        </div>
    </div>

</ng-template> -->

  <div *ngIf="hiddenPopUp" > 
    <app-split-overlay (closeOverlay)="closeOverlay($event)"  >
    <app-rpa-bot-form (output)="botFormOutput($event)" [unsavedBot]="false" [isCreateForm]="isCreateForm" [botDetails]="botDetails" [categoriesList]="categaoriesList" (closeFormOverlay)="closeFormOverlay($event)"></app-rpa-bot-form>
    </app-split-overlay>
  </div>

  <p-dialog header="Import Bot" [(visible)]="importBot_overlay" [modal]="true" [breakpoints]="{'960px': '75vw'}" [style]="{width: '30vw'}"
    [draggable]="false" [resizable]="false">
    <div class="modal-body">
        <div class="container p-0" style="width:100%">
            <form [formGroup]="importBotForm" class="row" *ngIf="(import_BotData)" >
                <div class="form-fields col-md-12 p-0">
                    <label class="label-control">Bot Name <span class="star">*</span></label>
                    <input type="text" (input)="validateBotName()" formControlName="botName" placeholder="Enter Bot Name" class="form-control" >
                    <div *ngIf="(importBotForm.get('botName').hasError('required') && importBotForm.get('botName').touched) && !importBotForm.controls['botName'].hasError('maxlength')" class="errspan required">
                        Bot Name Required
                    </div>
                    <div *ngIf="checkbotname && importedBotName!=''" class="errspan required">
                        Bot Name is already exists
                    </div>
                    <div *ngIf="importBotForm.get('botName').hasError('pattern')" class="required">
                        Spaces and special characters are not allowed Excluding( _ & - )
                    </div>
                    <div *ngIf="importBotForm.controls['botName'].hasError('maxlength')" class="required">
                        Maximum of 30 characters exceeded
                    </div>
                </div>
                <div class="form-fields col-md-12 p-0">
                    <label class="label-control">Select Category <span class="star">*</span></label>
                  <p-dropdown [options]="categaoriesList" formControlName="categoryId" autoWidth="false" [filter]="false" [style]="{'width':'100%'}"
                          placeholder="Select Category" optionLabel="categoryName" optionValue="categoryId" (onChange)="filterEnvironments($event)"></p-dropdown>
                </div>
                <div class="form-fields col-md-12 p-0">
                    <label class="label-control">Select Environment <span class="star">*</span></label>
                    <p-dropdown [options]="filteredEnvironments" formControlName="environmentId" autoWidth="false" [filter]="false" [style]="{'width':'100%'}"
                          placeholder="Select Environment" optionLabel="environmentName" optionValue="environmentId"></p-dropdown>
                </div>
                <div class="form-fields col-md-12 p-0">
                    <label class="label-control" for="description">Bot Description</label>
                    <textarea type="text" autocomplete="off" formControlName="description"
                        placeholder="Enter Bot Description" ngModel maxlength="151" rows="3" class="form-control"
                        name="botDescription" cols="30" pInputTextarea autoResize="autoResize"></textarea>
                    <div *ngIf="importBotForm.controls['description'].hasError('maxlength')" class="required">
                        Maximum of 150 characters exceeded
                    </div>
                </div>
            </form>
            <div class="row" *ngIf="!(import_BotData)" >
                <div class="form-fields col-md-12 p-0">
                    <label>Browse File</label>
                    <input type="file" pInputText [style]="{'width':'100%'}" name="file" (change)="onFileChange($event)" id="file" accept=".txt" />
                    <span class="required" *ngIf="error_message">Please use valid file</span>
                </div>
            </div>
        </div>
    </div>
        <ng-template pTemplate="footer">
        <button (click)="onCancelImport()" class="btn new-cancelbtn"> Cancel</button>
        <button class="btn bluebg-button btn-update" [disabled]="importBotForm.invalid || checkbotname "  (click)="importbotData()">Import</button>
        </ng-template>
</p-dialog>


  <!-- <ng-template #template>
    <div class="modal-header modelprhead">
        <h4 class="modal-title pull-left">Import Bot</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide();resetImportBotForm();">
        <span aria-hidden="true"><img alt="" src="../assets/images/Projects/circle-close.svg"></span>
      </button>
    </div>
    <div class="modal-body modelprbody">
        <div class="container p-0" style="width:100%">
            <form [formGroup]="importBotForm" class="row" *ngIf="(import_BotData)" >
                <div class="form-fields col-md-12 p-0">
                    <label>Bot Name</label>
                    <input type="text" (input)="validateBotName()" formControlName="botName" placeholder="Enter Bot Name" class="form-control" >
                    <div *ngIf="(importBotForm.get('botName').hasError('required') && importBotForm.get('botName').touched) && !importBotForm.controls['botName'].hasError('maxlength')" class="errspan required">
                        Bot Name Required
                    </div>
                    <div *ngIf="checkbotname && importedBotName!=''" class="errspan required">
                        Bot Name is already exists
                    </div>
                    <div *ngIf="importBotForm.get('botName').hasError('pattern')" class="required">
                        Spaces and special characters are not allowed Excluding( _ & - )
                    </div>

                    <div *ngIf="importBotForm.controls['botName'].hasError('maxlength')" class="required">
                        Maximum of 30 characters exceeded
                    </div>
                </div>
                <div class="form-fields col-md-12 p-0">
                    <label>Select Category</label>
                    <select class="form-control"  formControlName="categoryId" (change)="filterEnvironments($event.target.value)">                        
                    <option value="" hidden disabled>Select Category</option>
                    <option *ngFor="let cat of categaoriesList" [value]="cat.categoryId">{{cat.categoryName}}</option>
                  </select>
                </div>
                <div class="form-fields col-md-12 p-0">
                    <label>Select Environment</label>
                    <select  formControlName="environmentId" class="form-control"  >                        
                      <option value="" hidden disabled>Select Environment</option>
                      <option *ngFor="let env of filteredEnvironments" [value]="env.environmentId">{{env.environmentName}}</option>
                  </select>
                </div>
            </form>
            <div class="row" *ngIf="!(import_BotData)" >
                <div class="form-fields col-md-12 p-0">
                    <label>Browse File</label>
                    <input type="file"  pInputText [style]="{'width':'100%'}"    name="file" (change)="onFileChange($event)" id="file"   />
                    <span class="required">{{file_error}}</span>
                </div>
            </div>
        </div>
    </div>
    <div  class="modal-footer modelprfooter">
        <div class="pull-right">
            <button (click)="importBotForm.reset();import_BotData=undefined;file_error='';modalRef.hide()" class="btn new-cancelbtn">Cancel</button>
            <button class="btn bluebg-button btn-update" [disabled]="importBotForm.invalid || checkbotname "  (click)="importEncryptedBotData()">Import</button>
        </div>
    </div>
</ng-template> -->
<p-confirmDialog  [style]="{width: '30vw'}"  position="center" [baseZIndex]="10000" 
   [closable]="false">
</p-confirmDialog>
<!-- <p-toast  [style]="{marginTop: '50px'}" ></p-toast>
<p-toast  [style]="{marginTop: '50px'}" key="rpa-home"></p-toast> -->


<div *ngIf="showLoader" class="loader-overlay">
    <div class="close-button-container">
      <button class="close-button" (click)="closeLoader()">X</button>
    </div>
    <div class="overlay-content">
      <p class="loading-text">Exporting Bot ...</p>
    </div>
    <span class="loader"></span>
  </div>

<div *ngIf="isExportBot" > 
    <app-split-overlay (closeOverlay)="closeExportOverlay($event)"  >
        <div class="h-100">
            <div class="create-header">
                <h3>Export Bot</h3>
            </div>
            <div class="createform-overlay">
                <h5 class="export-bot">Bot Name: <strong>{{bot_toExport.botName}}</strong></h5>
                <form class="h-100">
                <div class="form-group col pr-0">
                    <h5 style="padding: 15px;">Use below any one option to export the bot</h5>
                    <div class="p-field-radiobutton form-group col">
                        <p-radioButton name="configurations" value="withConfig" (onClick)="onchangeCustomConfig()" [(ngModel)]="exportType" inputId="configurations1"></p-radioButton>
                        <label class="export-type-label" for="configurations1">With Configurations</label>
                    </div>
                    <div class="p-field-radiobutton form-group col">
                        <p-radioButton name="configurations" value="withoutConfig" (onClick)="onchangeCustomConfig()" [(ngModel)]="exportType" inputId="configurations2"></p-radioButton>
                        <label class="export-type-label" for="configurations2">Without Configurations</label>
                    </div>
                    <!-- <div class="p-field-radiobutton form-group col">
                        <p-radioButton name="configurations" value="customConfig" (onClick)="onchangeCustomConfig()" [(ngModel)]="exportType" inputId="configurations3"></p-radioButton>
                        <label class="export-type-label" for="configurations3">Custom Configurations</label>
                    </div> -->
                </div>
                    <div class="form-group col pr-0" style="margin-left: 20px;" *ngIf="exportType == 'customConfig'">
                        <label class="label-control">Tasks List<span class="star">*</span></label>
                    <p-multiSelect [options]="bot_tasksList" name="tasklist" (onChange)="ontaskListChange()"
                        [(ngModel)]="selectedTaskList" #depart="ngModel" id="tasklist" optionLabel="taskName"
                        optionValue="botTId" [filter]="true" [style]="{'width':'50%'}" filterBy="taskName"
                        placeholder="Select Task" required>
                    </p-multiSelect>
                    </div>
                </form>
                <div class="createform-footer">
                    <button (click)="closeExportOverlay(false)" class="btn new-cancelbtn">Cancel</button>
                    <button [disabled]="exportType == null || isExportDisable" (click)="getEncryptedData()" class="btn bluebg-button" >Export</button>
                </div>
            </div>
        </div>
    </app-split-overlay>
  </div>
