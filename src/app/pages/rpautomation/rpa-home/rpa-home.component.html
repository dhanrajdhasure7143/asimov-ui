<div class="row">

    <div class="col-md-4 row ">
        <h1 class="title-font">Automate the Tasks</h1>
        <h4 class="subtitle">Select below options to configure the Bots</h4><br/>
        <div class="rpa-home">
            <div class="rpa-home-block" id="createbot-Home">
                <button type="button" (click)="createoverlay()" aria-hidden="true" placement="bottom">
                  <img src="../../../../assets/images/RPA/create.svg" style="height:80px;">
                  <br><br>
                  <h6 class="rpa-home-btn-title">Create</h6>
                </button>
            </div>

            <!--<div class="rpa-home-block" id="loadbot-Home">
            <button  type="button" (click)="openload()"  aria-hidden="true" placement="bottom">
               
                <img src="../../../../assets/images/RPA/Load.svg" style="height:80px;" >
                <br><br>
                <h6 class="rpa-home-btn-title">Load</h6>
            </button>
          </div>-->
            <div class="rpa-home-block" id="environment-Home" *ngIf="this.isButtonVisible">
                <button type="button" aria-hidden="true" [routerLink]="[ '/pages/rpautomation/environments']" placement="bottom">
            <img src="../../../../assets/images/RPA/Environments.svg"style="height:80px;" >
            <br><br>
            <h6 class="rpa-home-btn-title">Environments</h6>
          </button>
            </div>
        </div>

    </div>
    <div class="col-md-8">
        <div style="padding:10px">
            <div class="mat-elevation-z8 rpa-home-bots" id="botdetails-Home">
                <h3 class="box-heading  rpa-home-heading">My Workspace</h3>
                <mat-tab-group mat-align-tabs="start" [selectedIndex]="selectedTab">
                    <mat-tab label="Bot Details">
                        <div class="row rpa-home-header" style="padding-left:576px;">

                            <!--<h4 class="box-heading  rpa-home-heading">My Workspace</h4>-->

                            <!--<span class="box-heading rpa-home-category">

              <mat-form-field class="rpa-mat-form-field-category">
                <mat-label>Category</mat-label>
                  <mat-select>
                    <mat-option value="1">Option</mat-option>
                    <mat-option value="2">Option</mat-option>
                    <mat-option value="3">Option</mat-option>
                  </mat-select>
              </mat-form-field>
            </span>


                        <span class="box-heading rpa-home-category">

              <mat-form-field class="rpa-mat-form-field-category">
                <mat-label>Bot Type</mat-label>
                  <mat-select singleselect>
                    <mat-option value="0">Attended</mat-option>
                    <mat-option value="1">Unattended</mat-option>
                  </mat-select>
              </mat-form-field>
            </span>-->
                            <!--<span class="box-heading rpa-home-process"> 
              <mat-form-field class="rpa-mat-form-field-search">
                <mat-label>Bot Name</mat-label>
                <input class="toolbar-search" *ngIf="!isSearch" matInput (keyup)="applyFilter1($event.target.value)">
                <mat-icon matSuffix *ngIf="!isSearch" style="font-size: 1.2em"></mat-icon>
            </mat-form-field>
            </span>-->
            <mat-form-field class="filter" floatLabel="never" style="margin-top:10px">
                <mat-label>Bot Name</mat-label>
                <input matInput autocomplete="off" id="botNameFilter" [formControl]="botNameFilter">
              </mat-form-field>

              <!--<mat-form-field class="filter" floatLabel="never" style="margin-top:10px">
                <mat-label>Bot Type</mat-label>
                <input matInput autocomplete="off" id="botTypeFilter" [formControl]="botTypeFilter">
              </mat-form-field>-->
              &nbsp;&nbsp;&nbsp;
              <mat-form-field class="filter" floatLabel="never" style="margin-top:10px">
                <mat-label>Category</mat-label>
                <input matInput autocomplete="off" id="departmentFilter" [formControl]="departmentFilter">
              </mat-form-field>

                            <!--<mat-form-field *ngFor="let filter of filterSelectObj" style="margin-left: 15px;margin-top:10px;">
                                <mat-label>Select {{filter.name}}</mat-label>
                                <select matNativeControl name="{{filter.columnProp}}" [(ngModel)]="filter.modelValue" (change)="filterChange(filter,$event)">
                  <option value="">-- Select {{filter.name}} --</option>
                  <option [value]="item" *ngFor="let item of filter.options">{{item}}
                  </option>
                </select>
                            </mat-form-field>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <button mat-flat-button class="rpa-home-reset-btn" title="Reset Filter" (click)="resetFilters()">Reset</button>-->

                        </div>
                        <div class="bots-container">

                            <table mat-table #sort1="matSort" [dataSource]="dataSource1" matSort class=" table">

                                <ng-container matColumnDef="botName">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Bot Name </th>
                                    <td mat-cell *matCellDef="let element"> <button *ngIf="element.botName!=null" (click)=loadbotdata(element.botId)>{{element.botName}}</button> <span *ngIf="element.botName==''">-</span> </td>
                                </ng-container>

                                <ng-container matColumnDef="version">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Version </th>
                                    <td mat-cell *matCellDef="let element">
                                        <button *ngIf="element.version!=null">V{{element.version}}</button>
                                        <span *ngIf="element.version==''">-</span> </td>
                                </ng-container>

                                <ng-container matColumnDef="botType">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.botType!=null">{{element.botType}}</span>
                                        <span *ngIf="element.botType==null">---</span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="department">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.department!=null">{{element.department}}</span>
                                        <span *ngIf="element.department==null">---</span>
                                    </td>
                                </ng-container>



                                <ng-container matColumnDef="botStatus">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status </th>
                                    <td mat-cell *matCellDef="let element"> <span *ngIf="element.botStatus!=null">{{element.botStatus}}</span> <span *ngIf="element.botStatus==null">---</span> </td>
                                </ng-container>
                                <ng-container matColumnDef="description">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Description </th>
                                    <td mat-cell *matCellDef="let element"> <span *ngIf="element.description!=null" class="descriptiontext" (click)="changeclassstyle()">{{element.description}}</span>
                                         <span *ngIf="element.botStatus==null">---</span> </td>
                                </ng-container>
                                <!--<ng-container matColumnDef="description">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
                                <td mat-cell *matCellDef="let element">
                                    <button *ngIf="element.description!=null">{{element.description}}</button>
                                    <span *ngIf="element.description==''">-</span> </td>
                            </ng-container>-->
                                <ng-container matColumnDef="Loading">
                                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="6">
                                        Loading
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="noData">
                                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="6">
                                        No Records Found
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']" [ngClass]="{'hide':dataSource1!=null}"></tr>
                                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSource1!=null && dataSource1.data.length==0)}"></tr>
                            </table>
                            <div [hidden]="isTableHasData" style="text-align:center;font-style:italic">
                                No Record Found
                               </div>
                        </div>
                        <mat-paginator #paginator1 [pageSize]="5" [showFirstLastButtons]="true"></mat-paginator>
                    </mat-tab>
                    <mat-tab label="Automated Tasks">
                        <div class="rpa-home-header">
                            <!-- <h4 class="box-heading  rpa-home-heading">My Workspace</h4>-->



                            <span class="box-heading rpa-home-process">    
                  <select class="form-control" style="width:150px;float:right" [value]="selectedvalue" (change)="applyFilter($event.target.value)" >
                    <option value="" [selected]="true">Select Process</option>
                    <option *ngFor="let process of process_names" [value]="process.processName">{{process.processName}}</option>
                      
                  </select>
            </span>

                        </div>
                        <div class="bots-container" id="automatedtasks-Home">
                            <table mat-table #sort2="matSort" [dataSource]="dataSource2" matSort class=" table">

                                <ng-container matColumnDef="processName">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Process Name</th>
                                    <td mat-cell *matCellDef="let element"> {{element.processName}}</td>
                                </ng-container>

                                <ng-container matColumnDef="taskName">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Task</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.taskName!=null">{{element.taskName}}</span>
                                        <span *ngIf="element.taskName==null">---</span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="Assign">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Assigned Bot</th>
                                    <td mat-cell *matCellDef="let element">

                                        <span> 
                     <select class="form-control" [value]="element.botId" [id]="element.taskId+'__select'">
                        <option value="0">Select Bot</option>
                        <option *ngFor="let bot of bot_list" [value]="bot.botId" [selected]="element.botId==bot.botId">{{bot.botName}}</option>
                      </select>
                    </span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="Operations">
                                    <th mat-header-cell *matHeaderCellDef></th>
                                    <td mat-cell *matCellDef="let element">

                                        <span>
                      <button (click)="createtaskbotoverlay(element.taskId)" title="Create and Assign Bot"><img style="width:15px" src="../../../../assets/images/RPA/rpa-env-add-btn.svg"></button>
                  </span>

                                        <span>
                    <button (click)="assignbot(element.taskId)" title="Assign Bot"><img style="width:15px" src="../../../../assets/images/iconfinder_check_2561355.svg"></button>
                  </span>

                                        <span>
                    <button (click)="assignreset(element.taskId)" title="Create and Assign Bot"><i  class="fas fa-sync-alt"></i></button>
                  </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="noData">
                                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="6">
                                        No Records Found
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns2; sticky: true"></tr>
                                <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSource2!=null && dataSource2.data.length==0)}"></tr>
                            </table>

                        </div>
                        <mat-paginator #paginator2 [pageSize]="5" [showFirstLastButtons]="true"></mat-paginator>
                    </mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </div>
</div>