

<div class="header_addon" style="padding-right:40px;padding-top:7px;">
    <!--
      <mat-slide-toggle
      style="float:right;height:20px;padding-right:30px"
      class="example-margin"
      color="primary"
      *ngIf="tabsArray.length > 0"
      [checked]="change_rpa_screen"
      [(ngModel)]="changescreen_rpa_model"
      (change)="checkchange()"
      tooltip="change screen"
      placement="bottom"
      >
    </mat-slide-toggle> -->
    
      <button  type="button" class="btn btn-primary" style="float:right;" aria-hidden="true" placement="bottom" id="Load_Bot" (click)="onLoad()">
        <i class="fa fa-list"></i>&nbsp;&nbsp;Load
      </button>
    
      <button  type="button"    class="btn btn-primary"  style="float:right;"  aria-hidden="true" placement="bottom" id="Create_Bot" (click)="onCreate(0)">
        <i class="fa fa-plus"></i>&nbsp;&nbsp;Create
      </button>
    
    
    </div>

<div class="row">

    
    <div class="col-md-3">

        <h2 class="title-font" style="margin-top:10px !important;margin-bottom: 0px !important">Automate the Tasks</h2><br>
        <h5 class="subtitle" style="margin-top:0px !important;font-size: 13.8px !important;">Select below option to create or configure the task</h5><br/>

        <div class="rpa-home">
            <!--<div class="rpa-home-block" id="createbot-Home">
                <button type="button" (click)="createoverlay()" aria-hidden="true" placement="bottom">
                <img src="../../../../assets/images/RPA/create.svg" style="height:80px;">
                <br><br>
                <h6 class="rpa-home-btn-title">Create</h6>
              </button>
            </div>-->
            <div class="rpa-home-block" id="createbot-Home" style="border-radius: 5px;" *ngIf="this.isButtonVisible || enablecreatebot">
                <img src="../../../../assets/images/RPA/create.svg"style="height:80px;">
                <!--<h4 style="font-weight: 600;line-height: 1.1;">Create Bot</h4>
                <h5 style="color:gray">Click to Create New Bot</h5>-->
                <br><br>
                <button class="btn btn-primary rpa-home-btn-title eiap-btn" id="create_newbot" style="margin-left:17px;" (click)="createoverlay()" aria-hidden="true" placement="bottom">Create</button>
            </div>

            <!--<div class="rpa-home-block" id="loadbot-Home">
          <button  type="button" (click)="openload()"  aria-hidden="true" placement="bottom">

              <img src="../../../../assets/images/RPA/Load.svg" style="height:80px;" >
              <br><br>
              <h6 class="rpa-home-btn-title">Load</h6>
          </button>
        </div>-->
            <br>
            <!--<div class="rpa-home-block py-5" id="environment-Home" *ngIf="this.isButtonVisible">
                <button type="button" aria-hidden="true" [routerLink]="[ '/pages/rpautomation/configurations']" placement="bottom">
          <img src="../../../../assets/images/RPA/Environments.svg"style="height:80px;" >
          <br><br>
          <h6 class="rpa-home-btn-title">Configurations</h6>
        </button>
            </div>-->
            <div class="rpa-home-block py-5" id="Configuration_Home" style="border-radius: 5px;" *ngIf="this.isButtonVisible || enableConfiguration">
                <img src="../../../../assets/images/RPA/Environments.svg"style="height:80px;">
               <!-- <h4 style="font-weight: 600;line-height: 1.1;">Configutions</h4>
                <h5 style="color:gray">Click to View Bot Configurations</h5>-->
                <br>
                <br>
                <button class="btn btn-primary rpa-home-btn-title eiap-btn" id="create_Configuration" style="margin-left:17px;" [routerLink]="[ '/pages/rpautomation/configurations']" placement="bottom">Configurations</button>
            </div>
        </div>

    </div>
    <div class="col-md-9" style="padding-right:25px;" *ngIf="this.isButtonVisible || showWorkspace">
            <div class="mat-elevation-z8 rpa-home-bots" id="botdetails-Home" style=" border-radius: 4px;">


               <!-- <mat-tab-group mat-align-tabs="start" [selectedIndex]="selectedTab">
                    <mat-tab label="Bot Details">
                        <hr>-->
                        <div class="row rpa-home-header">
                            <div class="col-sm-7 col-md-7" style="float:left !important;padding-left:37px;">
                                <h3 class="box-heading  rpa-home-heading">My Workspace</h3>
                            </div>
                            <div class="col-sm-5 col-md-5"  style="margin-right:8px;padding-top:3px;text-align: right;;">
                            <mat-form-field class="filter departmentFilterclass ">
                                <select matNativeControl id="departmentselect" [formControl]="departmentFilter">
                                    <option value="" selected>Select Category</option>
                                    <option [value]="department.categoryId" *ngFor="let department of categaoriesList">{{department.categoryName}}
                                    </option>
                                </select>
                            </mat-form-field>&nbsp;&nbsp;&nbsp;
                            <mat-form-field class="filter" floatLabel="never" style="width:142px;">
                                <mat-label>Search</mat-label>
                                <input matInput autocomplete="off" id="botNameFilter" [formControl]="botNameFilter">
                                <mat-icon matSuffix>search</mat-icon>
                              </mat-form-field>
                              &nbsp;
                              <button class="undobtn" style="font-size:16px;text-align: center;vertical-align: center;" tooltip="Reset" (click)="Resetfilters()"><i class="fa fa-undo"></i></button>
                            </div>
                        </div>
                        <div class="bots-container" style="width:100%;overflow: auto;">

                            <table mat-table #sort1="matSort" [dataSource]="dataSource1" matSort class=" table">

                                <ng-container matColumnDef="botName">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:18%;">Bot Name </th>
                                    <td mat-cell *matCellDef="let element" style="width:18%;">
                                        <button *ngIf="element.botName!=null" class="btnbot"  [tooltip]="element.botName" placement="bottom" (click)=loadbotdata(element.botId)>{{(element.botName.length > 15) ? ((element.botName).slice(0, 15) + '...') : element.botName}}</button>
                                        <!--<div class="BotNameelement">{{element.botName}}</div>  -->
                                        <span *ngIf="element.botName==''">-</span> </td>
                                </ng-container>

                                <ng-container matColumnDef="version">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Version </th>
                                    <td mat-cell *matCellDef="let element">
                                        <button *ngIf="element.version!=null">V{{element.version}}</button>
                                        <span *ngIf="element.version==''">-</span> </td>
                                </ng-container>

                                <ng-container matColumnDef="botType">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.botType!=null">{{element.botType}}</span>
                                        <span *ngIf="element.botType==null">---</span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="department">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.department!=null">{{element.department}}</span>
                                        <span *ngIf="element.department==null">---</span>
                                    </td>
                                </ng-container>



                                <ng-container matColumnDef="botStatus">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status </th>
                                    <td mat-cell *matCellDef="let element">

                                        <span *ngIf="element.botStatus=='Running'" class="text-primary" ><span><img src="../../../../assets/images/RPA/DotSpin.gif" style="filter: none; width: 19px;"></span>&nbsp;{{element.botStatus}}</span>

                                        <span *ngIf="element.botStatus=='Success'" class="text-success"><span><li class="fa fa-check-circle"style="font-size:19px"></span>&nbsp;<span>{{element.botStatus}}</span></span>

                                        <span *ngIf="element.botStatus=='Failure'" class="text-danger"><span><li class="fa fa-times-circle" style="font-size:19px"></span>&nbsp;<span>{{element.botStatus}}</span></span>
                                        <!--<img src="../../../../assets/images/RPA/newicon.png" style="filter: none; width: 20px;">-->
                                        <span *ngIf="element.botStatus=='New'" class="text-primary"><span style="background-color:#0062cf;border-radius: 50%;color:white;padding-right:5px;padding-left:4px;padding-top:5px;padding-bottom:5px;font-size:10px;text-align: center;align-content: center;align-items: center;"><!--<img src="../../../../assets/images/RPA/userobot.png" style="filter: none; width: 19px;">--><i class="fas fa-robot text-light"></i></span>&nbsp;<span>{{element.botStatus}}</span></span>

                                        <span *ngIf="element.botStatus=='Stop'" ><span class="bg-danger" style="background-color:#a94442;border-radius: 50%;color:white;padding-right:6px;padding-left:5px;padding-top:5px;padding-bottom:4px;font-size:9px;text-align: center;align-content: center;align-items: center;"><!--<img src="../../../../assets/images/RPA/userobot.png" style="filter: none; width: 19px;">--><i class="fas fa-stop"></i></span>&nbsp;<span>{{element.botStatus}}</span></span>

                                        <span *ngIf="element.botStatus=='Pause'||element.botStatus=='Paused'" ><span class="text-primary" style="font-size:19px;"><!--<img src="../../../../assets/images/RPA/userobot.png" style="filter: none; width: 19px;">--><i class="fas fa-pause-circle text-primary"></i></span>&nbsp;<span>{{element.botStatus}}</span></span>


                                        <span *ngIf="element.botStatus==null">---</span> </td>
                                </ng-container>
                                <ng-container matColumnDef="description">
                                    <th mat-header-cell *matHeaderCellDef style="width:25%;">Description </th>
                                    <td mat-cell *matCellDef="let element" style="width:25%;">
                                        <span *ngIf="element.description!=null" placement="bottom" [tooltip]="element.description" class="btndes"> {{(element.description.length > 30) ? ((element.description).slice(0, 30) + '...') : element.description}}</span>
                                        <span *ngIf="element.description==null">-</span>
                                    </td>
                                </ng-container>
                                <!--<ng-container matColumnDef="description">
                              <th mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
                              <td mat-cell *matCellDef="let element">
                                  <button *ngIf="element.description!=null">{{element.description}}</button>
                                  <span *ngIf="element.description==''">-</span> </td>
                          </ng-container>-->
                                <ng-container matColumnDef="Loading">
                                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="6">
                                        Loading
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="noData">
                                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="6">
                                        No Records Found
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']" [ngClass]="{'hide':dataSource1!=null}"></tr>
                                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide': !respdata1 && isTableHasData}"></tr>
                            </table>
                            <!--<div [hidden]="isTableHasData" style="text-align:center;font-style:italic">
                              No Record Found
                             </div>-->
                        </div>
                        <mat-paginator #paginator1 [pageSize]="8" [showFirstLastButtons]="true"></mat-paginator>
                   <!-- </mat-tab>
                    <mat-tab *ngIf="false" label="Automated Tasks">
                        <div class="rpa-home-header">-->
                            <!-- <h4 class="box-heading  rpa-home-heading">My Workspace</h4>-->



                           <!-- <div class="box-heading rpa-home-process">

                                <span class="run-process">
                  <button [disabled]="selectedvalue=='' || selectedEnvironment==''" (click)="startprocess()" class="btn btn-primary" style="float:right;padding-right:10px;padding-left:10px" title="Run Process"><i  class="fas fa-play"></i></button>
              </span>
                                <span class="run-process">
                  <select class="form-control" style="width:250px;float:right" [value]="selectedvalue" (change)="applyFilter($event.target.value)" >
                  <option value="" [selected]="true">Select Process</option>
                  <option *ngFor="let process of process_names" [value]="process.processId">{{process.processName}}</option>

                </select>
              </span>
                                <span class="run-process">
                  <select class="form-control" style="width:250px;float:right"  [(ngModel)]="selectedEnvironment">
                      <option value="" selected=true>Select Environment</option>
                      <option  *ngFor="let environment of environments" [value]="environment.environmentId" >{{environment.environmentName}}</option>

                  </select>


                  
              </span>

                            </div>



                        </div>
                        <div class="bots-container" *ngIf="" id="automatedtasks-Home">
                            <table mat-table #sort2="matSort" [dataSource]="dataSource2" matSort class=" table">

                                <ng-container matColumnDef="processName">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Process Name</th>
                                    <td mat-cell *matCellDef="let element"> {{element.processName}}</td>
                                </ng-container>

                                <ng-container matColumnDef="taskName">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Task</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.taskName!=null">{{element.taskName}}</span>
                                        <span *ngIf="element.taskName==null">---</span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="Assign">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Assigned Bot</th>
                                    <td mat-cell *matCellDef="let element">

                                        <span>
                              <select class="form-control" style="width:200px;"  [value]="element.botId" [id]="element.taskId+'__select'">
                                  <option value="0" >Select Bot</option>
                                  <option *ngFor="let bot of bot_list" [value]="bot.botId"  [selected]="bot.botId == element.botId">{{bot.botName}}</option>
                              </select>
                      </span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="status">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.status!='null'" [id]="element.taskId+'__status'">
                                          <span *ngIf="element.status=='InProgress'" class="text-primary" ><span><img src='../../../../assets/images/RPA/processloading.svg' style='height:25px'></span>&nbsp;<span>{{element.status}}</span></span>
                                        <span *ngIf="element.status=='Success'" class="text-success"><span><li class="fa fa-check"></span>&nbsp;<span>{{element.status}}</span></span>
                                        <span *ngIf="element.status=='New'" class="text-primary"><span><img src="/assets/images/RPA/newicon.png" style="height:20px;"></span>&nbsp;<span>{{element.status}}</span></span>
                                        <span *ngIf="element.status=='Failed'" class="text-danger"><span><li class="fa fa-times"></span>&nbsp;<span>{{element.status}}</span></span>
                                        </span>

                                        <span *ngIf="element.status=='null'">---</span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="successTask">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Success</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.successTask!='null'" [id]="element.taskId+'__success'">{{element.successTask}}</span>
                                        <span *ngIf="element.successTask=='null'">---</span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="failureTask">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Failure</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.failureTask!='null'" [id]="element.taskId+'__failed'">{{element.failureTask}}</span>
                                        <span *ngIf="element.failureTask=='null'">---</span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="Operations">
                                    <th mat-header-cell *matHeaderCellDef></th>
                                    <td mat-cell *matCellDef="let element">

                                        <span>
                      <button (click)="createtaskbotoverlay(element.taskId)" title="Create and Assign Bot">
                        <img style="width:15px" src="../../../../assets/images/RPA/rpa-env-add-btn.svg">
                      </button>
                  </span>

                                        <span>
                      <button (click)="assignbot(element.taskId)" title="Assign Bot"><img style="width:15px" src="../../../../assets/images/iconfinder_check_2561355.svg"></button>
                  </span>

                                        <span>
                      <button (click)="resetbot(element.taskId)" title="Create and Assign Bot"><i  class="fas fa-sync-alt"></i></button>
                  </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="noData">
                                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="6">
                                        No Records Found
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns2; sticky: true"></tr>
                                <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSource2!=null && dataSource2.data.length==0)}"></tr>
                            </table>

                        </div>
                        <mat-paginator #paginator2 [pageSize]="5" [showFirstLastButtons]="true"></mat-paginator>
                    </mat-tab>
                </mat-tab-group>-->
        </div>
</div>
