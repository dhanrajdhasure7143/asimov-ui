<div  #draggableHandle class="modal-header modelprhead newmodelcla">
  <span *ngIf="logsDisplayFlag=='LOGS'" class="module-back-button" (click)="viewRunsByBotId()">
    <i class="fas fa-arrow-left" aria-hidden="true"></i>
  </span>
  <span *ngIf="logsDisplayFlag=='LOOP-LOGS'" class="module-back-button"  (click)="logsDisplayFlag='LOGS'; isDataEmpty=false">
    <i class="fas fa-arrow-left" aria-hidden="true"></i>
  </span>
  <span *ngIf="selectedAutomationTask!=undefined" class="module-back-button"  (click)="logsDisplayFlag='LOGS'; isDataEmpty=false">
    <i class="fas fa-arrow-left" aria-hidden="true"></i>
  </span>
    Logs  
   
    <span *ngIf="viewlogid1!=undefined">
      - Run ID - {{viewlogid1}}
    </span>
    <span (click)="viewRunsByBotId()" *ngIf="logsDisplayFlag=='RUNS' " class="clickable1 refecls"  >
      Refresh
    </span>
    <span (click)="ViewlogByrunid(botrunid, selectedLogVersion)" *ngIf="logsDisplayFlag=='LOGS'" class="clickable1 refecls">
      Refresh
    </span>
    <span (click)="getLoopIterations(selectedIterationTask)"  *ngIf="logsDisplayFlag=='LOOP-LOGS'" class="clickable1 refecls">
        Refresh
    </span>
    <span (click)="getAutomationLogs(selectedAutomationTask)" *ngIf="logsDisplayFlag=='AUTOMATION-LOGS'" class="clickable1 refecls">
        Refresh
    </span>
    <span class="ml-auto">
    <span class="clickable" (click)="closeLogsOverlay()">
      <img src="../../../../assets/images/Projects/circle-close.svg" alt="">
    </span>
  </span>
</div>

  <div class="modal-body newmodelbodycl">
    <div class="logs-container" >
      <!-- <div [id]="viewlogid" *ngIf="logsLoading==false && logsDisplayFlag=='RUNS' && isDataEmpty==false" class="log-bg">        -->
        <div *ngIf="!logsLoading" class="main-content-body rpaauditsgrid">
    
          <p-table #dt [value]="logsData" dataKey="id" [resizableColumns]="true" responsiveLayout="scroll"
              [reorderableColumns]="true" [scrollable]="true">
              <!-- <ng-template pTemplate="caption">
                  <div class="flex">
                      <span class="p-input-icon-right gridsearch">
                          <i class="pi pi-search"></i>
                          <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
                              placeholder="Search keyword" />
                      </span>
                      <button pButton label="Clear" class="p-button-outlined only_clearbtn"
                          icon="pi pi-filter-slash" (click)="clear(dt)"></button>
                  </div>
              </ng-template> -->
              <ng-template pTemplate="header">
                  <tr>
                      <th *ngFor="let each of columnList" [style]="each.width" pSortableColumn="{{each.field}}"
                          pReorderableColumn pResizableColumn>{{each.DisplayName}}
                          <p-columnFilter *ngIf="each.ShowFilter && each.filterType == 'text'" [showAddButton]="false" [showOperator]="false"
                              matchMode="contains" [showMatchModes]="false" [field]="each.field" display="menu"
                              [showApplyButton]="false">
                              <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                  <input type="text" pInputText [ngModel]="value" (ngModelChange)="filter($event)"
                                      class="p-inputtext" placeholder="Search">
                              </ng-template>
                          </p-columnFilter>
                          <p-columnFilter *ngIf="each.ShowFilter && each.filterType == 'date'" [showAddButton]="false"
                  [showOperator]="false" type="date" [showMatchModes]="false" [field]="each.field"
                  display="menu" [showApplyButton]="true">
              </p-columnFilter>
                          <p-sortIcon *ngIf="each.ShowFilter" [field]="each.field"></p-sortIcon>
                      </th>
                  </tr>
              </ng-template>
              <ng-template pTemplate="body" let-logs>
                  <tr class="action-desc">
                      <td *ngFor="let col of columnList">     
                        <span *ngIf="col.field=='run_id'">
                          <a class="clickable" (click)="ViewlogByrunid(logs['run_id'], logs['version'])">{{logs[col.field]}}</a>
                        </span>
                        <span *ngIf="col.field!='run_id' && col.field != 'bot_status' && col.field!='task_name'">
                          {{logs[col.field]}}
                        </span>
                        <span *ngIf="col.field=='bot_status'">
                          <span *ngIf="logs[col.field]=='Running'" class="text-primary" >
                            <span>
                              <img src="../../../../assets/images/RPA/DotSpin.gif" class="testplus" alt="">
                            </span>
                            {{logs[col.field]}}&nbsp;&nbsp;&nbsp;
                            <span class="btn btn-xs bluebg-button clickable1" (click)="updateLog(logs)" >Kill</span> 
                          </span>
                          <span *ngIf="logs[col.field]=='Success'" >
                            <span>
                              <img src="../../../../assets/images/RPA/icon_latest/Success.svg" class="testplus" alt="">
                            </span>
                            <span>{{logs[col.field]}}</span>
                          </span>

                          <span *ngIf="logs[col.field]=='Failure'" >
                            <span>
                              <img src="../../../../assets/images/RPA/icon_latest/close-red.svg" class="testplus" alt="">
                            </span>
                            <span>{{logs[col.field]}}</span>
                          </span>
                          <!--<img src="../../../../assets/images/RPA/newicon.png" style="filter: none; width: 20px;">-->
                          <span *ngIf="logs[col.field]=='New'" class="text-primary tableActionsIcons">
                            <span >
                            <img src="../../../../assets/images/RPA/userobot.png" class="testplus" alt="">
                            </span>
                            <span>{{logs[col.field]}}</span>
                          </span>

                          <span *ngIf="logs[col.field]=='Stop' ||logs[col.field]=='Stopped'  "  >
                            <span  >
                              <img src="../../../../assets/images/RPA/icon_latest/stop.svg" class="testplus" alt="">
                            </span>
                            <span>{{logs[col.field]}}</span>
                          </span>

                          <span *ngIf="logs[col.field]=='Pause'||logs[col.field]=='Paused'" >
                            <span >
                              <img src="../../../../assets/images/SO/pause-circle.svg" class="testplus" alt="">
                            </span>
                            <span>{{logs[col.field]}}</span>
                          </span>

                        </span>
                        <span *ngIf="col.field=='task_name'">
                          <span *ngIf="logs['child_logs_count']==0  && logs['task_name']!='loop-start'">
                            {{logs[col.field]}}
                          </span>
                          <span *ngIf="logs['task_name']=='loop-start'">
                            <a (click)="getChildLogs(logs)" class="clickable">{{logs[col.field]}}</a>
                          </span>
                          <span *ngIf="logs['child_logs_count']!=0 && logs['task_name']!='loop-start'">
                            <a (click)="getChildLogs(logs)" class="clickable">{{logs[col.field]}}</a>
                          </span>
                        </span>
                          
                          <span *ngIf="logs[col.field] == undefined || logs[col.field] == null || logs[col.field]==''">-</span>
                      </td>
                  </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                  <tr>
                      <td style="justify-content: center;" colspan="5">No Records Found</td>
                  </tr>
              </ng-template>
          </p-table>
        </div>
      <!-- </div> -->
      <!-- <div [id]="viewlogid1" *ngIf="logsDisplayFlag=='LOGS' && logsLoading==false  && isDataEmpty==false" class="logs-bg" >
      </div>
      <div *ngIf="logsLoading==false && logsDisplayFlag=='LOOP-LOGS' && isDataEmpty==false" class="logs-bg"  >
      </div>
      <div *ngIf="logsLoading==false && logsDisplayFlag=='AUTOMATION-LOGS'  && isDataEmpty==false " class="logs-bg"  >
      </div>
      <div *ngIf="isDataEmpty==true && logsLoading==false" class="text-center">
          <div class="no-records">
            <h4>No Records Found</h4>
          </div>
      </div> -->
      <!-- <mat-paginator #paginator2 class="newpaginationdiv" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50]" [showFirstLastButtons] ="true"></mat-paginator> -->
      <div class="logs-container" *ngIf="logsLoading==true">
        <div class="logs-loader">
          <img src="../../../../assets/images/EZFlow_Loader.gif" alt="">
        </div>
      </div>
  </div>

</div>
