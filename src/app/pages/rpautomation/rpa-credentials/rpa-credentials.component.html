<div class="container-fluid mx-3" *ngIf="this.isButtonVisible || enableCredential">
    <div class="rpa-env-search">
        <mat-form-field class="rpa-mat-form-field-search">
            <mat-label>Search</mat-label>
            <mat-icon matSuffix *ngIf="!isSearch" style="font-size: 1.2em">search</mat-icon>
            <input class="toolbar-search" *ngIf="!isSearch" matInput (keyup)="applyFilter1($event.target.value)">
        </mat-form-field>

    </div>
    <div class="env-data-tool">
        <div class="env-btn">
            <button value="Create" title="Create Credentials" id="addbtn" (click)="createcredentials()">
        <img  src='..\\assets\\images\\RPA\\rpa-env-add-btn.svg'> 
        <div>New</div>
      </button>
        </div>
        <div *ngIf="Credupdateflag == true" class="env-btn">
            <button id="updatebtn" data-toggle="tooltip" data-placement="bottom" title="Modify Credentials" (click)="updatecreddata()">        
        <img   src='..\\assets\\images\\RPA\\rpa-env-edit-btn.svg'> 
        <div>Modify</div>            
            </button>    
        </div>   
        <div *ngIf="Credupdateflag == false" class="env-btn">    
            <button data-toggle="tooltip" id="updatebtn" data-placement="top" title="Modify Credentials" disabled>            
             <img   src='..\\assets\\images\\RPA\\rpa-env-edit-btn.svg'>     
             <div>Modify</div>          
             </button>   
        </div>
        <div *ngIf="Creddeleteflag==true" class="env-btn">
            <button title="Delete Credentials" value="Delete" id="deletebtn" (click)="deleteCredentials()">
                <img src='..\\assets\\images\\RPA\\rpa-env-delete-btn.svg'> 
                <div>Delete</div>
                </button>
        </div>       
        <div *ngIf="Creddeleteflag==false" class="env-btn">
            <button data-toggle="tooltip" data-placement="top" id="deletebtn" title="Delete Credentials" disabled>
            <img src='..\\assets\\images\\RPA\\rpa-env-delete-btn.svg'> 
            <div>Delete</div>
            </button>
        </div>
    </div>
    
    <div style="width:100%;overflow-x: scroll;">
    
            <table mat-table #sort2="matSort" [dataSource]="dataSource2" matSort class=" table"  id="listofcred">
                
                <ng-container matColumnDef="check">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        <input [disabled]="Credcheckeddisabled" type="checkbox" id="Credcheckall" [checked]="Credcheckflag" (change)="CredcheckAllCheckBox($event)">
                    </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        <input type="checkbox" [checked]="element.checked" (change)="CredcheckEnableDisableBtn(element.credentialId, $event)"> 
                    </td>
                </ng-container>

                <ng-container matColumnDef="userName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
                    <td mat-cell *matCellDef="let element"> 
                        <span *ngIf="element.userName!=null">{{element.userName}}</span> 
                        <span *ngIf="element.userName==''">-</span> 
                    </td>
                </ng-container>
                <ng-container matColumnDef="password">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Password</th>
                    <td mat-cell *matCellDef="let element"> <span *ngIf="element.password!=null">*******</span> <span *ngIf="element.password==''">-</span> </td>
                </ng-container>
                
                <ng-container matColumnDef="createdBy">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Created By</th>
                    <td mat-cell *matCellDef="let element"> 
                        <span *ngIf="element.createdBy!=null">{{element.createdBy}}</span> 
                        <span *ngIf="element.createdBy==''">-</span> 
                    </td>
                </ng-container>
              
                <ng-container matColumnDef="createdTimeStamp">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Date</th>
                    <td mat-cell *matCellDef="let element"> <span *ngIf="element.createdTimeStamp!=null">{{element.createdTimeStamp | date}} {{element.createdTimeStamp.split("T")[1].split(".")[0]}}</span> <span *ngIf="element.createdTimeStamp==''">-</span> </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns1; sticky: true"></tr>
                <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
            </table>
        
        </div>
            <mat-paginator #paginator2 [pageSize]="5" [showFirstLastButtons]="true"></mat-paginator>
    </div>


    <div id="createcredentials" class="rpa-modal">
        <div class="rpa-modal-content">
            <div class="rpa-modal-header">
                <span class="rpa-modal-close" (click)="closecredentials()">&times;</span>
                <h4>Create Credentials</h4>
            </div>
            <div class="container">
                <form [formGroup]="insertForm" (ngSubmit)="savedata()">
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <label for="userName">Email<span style="color:red">*</span></label>
                            <input type="text" maxlength="51" class="form-control data" formControlName="userName" #userName value="" placeholder="Enter Email">
                            <span *ngIf="(insertForm.get('userName').invalid && insertForm.get('userName').touched) && !insertForm.controls['userName'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan">Email Required*</span>
                            <div *ngIf="insertForm.controls['userName'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan">
                                Maximum of 50 characters
                            </div>
                        </div>
                        
                        <div class="col-md-3 formelement">
                            <label for="password">Password<span style="color:red">*</span></label>
                            <input [type]="passwordtype1 ? 'text': 'password'" maxlength="51" class="form-control" formControlName="password" value="" placeholder="Enter Password" passwordToggle>
                            <span *ngIf="passwordtype1==false" class="fa fa-fw fa-eye field-icon" (click)="passwordtype1 =!passwordtype1"></span>
                            <span *ngIf="passwordtype1==true" class="fa fa-fw fa-eye-slash field-icon" (click)="passwordtype1 =!passwordtype1"></span>

                            <span *ngIf="(insertForm.get('password').invalid && insertForm.get('password').touched) && !insertForm.controls['password'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan"> Password Required*</span>
                            <div *ngIf="insertForm.controls['password'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan">
                                Maximum of 50 characters
                            </div> 
                        </div>
              
                      
                    </div>
                    <div class="row">  
                        
                        
                    </div>
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <!-- <input type="checkbox" formControlName="activeStatus"> Active -->
                        </div>
                    </div>
                    <input type="button" class="btn btn-primary" value="Save" (click)="saveCredentials()" [disabled]="insertForm.invalid || submitted">
                    <input type="button" class="btn btn-primary" value="Reset" (click)="resetCredForm()">
                </form>
            </div>
        </div>
    </div>

    <div id="Updatecredntials" class="rpa-modal">
        <div class="rpa-modal-content">
            <div class="rpa-modal-header">
                <span class="rpa-modal-close" (click)="closecredentials()">&times;</span>
                <h4>Update Credentials</h4>
            </div>
            <div class="container">
                <form [formGroup]="updateForm" (ngSubmit)="credentialsupdate()">
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <label for="userName">Email<span style="color:red">*</span></label>
                            <input type="text" maxlength="51" class="form-control data" formControlName="userName" #userName value="" placeholder="Enter Email">
                            <span *ngIf="(updateForm.get('userName').invalid && updateForm.get('userName').touched) && !updateForm.controls['userName'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan">Email Required*</span>
                            <div *ngIf="updateForm.controls['userName'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan">
                                Maximum of 50 characters
                            </div>
                        </div>
                        
                        <div class="col-md-3 formelement">
                            <label for="password">Password<span style="color:red">*</span></label>
                            <input [type]="passwordtype1 ? 'text': 'password'" maxlength="51" class="form-control" formControlName="password" value="" placeholder="Enter Password" passwordToggle>
                            <span *ngIf="passwordtype1==false" class="fa fa-fw fa-eye field-icon" (click)="passwordtype1 =!passwordtype1"></span>
                            <span *ngIf="passwordtype1==true" class="fa fa-fw fa-eye-slash field-icon" (click)="passwordtype1 =!passwordtype1"></span>
                            <span *ngIf="(updateForm.get('password').invalid && updateForm.get('password').touched) && !updateForm.controls['password'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan"> Password Required*</span>
                            <div *ngIf="updateForm.controls['password'].hasError('maxlength')" style="color:red" class="fa fa-info-circle errspan">
                                Maximum of 50 characters
                            </div>  
                        </div>
                       
                        
                                             
                        
                    </div>
                    <div class="row">
                       
                        
                    </div>
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <!-- <input type="checkbox" [checked]="toggle" formControlName="activeStatus"> Active -->
                        </div>
                    </div>
                    <input type="button" class="btn btn-primary" value="Save" (click)="credentialsupdate()" [disabled]="updateForm.invalid || submitted">
                     <input type="button" class="btn btn-primary" value="Reset" (click)="resetupdateCredForm()">
                </form>
            </div>
        </div>
    </div>