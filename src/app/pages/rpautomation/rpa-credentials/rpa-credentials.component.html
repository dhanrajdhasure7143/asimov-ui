<div class="rpa-content-div mx-3" *ngIf="this.isButtonVisible || enableCredential">
    <div class="row credential-search-tools">
        <div class="rpa-env-search credential-search">            
            <input class="form-control toolbar-search" placeholder="Search" *ngIf="!isSearch" (keyup)="applyFilter1($event.target.value)">
            <img src="../../../../assets/images/search.svg" matSuffix *ngIf="!isSearch" class="testplus1">
        </div>
        <div class="env-data-tool credential-tools">
            <div *ngIf="!addflag" class="env-btn credential-btntool">
                <button class="tsttooltipbtn" value="Create" id="addbtn" (click)="createcredentials()">
                    <img src='../../../../assets/images/RPA/icon_latest/new-blue.svg'> 
                    <span class="testtooltip">New</span>
                </button>

            </div>
            <div *ngIf="addflag" class="env-btn credential-btntool">
                <button class="tsttooltipbtn" id="addbtn" disabled>
                    <img src='../../../../assets/images/RPA/icon_latest/plus dis.svg'> 
                    <span class="testtooltip">New</span>
                </button>

            </div>
            <div *ngIf="Credupdateflag == true" class="env-btn credential-btntool">
                <button id="updatebtn" class="tsttooltipbtn" (click)="updatecreddata()">       
                    <img src='../../../../assets/images/RPA/icon_latest/edit-blue.svg'> 
                    <span class="testtooltip">Modify</span>
                </button>    
            </div>   
            <div *ngIf="Credupdateflag == false" class="env-btn credential-btntool">    
                <button  id="updatebtn" data-placement="top" disabled>            
                    <img src='../../../../assets/images/RPA/icon_latest/edit-dis.svg'>     
                 <span class="testtooltip">Modify</span>        
                 </button>   
            </div>
            <div *ngIf="Creddeleteflag==true" class="env-btn credential-btntool">
                <button class="tsttooltipbtn" value="Delete" id="deletebtn" (click)="deleteCredentials()">
                    <img src='../../../../assets/images/RPA/icon_latest/delete-blue.svg'> 
                    <span class="testtooltip">Delete</span>
                    </button>
            </div>       
            <div *ngIf="Creddeleteflag==false" class="env-btn credential-btntool">
                <button  data-placement="top" id="deletebtn"  disabled>
                    <img src='../../../../assets/images/RPA/icon_latest/delete-dis.svg'>
                <span class="testtooltip">Delete</span>
                </button>
            </div>

        </div>

    </div>
    
    <div class="col-md-12 con-envr">
        <div class="credential-tablegrid">
            <table mat-table #sort2="matSort" [dataSource]="dataSource2" matSort class="RPA table"  id="listofcred">
                
                <ng-container matColumnDef="check">
                    <th mat-header-cell *matHeaderCellDef>
                        <input [disabled]="Credcheckeddisabled" type="checkbox" id="Credcheckall" [checked]="Credcheckflag" (change)="CredcheckAllCheckBox($event)">
                    </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        <input type="checkbox" [checked]="element.checked" (change)="CredcheckEnableDisableBtn(element.credentialId, $event)"> 
                    </td>
                </ng-container>

                <ng-container matColumnDef="userName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
                    <td mat-cell *matCellDef="let element"> 
                        <span *ngIf="element.userName!=null">{{element.userName}}</span> 
                        <span *ngIf="element.userName==''">-</span> 
                    </td>
                </ng-container>
                <ng-container matColumnDef="password">
                    <th mat-header-cell *matHeaderCellDef >Password</th>
                    <td mat-cell *matCellDef="let element"> <span *ngIf="element.password!=null">*******</span> <span *ngIf="element.password==''">-</span> </td>
                </ng-container>

                <ng-container matColumnDef="serverName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Server Type</th>
                    <td mat-cell *matCellDef="let element"> 
                        <span *ngIf="element.serverName!=null">{{element.serverName}}</span> 
                        <span *ngIf="element.serverName==''">-</span> 
                    </td>
                </ng-container>

                
                <ng-container matColumnDef="categoryName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
                    <td mat-cell *matCellDef="let element"> 
                        <span *ngIf="element.categoryName!=null">{{element.categoryName}}</span> 
                        <span *ngIf="element.categoryName==''">-</span> 
                    </td>
                </ng-container>
                
                <ng-container matColumnDef="createdBy">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Created By</th>
                    <td mat-cell *matCellDef="let element"> 
                        <span *ngIf="element.createdBy!=null">{{element.createdBy}}</span> 
                        <span *ngIf="element.createdBy==''">-</span> 
                    </td>
                </ng-container>
              
                <ng-container matColumnDef="createdTimeStamp">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Date</th>
                    <td mat-cell *matCellDef="let element">{{element.createdTimeStamp_converted}}</td>
                </ng-container>

                <ng-container matColumnDef="noData">
                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns1; sticky: true"></tr>
                <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(credentials.length==0 || credentials.errorMessage=='No data found')}"></tr>
            </table>
            <div>
              </div>

        </div>
        <mat-paginator #paginator3 [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50]" [showFirstLastButtons]="true" class="newpaginationdiv"></mat-paginator> 

    </div>
    
 

    <div id="createcredentials" class="rpa-modal">
        <div class="rpa-modal-content">
            <div class="rpa-modal-header">
                <span class="rpa-modal-close" (click)="closecredentials()"><img src="../../../../assets/images/RPA/icon_latest/close.svg" alt=""></span>
                <h4>Create Credentials</h4>
            </div>
            <div class="modal-body">
                <div class="container m-contanier form-body">
                    <form [formGroup]="insertForm" (ngSubmit)="savedata()">
                        
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="userName">Email<span class="star">*</span></label>
                                <input type="text" maxlength="51" class="form-control data" formControlName="userName" #userName value="" 
                                pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}" placeholder="Enter Email">
                                <span *ngIf="(insertForm.get('userName').invalid && insertForm.get('userName').touched) && !insertForm.controls['userName'].hasError('pattern')"  class="errspan required">Email Required*</span>
                                <span *ngIf="(insertForm.controls['userName'].hasError('pattern') || insertForm.get('userName').hasError('required')) && !insertForm.get('userName').hasError('required')"  class="errspan required">Enter valid email address</span>
                                <div *ngIf="insertForm.controls['userName'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
                            
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="password">Password<span class="star">*</span></label>
                                <input [type]="passwordtype1 ? 'text': 'password'" maxlength="51" class="form-control" formControlName="password" value="" placeholder="Enter Password" passwordToggle>
                                <span *ngIf="passwordtype1==false" (click)="passwordtype1 =!passwordtype1" class="pdicon">
                                    <img src="../../../../../assets/images/Projects/eye-show.svg"  class="testplus1">
                                </span>
                                <span *ngIf="passwordtype1==true" (click)="passwordtype1 =!passwordtype1" class="pdicon">
                                    <img src="../../../../../assets/images/Projects/eye-hide.svg" class="testplus1">
                                </span>
    
                                <span *ngIf="(insertForm.get('password').invalid && insertForm.get('password').touched) && !insertForm.controls['password'].hasError('maxlength')"  class="errspan required"> Password Required*</span>
                                <div *ngIf="insertForm.controls['password'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div> 
                            </div>
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="categoryId">Category<span class="star">*</span></label>
                                <select type="text" class="form-control" formControlName="categoryId"  >
                                    <option value="0" disabled>Select Category</option>
                                    <option [value]="category.categoryId" *ngFor="let category of categoryList">{{category.categoryName}}</option>
                                </select>   
                                 <span *ngIf="(insertForm.get('categoryId').invalid && insertForm.get('categoryId').touched)"  class="errspan required">Category Required*</span>
                            </div>
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control"  for="serverName">Mail Server<span class="star">*</span></label>
                                <select class="form-control" value="" formControlName="serverName">
                                    <option value="" [selected]="true">--Select Mail Server--</option>
                                    <option value="Office365">Office365</option>
                                    <option value="G-mail">G-mail</option>            
                                  </select>
                                <span *ngIf="insertForm.get('serverName').invalid && insertForm.get('serverName').touched"  class="errspan required"> Server Type Required*</span>
                            </div>
    
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="inBoundAddress">In Bound Address<span class="star">*</span></label>
                                <input type="text" maxlength="51" class="form-control data" formControlName="inBoundAddress" #inBoundAddress value="" placeholder="Enter In Bound Address">
                                <span *ngIf="(insertForm.get('inBoundAddress').invalid && insertForm.get('inBoundAddress').touched) && !insertForm.controls['inBoundAddress'].hasError('maxlength')"  class="errspan required">In Bound Address is required*</span>
                                <div *ngIf="insertForm.controls['inBoundAddress'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
                      
    
                      
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="inBoundAddressPort">In Bound Address Port<span class="star">*</span></label>
                                <input type="text" (keydown)="inputNumberOnly($event)" maxlength="6" class="form-control data" formControlName="inBoundAddressPort" #inBoundAddressPort value="" placeholder="Enter In Bound Address Port">
                                <span *ngIf="(insertForm.get('inBoundAddressPort').invalid && insertForm.get('inBoundAddressPort').touched) && !insertForm.controls['inBoundAddressPort'].hasError('maxlength')"  class="errspan required">In Bound Address Port is required*</span>
                                <div *ngIf="insertForm.controls['inBoundAddressPort'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
    
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="outBoundAddress">Out Bound Address<span class="star">*</span></label>
                                <input type="text" maxlength="51" class="form-control data" formControlName="outBoundAddress" #outBoundAddress value="" placeholder="Enter Out Bound Address">
                                <span *ngIf="(insertForm.get('outBoundAddress').invalid && insertForm.get('outBoundAddress').touched) && !insertForm.controls['outBoundAddress'].hasError('maxlength')"  class="errspan required">Out Bound Address is required*</span>
                                <div *ngIf="insertForm.controls['outBoundAddress'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
    
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="outboundAddressPort">Out Bound Address Port<span class="star">*</span></label>
                                <input type="text" (keydown)="inputNumberOnly($event)" maxlength="6" class="form-control data" formControlName="outboundAddressPort" #outboundAddressPort value="" placeholder="Enter Out Bound Address Port">
                                <span *ngIf="(insertForm.get('outboundAddressPort').invalid && insertForm.get('outboundAddressPort').touched) && !insertForm.controls['outboundAddressPort'].hasError('maxlength')"  class="errspan required">Out Bound Address Port is required*</span>
                                <div *ngIf="insertForm.controls['outboundAddressPort'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>

                            <div class="form-footer">
                                
                                <button class="btn btn-default btn-test" (click)="resetCredForm()" >Reset</button>
                                <button class="btn btn-primary"[disabled]="insertForm.invalid || submitted" (click)="saveCredentials()" >Save</button>
                              </div>
                    </form>
                </div>

            </div>
           
        </div>
    </div>

    <div id="Updatecredntials" class="rpa-modal">
        <div class="rpa-modal-content">
            <div class="rpa-modal-header">
                <span class="rpa-modal-close" (click)="closecredentials()"><img src="../../../../assets/images/RPA/icon_latest/close.svg" alt=""></span>
                <h4>Update Credentials</h4>
            </div>
            <div class="modal-body" *ngIf="Credupdateflag==true">
                <div class="container m-contanier form-body">
                    <form [formGroup]="updateForm" (ngSubmit)="credentialsupdate()">
                       
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="userName">Email<span class="star">*</span></label>
                                <input type="text" maxlength="51" class="form-control data" formControlName="userName" #userName value=""
                                pattern="^\S*[@]\S*[.]\S*$" placeholder="Enter Email">
                                <span *ngIf="(updateForm.get('userName').invalid && updateForm.get('userName').touched) && !updateForm.controls['userName'].hasError('maxlength')"  class="errspan required">Email Required*</span>
                                <span *ngIf="updateForm.controls['userName'].hasError('pattern')"  class="errspan required">Enter valid email address</span>
                                <div *ngIf="updateForm.controls['userName'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
                            
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="password">Password<span class="star">*</span></label>
                                <input [type]="passwordtype1 ? 'text': 'password'" maxlength="51" class="form-control" formControlName="password" value="" placeholder="Enter Password" passwordToggle>
                                <span *ngIf="passwordtype1==false" (click)="passwordtype1 =!passwordtype1" class="pdicon">
                                    <img src="../../../../../assets/images/Projects/eye-show.svg"  class="testplus1">
                                </span>
                                <span *ngIf="passwordtype1==true" (click)="passwordtype1 =!passwordtype1" class="pdicon">
                                    <img src="../../../../../assets/images/Projects/eye-hide.svg"  class="testplus1">
                                </span>
                                <span *ngIf="(updateForm.get('password').invalid && updateForm.get('password').touched) && !updateForm.controls['password'].hasError('maxlength')"  class="errspan required"> Password Required*</span>
                                <div *ngIf="updateForm.controls['password'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>  
                            </div>
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="categoryId">Category<span class="star">*</span></label>
                                <select type="text" class="form-control" formControlName="categoryId" >
                                    <option value="0" disabled>Select Category</option>
                                    <option [value]="category.categoryId" *ngFor="let category of categoryList">{{category.categoryName}}</option>
                                </select>   
                                 <span *ngIf="(updateForm.get('categoryId').invalid && updateForm.get('categoryId').touched)"  class="errspan required">Category Required*</span>
    
                               
    
                            </div>
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="serverName">Mail Server<span class="star">*</span></label>
                                <select class="form-control" formControlName="serverName">
                                    <option value="" [selected]="true">--Select Mail Server--</option>
                                    <option value="Office365">Office365</option>
                                    <option value="G-mail">G-mail</option>               
                                  </select>
                                <span *ngIf="updateForm.get('serverName').invalid && updateForm.get('serverName').touched"  class="errspan required"> Server Type Required*</span>
                            </div>
                                           
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="inBoundAddress">In Bound Address<span class="star">*</span></label>
                                <input type="text" maxlength="51" class="form-control data" formControlName="inBoundAddress" #inBoundAddress value="" placeholder="Enter In Bound Address">
                                <span *ngIf="(updateForm.get('inBoundAddress').invalid && updateForm.get('inBoundAddress').touched) && !updateForm.controls['inBoundAddress'].hasError('maxlength')"  class="errspan required">In Bound Address is required*</span>
                                <div *ngIf="updateForm.controls['inBoundAddress'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
    
                          
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="inBoundAddressPort">In Bound Address Port<span class="star">*</span></label>
                                <input type="text" (keydown)="inputNumberOnly($event)" maxlength="6" class="form-control data" formControlName="inBoundAddressPort" #inBoundAddressPort value="" placeholder="Enter In Bound Address Port">
                                <span *ngIf="(updateForm.get('inBoundAddressPort').invalid && updateForm.get('inBoundAddressPort').touched) && !updateForm.controls['inBoundAddressPort'].hasError('maxlength')"  class="errspan required">In Bound Address Port is required*</span>
                                <div *ngIf="updateForm.controls['inBoundAddressPort'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
    
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="outBoundAddress">Out Bound Address<span class="star">*</span></label>
                                <input type="text" maxlength="51" class="form-control data" formControlName="outBoundAddress" #outBoundAddress value="" placeholder="Enter Out Bound Address">
                                <span *ngIf="(updateForm.get('outBoundAddress').invalid && updateForm.get('outBoundAddress').touched) && !updateForm.controls['outBoundAddress'].hasError('maxlength')"  class="errspan required">Out Bound Address is required*</span>
                                <div *ngIf="updateForm.controls['outBoundAddress'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
    
                            <div class="col-md-12 p-0 form-group">
                                <label class="label-control" for="outboundAddressPort">Out Bound Address Port<span class="star">*</span></label>
                                <input type="text" (keydown)="inputNumberOnly($event)" maxlength="6" class="form-control data" formControlName="outboundAddressPort" #outboundAddressPort value="" placeholder="Enter Out Bound Address Port">
                                <span *ngIf="(updateForm.get('outboundAddressPort').invalid && updateForm.get('outboundAddressPort').touched) && !updateForm.controls['outboundAddressPort'].hasError('maxlength')"  class="errspan required">Out Bound Address Port is required*</span>
                                <div *ngIf="updateForm.controls['outboundAddressPort'].hasError('maxlength')"  class="errspan required">
                                    Maximum of 50 characters
                                </div>
                            </div>
    
                            
                            
                       
                        <div class="form-footer">
                            
                            <button class="btn btn-default btn-test" (click)="resetupdateCredForm()" >Reset</button>
                            <button class="btn btn-primary"[disabled]="updateForm.invalid || submitted" (click)="credentialsupdate()" >Modify</button>
                        </div>
                       
    
                    </form>
                </div>

            </div>
            
        </div>
    </div>