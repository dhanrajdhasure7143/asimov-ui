<div class="h-100 main-screen">
    <div class="screen-wrapper">
        <div class="top-section">
            <div class="bot-info">
                <div class="bot-header">
                    <div class="row" style="margin-top: 10px !important;">
                        <div class="bot-name col-6">{{agentName}} Agents</div>
                        <div class="add-more-agents col-6" style="display: flex; justify-content: flex-end; gap: 10px; margin-inline-start: auto; align-items: center;">
                            <button class="manage-subscription-btn" (click)="navigateManageSubscription()">Manage Subscription</button>  
                            <button class="add-more-qty" (click)="showAddAgentDialog($event)">Add More Agents</button>
                        </div>
                        <div lass="bot-name col-6">
                            <span class="agent-expire">Expires: {{agentExpire?? "NA" |date:'MMM dd, y'}}</span>
                        </div>
                    </div>
                    <div class="h-100 main-screen">
                        <div >
                            <div *ngIf="showSkeleton" class="col-12">
                                <div class="p-grid p-formgrid skeleton-box row">
                                    <div class="p-field skeleton-card-box col-3" *ngFor="let _ of [1, 2, 3, 4, 5, 6,7,8]">
                                      <div class="custom-skeleton">
                                        <div class="skeleton-header">
                                          <p-skeleton shape="circle" size="4rem" styleClass="circle-skeleton"></p-skeleton>
                                          <p-skeleton width="7rem" height="1rem"></p-skeleton>
                                          <p-skeleton width="2rem" height="2rem"></p-skeleton>
                                        </div>
                                        <p-skeleton width="100%" height="50px" styleClass="info-skeleton"></p-skeleton>
                                      </div>
                                    </div>
                                </div>
                            </div>


                            <div class="single-outer-agents-cards" *ngIf="!showSkeleton">
                                <div class="card position-relative single-inner-agents-cards w-100" *ngFor="let agent of subAgentList">
                                    <div class="card-content">
                                        <div class="top-image-header-section-card">
                                            <div class="bot-image">
                                                <img src="../../../../assets/images/mini_bot.svg" alt="mini_bot">
                                            </div>
                                            <div class="agent-name-sec">
                                                <h3 class="new-agent-heading-section" pTooltip="{{ agent.subAgentName }}" tooltipPosition="top">{{ truncateText(agent.subAgentName, 10) }}</h3>
                                            </div>
                                        </div>
                                        <div class="expiry-date bottom-expires-section">
                                            <div class="single-expiry-dates">
                                                <p class="inner-dates-sec text-left m-0" *ngIf="agent.lastExecution">Last run date: {{ agent.lastExecution |date:'MMM dd, y hh:mm' }}</p>
                                            </div>
                                            <div class="single-expiry-dates">
                                                <p class="inner-dates-sec text-left m-0">
                                                    <!-- <span *ngIf="!agent.isExpired">Expires: {{ agent.expiryDate?? "NA" |date:'MMM dd, y' }}</span> -->
                                                    <span *ngIf="agent.isExpired" style="color: red;">Expired: {{ agent.expiryDate?? "NA" |date:'MMM dd, y' }}</span>
                                                </p>
                                            </div>
                                        </div>
                                        <!-- Add more details as needed -->
                                    </div>
                                    <div class="bottom-bin-section" *ngIf="agent.isExpired">
                                        <button type="button" class="bin-outer-btn">
                                            <img src="../../../../assets/images/agent/bin.svg" alt="">
                                        </button>
                                    </div>
                                    <div class="top-right-view-renew-btn">
                                        <button type="button" class="top-right-changable-btn" (click)="agent.isExpired ? handleRenewBtn(agent) : viewAgentDetails(agent)" [ngClass]="agent.isExpired ? 'active-re' : 'active-vi'">{{agent.isExpired ? 'Renew' : 'View'}}</button>
                                    </div>
                                </div>                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <p-confirmDialog 
        [style]="{width: '30vw'}" 
        position="center" 
        [baseZIndex]="10000" 
        [closable]="false">
    </p-confirmDialog>

    <p-dialog [(visible)]="displayAddAgentDialog" [draggable]="true" [style]="{width: '40vw', height:'27vw'}" [modal]="true"[showHeader]="false" [closable]="true" styleClass="custom-dialog">
        <app-ai-agent-add-agents-dialog [botName]="agentName" [selectedAgent]="selectedAgent" (close)="closeDialog()"></app-ai-agent-add-agents-dialog>
    </p-dialog>