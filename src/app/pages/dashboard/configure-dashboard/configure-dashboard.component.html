<p-splitter [style]="{'height': 'auto'}" [panelSizes]="panelSizes" layout="horizontal">
  <ng-template pTemplate>
    <div class="container-fluid">
      <div class="col-md-12 py-3 px-3 mt-3">
         <div class="row main-content-head">
            <div class="col-md-4 pl-0">
               <h3>
                  <span class="title_text">{{_paramsData.dashboardName}} </span>
               </h3>
            </div>
            <div class="col-md-8 pr-0 text-right">
              <button *ngIf="isCreate==1" class="btn btn-primary eiap-btn" (click)="saveDashBoard()">Done</button>
              <button *ngIf="isCreate==0" class="btn btn-primary eiap-btn"(click)="canelUpdate()">Cancel</button>
              <button *ngIf="isCreate==0" class="btn btn-primary eiap-btn"(click)="Updatedconfiguration()">Update</button>
              <button class="btn-dots eiap-btn" (click)="menu.toggle($event)">
                <img src="./../../../../assets/images-n/dashboard/horizontaldots.svg" alt="Actions" >
              </button>
              <p-menu class="actionspopmenu p-menu-graph1"  #menu [popup]="true"  [model]="items">
             </p-menu>
            </div>
         </div>

        </div>
      
        <div class="col-md-12">
          <div class="well flex-container">
             <div class="img-div">
                <img src="..\assets\images-n\dashboard\warning2.svg"  class="warng-img"/>
             </div>
             &nbsp;&nbsp;
             <div>
                <p class="warning-p" >Your currently editing your dashboard. Changes will be saved after clicking the done button.</p>
             </div>

        </div>
        <div class=" flex-container">
           <div class="img-div">
           </div>
           <div>
           </div>
        </div>
     </div>
      <div class="col-md-12 px-3 sec2-align" pDroppable="item" (onDrop)="drop()">
        <div class="row">


          <div class="col-md-3 sec-1" *ngFor="let item of addedMetrics;let j =index"
            >
            <div class="well1-dynmic">
              <div class="flex-container text-control">
                <div class="img-div">
                  <!-- <img src="..\assets\images-n\dashboard\{{item.src}}" class="dashbrd-img"/> -->
                  <i class="pi pi-1 pi-times right overlay-icon" (click)="onDeactivate(item,j, 'metrics')" ></i>
                </div>
                <div class="new-dynamic">
                   <h3>{{item.metricValue}}</h3>
                   <p>{{item.name}}</p>
                </div>
             </div>
              
            </div>
          </div>

          <div class="col-md-3 sec-1" *ngFor="let item of defaultMetricsData" >
            <div class="well1">
              <div class="flex-container">
                <div class="img-div">
                  <img src="..\assets\images\Projects\add-gadget.svg" width="40%" />
                </div>
                <div>
                  <p class="drag-sec">Drag or Add <br> a <span style="font-weight:600;">Metric</span> to this
                    column </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12 py-3 px-3 metrics-space">
        <div class="row">
          <div class="col-md-6 sec-1"  *ngFor="let widget of addedWidgets; let j=index" >
            <div class="well1-dynmic graphs-align" >
               <span class="h5">{{widget.name}}</span> 
               <i class="pi pi-times right overlay-icon"
                  (click)="onDeactivate(widget,j, 'widgets')"></i>
                  
               <div  class="" style="text-align: center;margin:20px;">
                  <div *ngIf="widget.widget_type!='table'">
                     <p-chart [type]="widget.widget_type" class="w-100" [data]="widget.SampleData" height="270"  [options]="widget.chartOptions" ></p-chart>
                  </div>
                 <div *ngIf="widget.widget_type=='table'">
                  <p-table
                  #myTab
                  [value]="widget.sampleData.datasets[0].data"
                  [scrollable]="true"
                  scrollHeight="280px"
                  [columns]="widget.sampleData.labels"
              >
                  <ng-template pTemplate="header" 
                               let-columns>
                      <tr>
                          <th *ngFor="let col of columns">
                              {{ col.header }}
                          </th>
                      </tr>
                  </ng-template>
                
                  <ng-template pTemplate="body" 
                               let-people>
                      <tr>
                          <td>
                              {{ people.firstname }}
                          </td>
                          <td>
                              {{ people.lastname }}
                          </td>
                          <td>
                              {{ people.age }}
                          </td>
                      </tr>
                  </ng-template>
              </p-table>
                 </div>
                 <!-- <div *ngIf="widget.widget_type=='bar'">
                     <p-chart type="bar" class="w-100" [data]="widget.sampleData" height="245"></p-chart>
                  </div> -->
                   <!-- <div *ngIf="widget.widget_type=='pie'">
                     <p-chart type="bar" class="w-100" [data]="widget.sampleData" [options]="widget.chartOptions" height="270"></p-chart>
                  </div>
                  <div *ngIf="widget.widget_type=='bar'">
                     <p-chart type="doughnut" class="w-100"  [data]="widget.sampleData" height="270"></p-chart>
                  </div>
                  <div *ngIf="widget.widget_type=='pie'">
                     <p-chart type="line" class="w-100"  [data]="widget.sampleData" height="270"></p-chart>
                  </div>
                  <div *ngIf="widget.widget_type=='TABLE'">
                     <div *ngIf ="isShow">
              <p-table >
                <ng-template pTemplate="header">
                    <tr>
                        <th>Vin</th>
                        <th>Year</th>
                        <th>Brand</th>
                        <th>Color</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-car>
                    <tr>
                        <td>Test1</td>
                        <td>Test2</td>
                        <td>Test3</td>
                        <td>Test4</td>
                    </tr>
                </ng-template>
            </p-table>
          </div>
                  </div> -->
               </div>
             
            </div>
           
           
          
          </div>
          <!-- <div class="col-md-6 sec-1" >
            <div class="well1-dynmic" >
          <div *ngIf ="isShow">
            <p-table >
              <ng-template pTemplate="header">
                  <tr>
                      <th>Vin</th>
                      <th>Year</th>
                      <th>Brand</th>
                      <th>Color</th>
                  </tr>
              </ng-template>
              <ng-template pTemplate="body" let-car>
                  <tr>
                      <td>Test1</td>
                      <td>Test2</td>
                      <td>Test3</td>
                      <td>Test4</td>
                  </tr>
              </ng-template>
          </p-table>
        </div>
        </div></div> -->
          <div class="col-md-6 sec-1" *ngIf="dynamicDashBoard.widgets.length<1" >
            <div class="well1" style="height:395px;">
              <div class="" style="text-align: center;margin-top:25%">
                <div>
                  <img src="..\assets\images\Projects\add-gadget.svg" width="80px" />
                </div>
                <div>
                  <p class="mt-2 mb-0" style="margin-bottom:0px;">Drag or Add a <span style="font-weight:600;">Metric</span> to this
                    column </p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 sec-1" *ngIf="dynamicDashBoard.widgets.length<2" >
            <div class="well1" style="height:395px;">
              <div class="" style="text-align: center;margin-top:25%">
                <div>
                  <img src="..\assets\images\Projects\add-gadget.svg" width="80px" />
                </div>
                <div>
                  <p class="mt-1" style="margin-bottom:0px;">Drag or Add a <span style="font-weight:600;">Metric</span> to this
                    column </p>
                </div>
              </div>
            </div>
            <div class=" flex-container">
              <div class="img-div">
              </div>
              <div>
              </div>
            </div>
          </div>
         
        </div>
      </div>
    </div>

  </ng-template>
  <ng-template pTemplate>
    <p-tabView class="tab-primest">
      <p-tabPanel header="Metrics" [headerStyle]="{'font-size': '20px'}" >
        <div class="col-md-12 mb-2 p-0" style="height:50px;">
          <!-- <span class="p-input-icon-right">
            <i class="pi pi-search"></i>
            <input type="text" pInputText  placeholder="Search">         
        </span> -->
          <div class="row">
            <div class="col-md-6 pl-0" style="float:right">
              <!-- <input class="form-control toolbar-search" type="text" placeholder="Search">
              <mat-icon matSuffix style="font-size: 1.2em">
                <img src="../../../../assets/images/search.svg" alt="" class="search-align">
              </mat-icon> -->
            
             
            </div>
            <div class="col-md-6 form-group pr-0 bps-labcls" style="float:right">
             
              <select class="form-control data">
                <option value="">All metrics</option>
              </select>
            </div>
          </div>
        </div>
        <div *ngFor="let item of metrics_list; let i=index">
          <div class="col-md-12 mb-2 p-0" pDraggable="item" pDroppableDisabled="true" (onDragStart)="dragStart(item)"
            (onDragEnd)="dragEnd()" (click)="onSelectMetric(item,i)">
            <div class="flex-container">
              
              <!-- <div class="img-div">
                <img src="..\assets\images-n\dashboard\{{item.src}}" [alt]="item.name" width="60px" height="60px"
                  style="margin-right:20px;" />
              </div> -->
              <div>
                <h5>{{item.name}}</h5>
                <i class="pi pi-check" *ngIf="item.metricAdded==true"></i>
                <p style="font-size: 14px; color: #808080cc;">{{item.description}}</p>
              </div>
            </div>
          </div>
        </div>
      </p-tabPanel>
      <p-tabPanel header="Widgets" [headerStyle]="{'font-size': '20px'}" >
        <div class="col-md-12 mb-2" style="height:50px;">
          <div class="col-md-6"></div>
          <div class="col-md-6 form-group pr-0 bps-labcls" style="float:right">
            <select class="form-control data">
              <option value="">All Widgets</option>
            </select>
          </div>
        </div>
        <div *ngFor="let widget of widgetslist; let i=index"  >
          <div class="col-md-12 mb-2 p-0"  (click)="addWidget(widget,i)" >
          <div class="flex-container">
            
            <div class="img-div" style="margin-right:20px;">
              <img src="..\assets\images-n\dashboard\chart1.png" width="60px" height="55px" />
              <!-- <p-chart [type]="widget.widget_type" class="w-100" [data]="widget.SampleData" height="55px"  [options]="widget.chartOptions" ></p-chart> -->

            </div>

            <div>
              <h5>{{widget.name}}</h5>
              <i class="pi pi-check right" *ngIf="widget.widgetAdded==true"></i>
              <p style="font-size: 14px; color: #808080cc;">{{widget.description}}</p>
            </div>
          </div>
          </div>
        </div>
      
      </p-tabPanel>
    </p-tabView>
    <span class="splitter-headers">
      <img *ngIf="isShowExpand" src="../../../assets/images-n/projects/minimize.svg"
      (click)="minimizeFullScreen()" class="expandsvgimg" pTooltip="Minimize" tooltipPosition="bottom"/>
  <img *ngIf="!isShowExpand" src="../../../assets/images-n/projects/maximize.svg"
      (click)="expandFullScreen()" class="expandsvgimg" pTooltip="Maximize" tooltipPosition="bottom"/>
  <a (click)="closeSplitOverlay()" class="closeoverlay"><img src="./../../../../assets/images-n/projects/close-circle-line.svg"
          alt="close" pTooltip="Close" tooltipPosition="bottom"></a>
         
        </span> 
 
  </ng-template>
</p-splitter>