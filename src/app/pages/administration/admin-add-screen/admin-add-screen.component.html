<div class="row">
    <mat-card id="projects_list_screen" class="h-100">
      <div class="row module-heading title">
        <span class="module-back-button" routerLink="/pages/admin/admin-screen-list">
          <i aria-hidden="true" class="fas fa-arrow-left"></i>
        </span>
        <span class="module-header-title"*ngIf="!labelupdate">Create Screen</span>
        <span class="module-header-title"*ngIf="labelupdate">Update Screen</span>
      </div>
      <div class="card-form h-scroll" style="margin-top: 10px;">
        <form [formGroup]="insertForm" class="col-md-12 row" style="width: 141%;">
          <div class="col-md-5">
            <div class="form-group col-sm-10">
              <label class="label-control">Screen Name <span class="star">*</span></label>
              <input type="text" formControlName="screen_Name" placeholder="Enter Screen Name" class="form-control" />
              <span *ngIf="(insertForm.get('screen_Name')!.invalid && insertForm.get('screen_Name')!.touched)"
                class="star">
                Screen Name is Required*
              </span>
            </div>
            <div class="form-group col-sm-10">
              <input class="form-check-input" formControlName="allow_Insert" type="checkbox" name="inlineRadioOptions"
                value="option1" />&nbsp;
              <label class="label-control" for="screenname">Allow Insert</label>&nbsp;&nbsp;&nbsp;&nbsp;
              <input class="form-check-input" formControlName="allow_Edit" type="checkbox" name="inlineRadioOptions"
                value="option1" />&nbsp;
              <label class="label-control" for="femaleGender">Allow Edit</label>
            </div>
            <div class="form-group col-sm-10">
              <label class="label-control" formControlName="default_Sort" ngDefaultControl>Default Sort</label>
              <select class="form-control data">
                <option value="">Select Option</option>
              </select>
            </div>
            <div class="form-group col-sm-10">
              <label class="label-control" for="lastName">Preferences</label>
              <select class="form-control data" formControlName="preferences">
                <option value="">Select Option</option>
              </select>
            </div>
            <div class="form-group col-sm-10">
              <label class="label-control">Insights</label>
              <select class="form-control data" formControlName="insights">
                <option value="">Select Option</option>
              </select>
            </div>
            <div class="form-group col-sm-10">
              <label class="label-control" formControlName="formType" ngDefaultControl>Form Type</label>
              <select class="form-control data">
                <option value="">Select Option</option>
              </select>
            </div>
            <div class="col-sm-4"></div>
          </div>

          <div class="col-md-4">
            <div class="row">
              <div class="form-group col-sm-10">
                <label class="label-control">Table Name <span class="star">*</span></label>
                <select class="form-control data" formControlName="table_Name"
                  (change)="onChangeTableName($event.target)" [attr.disabled]="isDisabled ? '' : null">
                  <option value="" hidden disabled>Select Option</option>
                  <option value="null" hidden disabled>Select Option</option>
                  <option value="undefined" hidden disabled>Select Option</option>
                  <option *ngFor="let table of tabledata"> {{table}}</option>
                </select>
                <span *ngIf="(insertForm.get('table_Name')!.invalid && insertForm.get('table_Name')!.touched)"
                  class="star">
                  Table Name is Required*
                </span>
              </div>
              <div class="form-group col-sm-10">
                <input class="form-check-input" formControlName="allow_Delete" type="checkbox" name="inlineRadioOptions"
                  id="femaleGender" value="option1" />&nbsp;
                <label class="label-control">Allow Delete</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input class="form-check-input" formControlName="show_As_Child" type="checkbox"
                  name="inlineRadioOptions" id="femaleGender" value="option1" />&nbsp;
                <label class="label-control">Show As Child</label>
              </div>
              <div class="form-group col-sm-10">
                <label class="label-control">Default Filter Clause</label>
                <input type="text" formControlName="default_Filter_Clause" class="form-control" type="text"
                  placeholder="Enter Filter Clause">
              </div>
              <div class="form-group col-sm-10">
                <label class="label-control">Row Count</label>
                <input class="form-control data" formControlName="row_Count" type="number" placeholder="Enter Count">
              </div>
              <div class="form-group col-sm-10">
                <label class="label-control">Select Screen Type <span class="star">*</span></label>
                <select class="form-control data" formControlName="screenType">
                  <option value="" hidden disabled>Select Option</option>
                  <option value="dashboard">Dashboard</option>
                  <option value="screen">Screen</option>
                </select>
                <span *ngIf="(insertForm.get('screenType')!.invalid && insertForm.get('screenType')!.touched)"
                  class="star">
                  Screen Type is Required*
                </span>
              </div>
            </div>
          </div>
          <div *ngIf="tablehide && !loading">
            <table mat-table [dataSource]="dataSource" class="w-100" aria-describedby="mytable">
              <ng-container *ngFor="let columnName of columnNames" [matColumnDef]="columnName">
                <th mat-header-cell *matHeaderCellDef>{{(columnName) | removeUnderscore | titlecase }}</th>
                <td mat-cell *matCellDef="let row">
                  <span *ngIf="columnName!='actions'">
                    {{ row[columnName] }}
                  </span>
                  <span *ngIf="columnName=='actions'">
                    <button placement="bottom" class=" editButton" [disabled]="editbutton"
                      (click)="edit(content,row)">
                      <img src="../../../../assets/images/Projects/edit-black.svg" alt="Edit" class="default-img">
                    </button>
                    &nbsp;&nbsp;
                    &nbsp;&nbsp;
                  </span>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="columnNames"></tr>
              <tr mat-row *matRowDef="let row; columns: columnNames"></tr>
            </table>
            <mat-paginator class="screen-paginator" #paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50]"
              [showFirstLastButtons]="true"></mat-paginator>
          </div>
          <div class="col-sm-10 btn-continue">
            <button type="button" class="btn btn-secondary" (click)="backToScreenList()"> Back </button> &nbsp;&nbsp;
            <button *ngIf="!screen_id" [disabled]="insertForm.invalid" class="btn btn-primary" (click)="save()"> Save
            </button>
            <button *ngIf="screen_id" class="btn btn-primary" (click)="updateData()"> Update </button>
          </div>
        </form>
      </div>
    </mat-card>
  </div>


<!-- </common-body> -->
<ng-template #content>
  <div class="modal-header modelprhead">
    <h4 class="modal-title pull-left">Edit Column</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalref?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="updateColumnForm" class="h-100">
      <div>
        <label for="" class="label-control">Column Name<span class="star">*</span></label>
        <input type="text" class="form-control" formControlName="ColumnName" placeholder="Enter Name">
      </div> <br>
      <div>
        <label for="" class="label-control">Column Label Name <span class="star">*</span></label>
        <input type="text" formControlName="DisplayName" class="form-control" placeholder="Enter Label Name">
      </div> <br>
      <div>
        <label for="" class="label-control">Widget Type <span class="star">*</span></label>
        <select class="form-control data" formControlName="widget_type">
          <option value="">Select Option</option>
          <option value="textbox">Text Box</option>
          <option value="select">Select Box</option>
          <option value="checkbox">Check Box</option>
          <option value="radio">Radio Button</option>
        </select>
      </div> <br>
      <div class="checkboxes">
        <label class="label-control"><input type="checkbox" formControlName="ShowGrid"> <span class="span">Show
            grid</span></label>
        <label class="label-control"><input type="checkbox" formControlName="ShowSearch"> <span class="span">Show in
            Search</span></label>
        <label class="label-control"><input type="checkbox" formControlName="ShowForm"></label> <span class="span">Show
          in
          Form</span> <br> <br>
        <label class="label-control">
          <input type="checkbox" formControlName="read_only">
          <span class="span">Read
            Only</span>
        </label>
        <label class="label-control"><input type="checkbox" formControlName="mandatory"> <span
            class="span">Mandatory</span></label>
      </div> <br>
      <div>
        <label for="" class="label-control">Length</label>
        <input type="text" formControlName="length" class="form-control" placeholder="Enter Length">
      </div> <br>
      <div>
        <label for="" class="label-control">Defualt Type</label>
        <select class="form-control data" formControlName="default_type">
          <option value="">Select Option</option>
          <option>Text</option>
        </select>
      </div> <br>
      <div>
        <label for="" class="label-control">Data Type</label>
        <input type="text" class="form-control" formControlName="data_type" placeholder="Enter Data type">
      </div> <br>
      <div>
        <label for="" class="label-control">Default Value</label>
        <input type="text" class="form-control" formControlName="DefaultValue" placeholder="Enter Value">
      </div> <br>
      <div>
        <label for="" class="label-control">Coloumn Order</label>
        <select class="form-control data" formControlName="ColumnOrder">
          <option value="">Select Option</option>
          <option>Text</option>
        </select>
      </div> <br>
      <div>
        <label for="" class="label-control">Text Align</label>
        <select class="form-control data" formControlName="text_align">
          <option value="">Select Option</option>
          <option *ngFor="let float of textAlign">{{float}}</option>
        </select>
      </div> <br>
      <div>
        <label for="" class="label-control">Width</label>
        <input type="text" class="form-control" formControlName="width" placeholder="Enter Width">
      </div> <br>
      <div>
        <label for="" class="label-control">Tool Tip</label>
        <input type="text" class="form-control" formControlName="tooltip" placeholder="Enter tooltip">
      </div> <br>
      <div>
        <label for="" class="label-control">Placeholder</label>
        <input type="text" class="form-control" formControlName="placeholder" placeholder="Enter placeholder">
      </div> <br>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-dark" (click)="modalref.hide()"> <img class="close" alt="">
      Cancel</button>
    <button type="button" class="btn btn-primary btn-space" (click)="updateColumn()"> Update </button>
  </div>
</ng-template>

<div class="spinoverlay" *ngIf="loading">
  <div class="spincenter">
    <img src='../../../../assets/images/EZFlow_Loader.gif' class="ezflow-loader" alt="loader" />
  </div>
</div>