<div class="grid-wrapper">
    <h2 class="grid-heading">AI Agents</h2>
    <div class="grid-container">
        <div *ngFor="let each of predefined_botsList" class="grid-item" (click)="onclickBot(each)">
            <div class="content">
                <div class="top-section">
                    <div class="bot-image">
                        <img src="../../../../assets/images/mini_bot.svg" alt="mini_bot">
                    </div>
                    <h3 class="bot-name">{{ each.predefinedBotName }}</h3>
                </div>
                
                <div class="bot-details-wrapper" [ngClass]="{'show-more': each.showMore}" #detailsWrapper>
                    <p class="bot-details">{{ each.details }}</p>
                </div>

                <span *ngIf="each.details.length > 200" class="show-more-btn" (click)="toggleDetails($event,each, detailsWrapper)">
                    {{ each.showMore ? 'Show Less' : 'Show More' }}
                </span>
            </div>
        </div>
        <div *ngIf="predefined_botsList.length ===0" class="centered-message">
            <img src="../../../../assets/images/mini_bot.svg" alt="mini_bot">
            No Agent Found ... Please Subscribe to the Agents
        </div>
    </div>

    <h2 class="search-heading">Explore More AI Agents</h2>
    <div class="search-container">
        <div class="search-bar-wrapper">
            <img src="../../../../assets/images/agent_search.svg" alt="mini_bot" class="search-icon">
            <input type="text" placeholder="Find Your Agent..." [disabled]="unsubscribed_agents.length === 0" [(ngModel)]="searchTerm" (input)="onSearch()" class="search-bar">
        </div>
    </div>
    <div class="grid-container">
        <div *ngFor="let each of filteredBotsList" class="grid-item" [ngClass]="{'highlighted': searchTerm && each.predefinedBotName.toLowerCase().includes(searchTerm.toLowerCase())}" (click)="onclickBot3(each)">
            <div class="content">
                <div class="top-section">
                    <div class="bot-image">
                        <img src="../../../../assets/images/mini_bot.svg" alt="mini_bot">
                    </div>
                    <h3 class="bot-name">{{ each.predefinedBotName }}</h3>
                </div>
                <div class="bot-details-wrapper" [ngClass]="{'show-more': each.showMore}" #detailsWrapper>
                    <p class="bot-details">{{ each.details }}</p>
                </div>

                <span *ngIf="each.details.length > 200" class="show-more-btn" (click)="toggleDetails($event,each, detailsWrapper)">
                    {{ each.showMore ? 'Show Less' : 'Show More' }}
                </span>
            </div>
        </div>
        <div *ngIf="unsubscribed_agents.length >=1 && filteredBotsList.length === 0" class="centered-message">
            <img src="../../../../assets/images/mini_bot.svg" alt="mini_bot">
            No Agent Found ...
        </div>
        <div *ngIf="unsubscribed_agents.length === 0" class="centered-message">
            <img src="../../../../assets/images/mini_bot.svg" alt="mini_bot">
            We are working on more AI Agents ...
        </div>
    </div>
</div>

<div class="custom-modal" *ngIf="displayModal">
    <div class="custom-modal-content">
        <div class="top-section-model">
            <div class="model-img">
                <img src="../../../../assets/images/mini_bot.svg" alt="mini_bot">
            </div>
            <h3 class="bot-name-model">{{ selectedBot?.predefinedBotName }}</h3>
        </div>
        <div class="model-details-wrapper">
            <p class="bot-details">{{ selectedBot?.details }}</p>
        </div>
        <div class="dialog-footer">
            <button class="show-less-btn" (click)="closeModal()">Show Less</button>
            <button class="create-agent-btn" (click)="createBot()">Create Agent</button>
        </div>
    </div>
</div>