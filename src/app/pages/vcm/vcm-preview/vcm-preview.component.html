<div class="h-100">
    <div class="row module-heading title">
        <div>
            <span class="module-back-button" routerLink="/pages/vcm/create-vcm">
                <i aria-hidden="true" class="fas fa-arrow-left"></i>
            </span>
            <span class="module-header-title">Preview - {{vcmName}}</span>
        </div>
        <div class="ml-auto submit">
            <button class="btn btn-primary" (click)="editVcm()">Edit</button>
            <button class="btn btn-primary" (click)="saveCreatedVcm()">Save</button>

        </div>
    </div>

    <div class="module-body">
        <mat-drawer-container class="example-container h-100" style="background-color: white;">
            <mat-drawer #drawer class="example-sidenav vcmprop" mode="side" position="end">
                <div class="close-btn">
                    <h3>{{processName}}</h3>
                    <img src="../../../../assets/images/VCM/VCM-close.svg" (click)="closeOverlay()" />
                </div>
                <mat-tab-group>
                    <mat-tab label="Properties">
                        <div class="editcontent">
                            <div class="col-md-12 form-group">
                                <label class="label-control">Process Name</label>
                                <input type="text" [disabled]="isPropDisabled" class="form-control" [(ngModel)]="processName">
                            </div>
                            <div class="col-md-12 form-group">
                                <label class="label-control">Process Owner</label>
                                <input type="text" [disabled]="isPropDisabled" class="form-control" placeholder="Select Process Owner" [(ngModel)]="processOwner">
                            </div>
                            <div class="col-md-12 form-group">
                                <label class="label-control">Process Description</label>
                                <textarea class="form-control" rows="5" [disabled]="isPropDisabled" placeholder="Enter Process Description" [(ngModel)]="processDesc"></textarea>
                            </div>
                        </div>
                    </mat-tab>
                    <mat-tab label="Documents">
                        <!-- <div class="col-md-12 form-group">
                            <h4 class="procname">{{processName}}</h4>
                        </div> -->
                        <div class="col-md-12 form-group files">
                            <p *ngFor="let each of attachments;let i = index;">
                               {{i+1}}. {{each.fileName}}
                               <span>
                                   <!-- <img src="../../../../assets/images/Admin/download-blue.svg" class="testplus" > -->
                                   <span class="deleteattachment tsttooltipbtn">
                                    <a href="data:image/png;base64,{{each.filedata}}" download="{{each.fileName}}">
                                    <img src="../../../../assets/images/Admin/download-black.svg" class="default-img testplus" >
                                    <img src="../../../../assets/images/Admin/download-blue.svg" class="hover-img testplus" >
                                    </a>
                                    <!-- <span class="testtooltip">Download</span> -->
                                </span>
                               </span>
                                <!-- <span><img src="../../../../assets/images/VCM/VCM-close.svg" class="testplus2 default-img" />
                                <img src="../../../../assets/images/VCM/VCM-close-red.svg" class="testplus2 hover-img"
                                    (click)="RemoveFile(file,i)" /></span> -->
                                    <!-- <a href="data:image/png;base64,{{each.fileData}}" download="{{each.fileName}}">
                                        <img src="../../../../assets/images/Admin/download-black.svg" class="default-img testplus" >
                                        <img src="../../../../assets/images/Admin/download-blue.svg" class="hover-img testplus" >
                                        </a> -->
                            </p>
                            
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </mat-drawer>
            <mat-drawer-content>
                <div class="vcm-treesmain h-100">
                    <!-- <h4 >{{vcmTreeData[3].vcmname}}</h4> -->
                    <div class="row maincontent h-100">
                        <!-- <div class="col-md-12 p-0 form-group vcname">
                            <label class="label-control">Value Chain Name</label>
                            <input type="text" class="form-control" [(ngModel)]="selectedVcmName" placeholder="Enter Value Chain Name" readonly>
                            <button class="btn" >
                                <img [hidden]="!selectedVcmName" src="../../../../assets/images/VCM/Green Tick.svg" class="testplus1"  />
                            </button>
                        </div> -->
                        <div class="col-md-12 p-0">
                            <h4>{{vcmName}}</h4>
                        </div>
                        <div class="col-md-12 p-0 vcm-treediv">
                            <mat-tree [dataSource]="dataSource" #tree [treeControl]="treeControl" class="example-tree">
                            
                            <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                                <span class="text-color" *ngIf="node.level == 'L3'" (click)="navigateToNoytation(node)">{{node.title}}</span>
                                <span *ngIf="node.level == 'L1'" (click)="openNodeProperties(node)" class="sub-nodel1">{{node.title}} </span>
                                <span *ngIf="node.level == 'L2'" (click)="openNodeProperties(node)" class="sub-nodel2">{{node.title}}</span>
                            </mat-tree-node>
                            <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                                <div class="mat-tree-node">
                                    <button (click)="viewProperties(node)" *ngIf="(node.title=='Management Process'&& treeControl.dataNodes[1])|| (node.title=='Core Process'&& treeControl.dataNodes[1]) || (node.title=='Support Process'&& treeControl.dataNodes[2])">
                                        <img src="../../../assets/images/menu-line.svg" class="procmenu" alt="">
                                    </button>
                                    <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.name" *ngIf="node.title != 'Management Process' && node.title != 'Core Process' && node.title != 'Support Process'">
                                        <mat-icon class="mat-icon-rtl-mirror">
                                            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                        </mat-icon>
                                    </button> 
                                    <span *ngIf="node.level == 'L1' || node.level == 'L2' || node.level == 'L3' " (click)="openNodeProperties(node)">{{node.title}} </span>
                                    <span class="proc-title" *ngIf="node.level != 'L1' && node.level != 'L2' && node.level != 'L3' ">{{node.title}}</span>
                                </div>
                                <div [class.example-tree-invisible]="!treeControl.isExpanded(node)" role="group">
                                    <ng-container matTreeNodeOutlet></ng-container>
                                </div>
                            </mat-nested-tree-node>
                            </mat-tree>
                        </div>
                    </div>
                </div>
            </mat-drawer-content>
        </mat-drawer-container>
    </div>
</div>

<div class="spinoverlay" *ngIf="isLoading">
    <div class="spincenter">
        <img  src='..\assets\images\EZFlow_Loader.gif' class="ezflow-loader"/>
    </div>
</div>