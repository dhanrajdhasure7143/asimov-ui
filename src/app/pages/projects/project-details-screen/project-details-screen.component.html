<div class="project-details-main" *ngIf="projectDetails!=undefined">
    <div class="module-heading title">
        <div>
            <span class="module-back-button" *ngIf="programId==undefined" routerLink="/pages/projects/listOfProjects">
                <i aria-hidden="true" class="fas fa-arrow-left"></i>
            </span>
            <span class="module-back-button" *ngIf="programId!=undefined"
                [routerLink]="['/pages/projects/programdetails']" [queryParams]="       {id:programId}">
                <i aria-hidden="true" class="fas fa-arrow-left"></i>
            </span>
            <span class="module-header-title">
                Project Details
            </span>
        </div>
        <div class="ml-auto module-heading-buttons">
            <span class="pull-right">
                <span (click)="navigateToProjectRepo()" class="prj-db-btn">
                    <button class="tsttooltipbtn">
                        <img src="../../../../assets/images/Projects/Project-Repo.svg" class="testplus1">
                        <span class="testtooltip">Project Repo</span>
                    </button>
                    <button class="tsttooltipbtn" (click)="navigateToOrchestration()" *ngIf="freetrail!='true'">
                        <img height="20" width="20" src="../../../assets/images/BPMS/orchestration.svg">
                        <span class="testtooltip">Orchestration</span>
                    </button>
                </span>
                <span class="prj-db-btn">
                    <button [matMenuTriggerFor]="menu" class="tsttooltipbtn">
                        <img class="more testplus1" src="../../../../assets/images/Projects/Download.svg">
                        <span class="testtooltip">Download</span>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="downloadExcel()">Download as Excel</button>
                    </mat-menu>
                </span>
                <span
                    *ngIf="(!(this.userRole.includes('System Admin')) && userName==projectDetails.createdBy) || (this.userRole.includes('System Admin') ||  loginresourcecheck)">
                    <span class="prjdetails-headerbuttons" *ngIf="editdata==true" (click)="projectdetails()">
                        <button class="btn btn-default">Cancel</button>
                    </span>
                    <span *ngIf="editdata==true" (click)="updateprojectDetails()">
                        <button [disabled]="projectNameFlag || projectPurposeFlag || processOwnerFlag || !projectStartDate"
                            class="btn btn-primary">Save</button>
                    </span>
                    <span class="prjdetails-headerbuttons" *ngIf="editdata==false">
                        <button class="btn btn-primary" (click)="editdata=true">
                            <img class="testplus" src="../../../../assets/images/Projects/edit.svg"> Edit
                        </button>
                    </span>
                </span>
            </span>
        </div>
    </div>
    <div class="new-prj-details">
        <mat-card id="projects_details_screen" *ngIf="projects_toggle==false">
            <div class="project-details-div">
                <div class="row newprhcl">
                    <div class="col-md-8 p-0 project-info">
                        <div>
                            <img src="..\assets\images\Projects\project_icon.svg" alt="">
                        </div>
                        <div class="project-data">
                            <div class="prj-title" *ngIf="editdata==false">
                                <span class="tab-text"
                                    *ngIf="projectDetails.projectName==null || projectDetails.projectName==undefined">-</span>
                                <span class="tab-text">{{projectDetails.projectName}}</span>
                            </div>
                            <div class="prj-title" *ngIf="editdata==true">
                                <input type="text" maxlength="51"
                                    (change)="projectDetails.projectName=$event.target.value"
                                    [value]="(projectDetails.projectName==undefined||projectDetails.projectName==null)?'':projectDetails.projectName"
                                    (keyup)="projectNameMaxLength($event.target.value)" class="small-input"
                                    placeholder="Enter Project Name">
                                <span *ngIf="projectNameFlag" class="errspan required">
                                    Maximum of 50 characters
                                </span>
                            </div>
                            <div *ngIf="editdata==false">
                                <span class="projectdesc"
                                    *ngIf="projectDetails.projectPurpose==undefined || projectDetails.projectPurpose==null || projectDetails.projectPurpose=='' "
                                    class="h6">-</span>
                                <span class="projectdesc">{{projectDetails.projectPurpose}}</span>
                            </div>
                            <div *ngIf="editdata==true">
                                <textarea style="resize: none;"
                                    (change)="projectDetails.projectPurpose=$event.target.value"
                                    [value]="(projectDetails.projectPurpose==undefined||projectDetails.projectPurpose==null)?'':projectDetails.projectPurpose"
                                    (keyup)="projectPurposeMaxLength($event.target.value)" class="small-input"
                                    placeholder="Enter Project Description" maxlength="151"></textarea>
                                <span *ngIf="projectPurposeFlag" class="errspan required">
                                    Maximum of 150 characters
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 pr-0">
                        <div class="row newprjdates">
                            <div class="status-tabs">
                                <div class="user-owner-div"
                                    *ngIf="(projectDetails.owner|userImagePipe: users_list)as result">
                                    <div *ngIf="result.length==3">
                                        <span class="projectowner-letter-image">
                                            <span class="project-owner-letter"> {{owner_letters | uppercase}}</span>
                                        </span>
                                    </div>
                                    <div *ngIf="result.length>3">
                                        <span> <img class="project-owner-img "
                                                src="{{projectDetails.owner|userImagePipe: users_list}}"></span>
                                    </div>
                                </div>
                                <div class="status-data">
                                    <span class="tab-text" *ngIf="projectDetails.owner==null">-</span>
                                    <span class="tab-text">{{getUserName(projectDetails.owner)}}</span>
                                    <label class="labeltit">Project Owner</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 p-0 project-details-set projinfo">
                        <div class="row">
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Initiative</span>
                                    <span class="tab-text"
                                        *ngIf="projectDetails.initiatives==undefined ||  projectDetails.initiatives==null">-</span>
                                    <span class="tab-text labelcont"
                                        *ngIf="projectDetails.initiatives!=undefined &&  projectDetails.initiatives!=null">
                                        {{projectDetails.initiatives|initiativePipe : initiatives|titlecase}}
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Department</span>

                                    <span class="tab-text"
                                        *ngIf="projectDetails.mapValueChain==null||projectDetails.mapValueChain==''|| projectDetails.mapValueChain==undefined">-</span>
                                    <span
                                        *ngIf="projectDetails.mapValueChain!=null && projectDetails.mapValueChain!=''&& projectDetails.mapValueChain!=undefined"
                                        class="tab-text labelcont">{{projectDetails.mapValueChain}}</span>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Process</span>
                                    <div *ngIf="editdata==false">
                                        <span class="tab-text"
                                            *ngIf="projectDetails.process==null || projectDetails.process==undefined || projectDetails.process==''">-</span>
                                        <span
                                            *ngIf="projectDetails.process!=null && projectDetails.process!=undefined && projectDetails.process!=''"
                                            class="tab-text labelcont">{{projectDetails.process | processName :
                                            processes}}</span>
                                    </div>
                                    <div *ngIf="editdata==true">
                                        <select class="small-input" (change)="onProcessChange($event.target.value)"
                                            (change)="projectDetails.process=$event.target.value"
                                            [value]="(projectDetails.process==undefined||projectDetails.process==null)?'':projectDetails.process">
                                            <option value="null" disabled hidden>Select Process</option>
                                            <option value="" disabled hidden>Select Process</option>
                                            <option *ngFor="let process of processes" [value]="process.processId">
                                                {{process.processName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset" *ngIf="editdata==false">
                                    <span class="labeltit">Process Owner</span>

                                    <span class="tab-text"
                                        *ngIf="projectDetails.processOwner==null||projectDetails.processOwner==''|| projectDetails.processOwner==undefined">-</span>
                                    <span
                                        *ngIf="projectDetails.processOwner!=null && projectDetails.processOwner!=''&& projectDetails.processOwner!=undefined"
                                        class="tab-text labelcont">{{getUserName(projectDetails.processOwner)}}</span>
                                </div>
                                <div class="mainset" *ngIf="editdata==true">
                                    <span class="labeltit">Process Owner</span>
                                    <select class="small-input" id="processowner" [(ngModel)]="processownername" name="process_ownerField"
                                        [attr.disabled]="processOwner==false">
                                        <!-- <option [value]="projectDetails.processOwner">{{projectDetails.processOwner |
                                            userPipe : users_list}}</option> -->
                                        <option *ngFor="let user of users_data" [value]="user.userId">
                                            {{user.firstName|titlecase}} {{user.lastName|titlecase}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Project Health</span>
                                    <div *ngIf="editdata==false">
                                        <span
                                            *ngIf="projectDetails.projectHealth != null && projectDetails.projectHealth != undefined && projectDetails.projectHealth !='' "
                                            class="tab-text labelcont">{{projectDetails.projectHealth }}</span>
                                        <span
                                            *ngIf="projectDetails.projectHealth == null || projectDetails.projectHealth == undefined || projectDetails.projectHealth =='' "
                                            class="tab-text labelcont">-</span>
                                    </div>
                                    <span *ngIf="editdata==true" class="tab-text labelcont">
                                        <select class="small-input"
                                            (change)="projectDetails.projectHealth=$event.target.value"
                                            [value]="(projectDetails.projectHealth==undefined||projectDetails.projectHealth==null)?'':projectDetails.projectHealth">
                                            <option value="" disabled hidden>Select Project Health</option>
                                            <option value="null" disabled hidden>Select Project Health</option>
                                            <option value="Good">Good</option>
                                            <option value="Needs Attention">Needs Attention</option>
                                            <option value="Risk">Risk</option>
                                        </select>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Project Priority</span>
                                    <div *ngIf="editdata==false">
                                        <span class="tab-text"
                                            *ngIf="projectDetails.priority==null || projectDetails.priority==undefined">-</span>
                                        <span class="tab-text labelcont">{{projectDetails.priority}}</span>
                                    </div>
                                    <div *ngIf="editdata==true">
                                        <select class="small-input"
                                            (change)="projectDetails.priority=$event.target.value"
                                            [value]="(projectDetails.priority==undefined||projectDetails.priority==null)?'':projectDetails.priority">
                                            <option value="" disabled hidden>Select Project Priority</option>
                                            <option value="null" disabled hidden>Select Project Priority</option>
                                            <option value="" disabled hidden>Select Project Priority</option>
                                            <option value="High">High</option>
                                            <option value="Medium">Medium</option>
                                            <option value="Low">Low</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Status</span>
                                    <div *ngIf="editdata==false">
                                        <span class="tab-text labelcont">{{projectDetails.status}}</span>
                                    </div>
                                    <div *ngIf="editdata==true">
                                        <select class="small-input" (change)="projectDetails.status=$event.target.value"
                                            [value]="(projectDetails.status==undefined||projectDetails.status==null)?'':projectDetails.status">
                                            <option value="" disabled hidden>Select Status</option>
                                            <option value="null" disabled hidden>Select Status</option>
                                            <option value="" disabled hidden>Select Status</option>
                                            <option value="New">New</option>
                                            <option value="In Progress">In Progress</option>
                                            <option value="Pipeline">Pipeline</option>
                                            <option value="On Hold">On Hold</option>
                                            <option value="In Review">In Review</option>
                                            <option value="Deployed">Deployed</option>
                                            <option value="Closed">Closed</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Start Date</span>
                                    <div *ngIf="editdata==false">
                                        <span
                                            *ngIf="projectDetails.startDate != null && projectDetails.startDate != undefined && projectDetails.startDate !='' "
                                            class="tab-text labelcont">{{projectDetails.startDate | date }}</span>
                                        <span
                                            *ngIf="projectDetails.startDate == null || projectDetails.startDate == undefined || projectDetails.startDate =='' "
                                            class="tab-text labelcont">-</span>
                                    </div>
                                    <div *ngIf="editdata==true">
                                        <input type="date" class="small-input"
                                            (change)="projectStartDate=$event.target.value" [value]="projectStartDate">
                                            <span *ngIf="!projectStartDate"  class="errspan required">Start Date Required*</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">End Date</span>
                                    <div *ngIf="editdata==false">
                                        <span
                                            *ngIf="projectenddate != null && projectenddate != undefined && projectenddate !='' "
                                            class="tab-text labelcont">{{projectenddate | date }}</span>
                                        <span
                                            *ngIf="projectenddate == null || projectenddate == undefined || projectenddate =='' "
                                            class="tab-text labelcont">-</span>

                                    </div>
                                    <div *ngIf="editdata==true">
                                        <!-- <input type="date" name="daytime" max="9999-12-31" [min]="mindate" formControlName="endDate" (keydown)="endDateMethod()"
                      (change)="projectenddate=$event.target.value"
                      [value]="projectenddate | date:'yyyy-mm-dd'" class="small-input"
                      [ngClass]="projectenddate?'enteredfield-color':'inputfield-color'" > -->
                                        <input type="date" class="small-input" [min]="projectStartDate"
                                            (change)="projectenddate=$event.target.value" [value]="projectenddate">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Efforts Spent (Hrs)</span>
                                    <div *ngIf="editdata==false">
                                        <span
                                            *ngIf="projectDetails.effortsSpent != null && projectDetails.effortsSpent != undefined && projectDetails.effortsSpent !='' "
                                            class="tab-text labelcont">{{projectDetails.effortsSpent }}</span>
                                        <span
                                            *ngIf="projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='' "
                                            class="tab-text labelcont">-</span>
                                    </div>
                                    <div *ngIf="editdata==true">
                                        <input type="text" (change)="projectDetails.effortsSpent=$event.target.value"
                                            (keydown)="inputNumberOnly($event)" maxlength="6" class="small-input"
                                            placeholder="Efforts Spent"
                                            [value]="(projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='')?'':projectDetails.effortsSpent">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-2 p-0">
                                <div class="mainset">
                                    <span class="labeltit">Progress Percentage</span>
                                    <span *ngIf="editdata==false"
                                        class="tab-text labelcont">{{projectDetails.projectPercentage}}%
                                        <mat-progress-bar mode="determinate" value={{projectDetails.projectPercentage}}>
                                        </mat-progress-bar>
                                    </span>
                                    <div *ngIf="editdata==true" class="d-flex">
                                        <input type="range"
                                            (change)="projectDetails.projectPercentage=$event.target.value" class=""
                                            [value]="(projectDetails.projectPercentage==undefined||projectDetails.projectPercentage==null)?0:projectDetails.projectPercentage"
                                            step="1" min="0" max="100">
                                        <div class="py-5">
                                            {{projectDetails.projectPercentage}}%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex w-100 project-details-setOne" style="display: none;">
                    <div class="d-flex w-100 project-details-set">
                        <div class="d-flex">
                            <div class="py-5">
                                <img src="..\assets\images\Projects\process_icon.svg" alt="">
                            </div>
                            <div class="py-5">
                                <span class="labeltit">Initiative</span>

                                <span class="tab-text"
                                    *ngIf="projectDetails.initiatives==undefined ||  projectDetails.initiatives==null">-</span>
                                <span class="tab-text labelcont"
                                    *ngIf="projectDetails.initiatives!=undefined &&  projectDetails.initiatives!=null">
                                    {{projectDetails.initiatives}}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="d-flex">
                            <div class="py-5">
                                <img src="..\assets\images\Projects\process_icon.svg" alt="">
                            </div>
                            <div class="py-5">
                                <span class="labeltit">Department</span>
                                <span class="tab-text"
                                    *ngIf="projectDetails.mapValueChain==null||projectDetails.mapValueChain==''|| projectDetails.mapValueChain==undefined">-</span>
                                <span
                                    *ngIf="projectDetails.mapValueChain!=null && projectDetails.mapValueChain!=''&& projectDetails.mapValueChain!=undefined"
                                    class="tab-text labelcont clickable">{{projectDetails.mapValueChain}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="d-flex">
                            <div class="py-5">
                                <img src="..\assets\images\Projects\bot.svg" alt="">
                            </div>
                            <div class="py-5">
                                <span class="labeltit">Process</span>
                                <span class="tab-text"
                                    *ngIf="projectDetails.process==null || projectDetails.process==undefined || projectDetails.process==''">-</span>
                                <span
                                    *ngIf="projectDetails.process!=null && projectDetails.process!=undefined && projectDetails.process!=''"
                                    class="tab-text clickable labelcont">{{projectDetails.process | processName :
                                    processes}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="d-flex">
                            <div class="py-5">
                                <img src="..\assets\images\Projects\document.svg" alt="">
                            </div>
                            <div class="py-5">
                                <span class="labeltit">Process Id</span>
                                <span class="tab-text labelcont">{{projectDetails.process }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="d-flex">
                            <div class="py-5">
                                <img src="..\assets\images\Projects\document.svg" alt="">
                            </div>
                            <div class="py-5">
                                <span class="labeltit">Start Date</span>
                                <div>
                                    <span
                                        *ngIf="projectDetails.startDate != null && projectDetails.startDate != undefined && projectDetails.startDate !='' "
                                        class="tab-text labelcont">{{projectDetails.startDate | date }}</span>
                                    <span
                                        *ngIf="projectDetails.startDate == null || projectDetails.startDate == undefined || projectDetails.startDate =='' "
                                        class="tab-text labelcont">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="d-flex">
                            <div class="py-5">
                                <img src="..\assets\images\Projects\document.svg" alt="">
                            </div>
                            <div class="py-5">
                                <span class="labeltit">End Date</span>
                                <div>
                                    <span
                                        *ngIf="projectDetails.endDate != null && projectDetails.endDate != undefined && projectDetails.endDate !='' "
                                        class="tab-text labelcont">{{projectDetails.endDate | date }}</span>
                                    <span
                                        *ngIf="projectDetails.endDate == null || projectDetails.endDate == undefined || projectDetails.endDate =='' "
                                        class="tab-text labelcont">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="d-flex">
                            <div class="py-5">
                                <img src="..\assets\images\Projects\process_icon.svg" alt="">
                            </div>
                            <div class="py-5">
                                <span class="labeltit">Resources</span>
                                <span class="tab-text labelcont">{{projectDetails.resources.length}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex w-100" style="display: none;">
                    <div class="d-flex w-100 project-details-set">
                        <div class="py-5">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="">
                        </div>
                        <div class="py-5">
                            <span class="labeltit">Project Health</span>
                            <div *ngIf="editdata==false">
                                <span
                                    *ngIf="projectDetails.projectHealth != null && projectDetails.projectHealth != undefined && projectDetails.projectHealth !='' "
                                    class="tab-text labelcont">{{projectDetails.projectHealth }}</span>
                                <span
                                    *ngIf="projectDetails.projectHealth == null || projectDetails.projectHealth == undefined || projectDetails.projectHealth =='' "
                                    class="tab-text labelcont">-</span>
                            </div>
                            <span *ngIf="editdata==true" class="tab-text labelcont">
                                <select class="small-input" (change)="projectDetails.projectHealth=$event.target.value"
                                    [value]="(projectDetails.projectHealth==undefined||projectDetails.projectHealth==null)?'':projectDetails.projectHealth">
                                    <option value="">Select Project Health</option>
                                    <option value="Good">Good</option>
                                    <option value="Need Attention">Need Attention</option>
                                    <option value="Risk">Risk</option>
                                </select>
                            </span>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="py-5">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="">
                        </div>
                        <div class="py-5">
                            <span class="labeltit">Progress Percentage</span>
                            <span *ngIf="editdata==false"
                                class="tab-text labelcont">{{projectDetails.projectPercentage}}%
                                <mat-progress-bar mode="determinate" value={{projectDetails.projectPercentage}}>
                                </mat-progress-bar>
                            </span>
                            <div *ngIf="editdata==true" class="d-flex">
                                <input type="range" (change)="projectDetails.projectPercentage=$event.target.value"
                                    class="small-input"
                                    [value]="(projectDetails.projectPercentage==undefined||projectDetails.projectPercentage==null)?0:projectDetails.projectPercentage"
                                    step="1" min="0" max="100">
                                <div class="py-5">
                                    {{projectDetails.projectPercentage}}%
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="py-5">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="">
                        </div>
                        <div class="py-5">
                            <span class="labeltit">Efforts Spent</span>
                            <div *ngIf="editdata==false">
                                <span
                                    *ngIf="projectDetails.effortsSpent != null && projectDetails.effortsSpent != undefined && projectDetails.effortsSpent !='' "
                                    class="tab-text labelcont">{{projectDetails.effortsSpent }}</span>
                                <span
                                    *ngIf="projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='' "
                                    class="tab-text labelcont">-</span>

                            </div>
                            <div *ngIf="editdata==true">
                                <input type="text" maxlength="20"
                                    (keypress)="projectDetails.effortsSpent=$event.target.value" class="small-input"
                                    placeholder="Efforts Spent"
                                    [value]="(projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='')?'':projectDetails.effortsSpent">
                            </div>
                        </div>
                    </div>

                    <div class="d-flex w-100 project-details-set">
                        <div class="py-5">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="">
                        </div>
                        <div class="py-5">
                            <span class="labeltit">Project Priority</span>
                            <div *ngIf="editdata==false">
                                <span class="tab-text"
                                    *ngIf="projectDetails.priority==null || projectDetails.priority==undefined">-</span>
                                <span class="tab-text labelcont">{{projectDetails.priority}}</span>
                            </div>
                            <div *ngIf="editdata==true">
                                <select class="small-input" (change)="projectDetails.priority=$event.target.value"
                                    [value]="(projectDetails.priority==undefined||projectDetails.priority==null)?'':projectDetails.priority">
                                    <option value="">Select Project Priority</option>
                                    <option value="High">High</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex w-100 project-details-set">
                        <div class="py-5">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="">
                        </div>
                        <div class="py-5">
                            <span class="labeltit">Project Purpose</span>
                            <div *ngIf="editdata==false">
                                <span class="tab-text labelcont">Improve ROI</span>
                            </div>
                            <div *ngIf="editdata==true">
                                <input type="text"
                                    [value]="(projectDetails.projectPurpose==undefined||projectDetails.projectPurpose==null)?'':projectDetails.projectPurpose"
                                    class="small-input" maxlength="50" placeholder="Enter Project Purpose">
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="py-5">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="">
                        </div>
                        <div class="py-5">
                            <span class="labeltit">Status</span>

                            <div *ngIf="editdata==false">
                                <span class="tab-text labelcont">{{projectDetails.status}}</span>
                            </div>
                            <div *ngIf="editdata==true">
                                <select class="small-input" (change)="projectDetails.status=$event.target.value"
                                    [value]="(projectDetails.status==undefined||projectDetails.status==null)?'':projectDetails.status">
                                    <option value="">Select Status</option>
                                    <option value="New">New</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="On Hold">On Hold</option>
                                    <option value="In Review">In Review</option>
                                    <option value="Deployed">Deployed</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex w-100 project-details-set">
                        <div class="py-5">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="">
                        </div>
                        <div class="py-5">
                            <span class="labeltit">Burnt Rate</span>
                            <span><input type="text" class="small-input" maxlength="50"
                                    placeholder="Enter Burnt Rate Value" /></span>
                        </div>
                    </div>
                </div>
            </div>
        </mat-card>
        <mat-card class="new-prj-tasklist" id="projects_details_screen" *ngIf="projects_toggle==false">
            <div class="row module-subheader-title">
                <div class="col-md-4 p-0">
                    <span class="module-sub-header-title">
                        <b> Tasks</b>
                    </span>
                </div>
                <div class="col-md-8 pr-0">
                    <span class="pull-right">
                        <span class="">
                            <button type="button" class="btn btn-primary" routerLink="/pages/projects/create-task"
                                [queryParams]="{project_id: project_id}">
                                <img src="../../../../assets/images/Projects/White-plus.svg" class="testplus" />Create
                                New
                            </button>
                        </span>
                    </span>
                </div>
            </div>
            <div class="tasks-body">
                <table mat-table #sort10="matSort" [dataSource]="dataSource2" matSort class="projecttable table"
                    id="autotable">
                    <ng-container matColumnDef="taskCategory">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
                        <td mat-cell *matCellDef="let element">
                            <span *ngIf="element.taskCategory!=null"
                                [matTooltip]="element.taskCategory">{{element.taskCategory}}</span>
                            <span *ngIf="element.taskCategory==null">---</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="taskName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Task Name</th>
                        <td mat-cell *matCellDef="let element">
                            <span *ngIf="element.taskName!=null"
                                [matTooltip]="element.taskName">{{getreducedValue(element.taskName)}}</span>
                            <span *ngIf="element.taskName==null">---</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="resources">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Resource </th>
                        <td mat-cell *matCellDef="let element">
                            <span *ngIf="element.resources!=null">{{element.resources| userPipe : users_list}}</span>
                            <span *ngIf="element.resources==null">---</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Status </th>
                        <td mat-cell *matCellDef="let element">
                            <span *ngIf="element.status!=null">{{element.status}}</span>
                            <span *ngIf="element.status==null">---</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="percentageComplete">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Percentage Complete</th>
                        <td mat-cell *matCellDef="let element">
                            <span class="tab-text labelcont">{{element.percentageComplete}}%
                                <mat-progress-bar mode="determinate" [(value)]="element.percentageComplete">
                                </mat-progress-bar>
                            </span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="lastModifiedTimestamp">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Updated</th>
                        <td mat-cell *matCellDef="let element">
                            <span *ngIf="element.lastModifiedTimestamp!=null">{{element.lastModifiedTimestamp |
                                date:'MMM dd, y, HH:mm:ss'}}</span>
                            <span *ngIf="element.lastModifiedTimestamp==null">---</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="lastModifiedBy">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Updated By</th>
                        <td mat-cell *matCellDef="let element">
                            <span *ngIf="element.lastModifiedBy!=null">{{element.lastModifiedBy}}</span>
                            <span *ngIf="element.lastModifiedBy==null">---</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="createdBy">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Created By</th>
                        <td mat-cell *matCellDef="let element">
                            <span *ngIf="element.createdBy!=null">{{element.createdBy}}</span>
                            <span *ngIf="element.createdBy==null">---</span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef>Actions</th>
                        <td mat-cell *matCellDef="let element" class="action-link tablacs">
                            <div class="newinntalx">
                                <a (click)="uploadtaskfile(uploadtaskfilemodal,element)" matTooltip="Upload File">
                                    <img src="../../../../assets/images/Projects/upload.svg" class="default-img">
                                    <img src="../../../../assets/images/Projects/upload-blue.svg" class="hover-img">
                                </a>
                                <a routerLink="/pages/projects/edit-task"
                                    [queryParams]="{projectid:projectDetails.id,taskId:element.id}"
                                    matTooltip="Edit Task">
                                    <img src="../../../../assets/images/Projects/edit-black.svg" class="default-img">
                                    <img src="../../../../../assets/images/Projects/Edit-blue.svg" class="hover-img">
                                </a>

                                <a (click)="deletetask(element)" matTooltip="Delete Task"
                                    *ngIf="((this.userRole.includes('Process Analyst') || this.userRole.includes('RPA Developer')) && userName==element.createdBy)|| (!(this.userRole.includes('Process Analyst') || this.userRole.includes('RPA Developer')))">
                                    <img src="../../../../../assets/images/Projects/delete-black.svg"
                                        class="default-img">
                                    <img src="../../../../../assets/images/Projects/delete-red.svg" class="hover-img">
                                </a>
                                <a class="clickable text-dark"
                                    *ngIf="(element.taskCategory =='RPA Implementation'|| element.taskCategory =='BPMN Design'|| element.taskCategory =='Process Mining' || element.taskCategory =='As-Is Process' || element.taskCategory =='To-Be Process') && element.correlationID.length!=0"
                                    (click)="navigateToWorkspace(element)" matTooltip="View Task">
                                    <img src="../../../../../assets/images/Projects/eye-show.svg" class="default-img">
                                    <img src="../../../../../assets/images/Projects/eye-show-blue.svg"
                                        class="hover-img">
                                </a>
                                <a class="clickable text-dark" *ngIf="element.taskCategory =='RPA Design'"
                                    (click)="navigateToWorkspace(element)" matTooltip="View Task">
                                    <img src="../../../../../assets/images/Projects/eye-show.svg" class="default-img">
                                    <img src="../../../../../assets/images/Projects/eye-show-blue.svg"
                                        class="hover-img">
                                </a>
                                <a
                                    *ngIf="(element.taskCategory =='Analysis' || element.correlationID.length==0) && element.taskCategory !='RPA Design'">
                                    <img src="../../../../../assets/images/Projects/eye-hide.svg" class="icon-disabled">

                                </a>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="Loading">
                        <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
                            Loading
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="noData">
                        <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
                            No Records Found
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']"
                        [ngClass]="{'hide':dataSource2!=null}"></tr>
                    <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']"
                        [ngClass]="{'hide':!(dataSource2!=null && dataSource2.data.length==0)}"></tr>
                </table>
            </div>
            <mat-paginator class="newpaginationdiv" #paginator101 [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50]"
                [showFirstLastButtons]="true">
            </mat-paginator>
        </mat-card>

        <div class="row bortopsec">
            <div class="col-md-12 p-0 resources">
                <mat-card id="projects_details_screen" class="new-resourcediv" *ngIf="projects_toggle==false">
                    <div class="row module-subheader-title">
                        <div class="col-md-6 p-0">
                            <span class="module-sub-header-title">
                                <b> Resources</b>
                            </span>
                        </div>
                        <div class="col-md-6 pr-0">
                            <span class="pull-right">
                                <button type="button" class="btn btn-primary" (click)="addresource(addresourcemodal)"
                                    *ngIf="this.userRole.includes('SuperAdmin') || this.userRole.includes('Admin') || this.userRole.includes('System Admin') || this.userRole.includes('Process Owner') || this.userRole.includes('Process Architect')">
                                    <img src="../../../../assets/images/Projects/White-plus.svg" class="testplus" />Add
                                    New
                                </button>
                                <span>
                                    <div *ngIf="Resourcedeleteflag==true" class="env-btn">
                                        <button title="Delete Resource"
                                            *ngIf="this.userRole.includes('SuperAdmin') || this.userRole.includes('Admin') || this.userRole.includes('System Admin') || this.userRole.includes('Process Owner') || this.userRole.includes('Process Architect')"
                                            value="Delete" id="deletebtn" class="btn btn-primary"
                                            (click)="deleteresource()">Delete</button>
                                    </div>
                                    <div *ngIf="Resourcedeleteflag==false" class="env-btn">
                                        <button data-toggle="tooltip"
                                            *ngIf="this.userRole.includes('SuperAdmin') || this.userRole.includes('Admin') || this.userRole.includes('System Admin') || this.userRole.includes('Process Owner') || this.userRole.includes('Process Architect')"
                                            data-placement="top" id="deletebtn" class="btn btn-primary"
                                            title="Delete Resource" disabled>Delete</button>
                                    </div>
                                </span>
                            </span>
                        </div>
                    </div>

                    <div class="projects-table-body profile-table">
                        <table mat-table #sort14="matSort" [dataSource]="dataSource6" matSort class="projecttable table"
                            id="autotable">
                            <ng-container matColumnDef="check">
                                <th mat-header-cell *matHeaderCellDef>
                                    <input [disabled]="Resourcecheckeddisabled" type="checkbox" id="Credcheckall"
                                        [checked]="Resourcecheckflag" (change)="ResourcecheckAllCheckBox($event)">
                                </th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <input type="checkbox" [checked]="element.checked"
                                        (change)="ResourcecheckEnableDisableBtn(element.id, $event)">
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="firstName">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                                <td mat-cell *matCellDef="let user">
                                    <span style="margin-right: 10px;" *ngIf="user.userId.profilePic!=null"><img
                                            src="../../../../assets/images/BPMS/user1.png" /></span>
                                    <span class="letter-image" *ngIf="user.userId.profilePic==null">
                                        <span class="letter">{{user.firstName|uppercase| slice:0:1}}{{user.lastName|
                                            uppercase|slice:0:1}}</span>
                                    </span>
                                    <span *ngIf="user.firstName!=null" [matTooltip]="user.firstName">{{user.firstName+"
                                        "+ user.lastName|titlecase}}</span>
                                    <span *ngIf="user.firstName==null">---</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="displayName">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
                                <td mat-cell *matCellDef="let user">
                                    <span *ngIf="user.displayName!=null"
                                        [matTooltip]="user.displayName">{{user.displayName}}</span>
                                    <span *ngIf="user.displayName==null">---</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="user_Id">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
                                <td mat-cell *matCellDef="let user">
                                    <span *ngIf="user.user_Id!=null" [matTooltip]="user.user_Id">{{user.user_Id}}</span>
                                    <span *ngIf="user.user_Id==null">---</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="last_active">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Active</th>
                                <td mat-cell *matCellDef="let user">
                                    <span *ngIf="user.last_active!=null">{{user.last_active | date:'MMM d, y,
                                        HH:mm:ss'}}</span>
                                    <span
                                        *ngIf="user.last_active==null || user.last_active==undefined || user.last_active=='' ">---</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="Loading">
                                <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef
                                    colspan="9">
                                    Loading
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="noData">
                                <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef
                                    colspan="9">
                                    No Records Found
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns6; sticky: true"></tr>
                            <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns6;"></tr>
                            <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']"
                                [ngClass]="{'hide':dataSource6!=null}"></tr>
                            <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']"
                                [ngClass]="{'hide':!(dataSource6!=null && dataSource6.data.length==0)}"></tr>
                        </table>
                        <mat-paginator class="newpaginationdiv" #paginator104 [pageSize]="3"
                            [pageSizeOptions]="[3, 5, 10, 25, 50]" [showFirstLastButtons]="true">
                        </mat-paginator>
                    </div>
                </mat-card>
            </div>
            <div class="col-md-12 p-0 documents">
                <mat-card id="projects_details_screen" class="new-docdiv" *ngIf="projects_toggle==false">
                    <div class="row module-subheader-title">
                        <div class="col-md-6 p-0">
                            <span class="module-sub-header-title">
                                <b>Recently Added Documents</b>
                            </span>
                        </div>
                        <div class="col-md-6 pr-0">
                            <span class="pull-right">
                                <button type="button" (click)="uploadFile(uploadFilemodal)" class="btn btn-primary">
                                    <img src="../../../../assets/images/BPMS/upload.svg" class="testplusupload">Upload
                                    New</button>
                            </span>
                        </div>
                    </div>
                    <div class="projects-table-body">
                        <table mat-table #sort16="matSort" [dataSource]="dataSource9" matSort class="projecttable table"
                            id="autotable">
                            <ng-container matColumnDef="fileName">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Document Name</th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.fileName!=null"
                                        [matTooltip]="element.fileName">{{element.fileName}}</span>
                                    <span *ngIf="element.fileName==null">---</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="category">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
                                <td mat-cell *matCellDef="let element">
                                    <span>{{element.category}}</span>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="uploadedBy">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Uploaded By</th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.uploadedBy!=null"
                                        [matTooltip]="element.uploadedBy">{{element.uploadedBy| userPipe :
                                        users_list}}</span>
                                    <span *ngIf="element.uploadedBy==null">---</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="uploadedDate">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Uploaded Date</th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.uploadedDate!=null"
                                        [matTooltip]="element.uploadedDate">{{element.uploadedDate| date:'MMM dd,
                                        y,HH:mm:ss'}}</span>
                                    <span *ngIf="element.uploadedDate==null">---</span>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="fileSize">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>File Size</th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="element.fileSize!=null">{{element.fileSize | fileSizePipe}}</span>
                                    <span *ngIf="element.fileSize==null">---</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="Loading">
                                <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef
                                    colspan="9">Loading</td>
                            </ng-container>
                            <ng-container matColumnDef="noData">
                                <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef
                                    colspan="9">
                                    No Records Found
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns9; sticky: true"></tr>
                            <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns9;"></tr>
                            <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']"
                                [ngClass]="{'hide':dataSource9!=null}"></tr>
                            <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']"
                                [ngClass]="{'hide':!(dataSource9!=null && dataSource9.data.length==0)}"></tr>
                        </table>
                        <mat-paginator class="newpaginationdiv" #paginator109 [pageSize]="3"
                            [pageSizeOptions]="[3, 5, 10, 25, 50]" [showFirstLastButtons]="true"> </mat-paginator>
                    </div>
                </mat-card>
            </div>
            <div class="col-md-12 p-0 process-understanding">
                <mat-card class="new-procundiv" id="projects_details_screen">
                    <div class="">
                        <div class="row module-subheader-title">
                            <div class="col-md-12 p-0">
                                <mat-expansion-panel class="process-expansion" (opened)="onOpenProcess('process')"
                                    (closed)="isOpenedState = 0">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title disabled="true">
                                            <div class="col-md-12 p-0">
                                                <div class="col-md-4 pl-0">
                                                    <span class="module-sub-header-title">
                                                        <b>Process Understanding</b>
                                                    </span>
                                                </div>
                                                <div class="col-md-8 text-right">
                                                    <span class="downloadpubtn tsttooltipbtn"
                                                        (click)="xmlConvertToImageformate($event)">
                                                        <!-- <a href="data:image/png;base64,{{downloadData.data}}" download="{{projectDetails.projectName}}.doc"> -->
                                                        <img src="../../../../assets/images/Admin/download-black.svg"
                                                            class="default-img testplus">
                                                        <img src="../../../../assets/images/Admin/download-blue.svg"
                                                            class="hover-img testplus">
                                                        <!-- </a> -->
                                                        <span class="testtooltip">Download</span>
                                                    </span>
                                                    <span *ngIf="isOpenedState == 1">
                                                        <button class="btn btn-primary" *ngIf="!isProcessEdit"
                                                            (click)="editBusinessProcess($event)">
                                                            <img src="../../../../assets/images/Projects/edit.svg"
                                                                class="testplus" />Edit
                                                        </button>
                                                        <button class="btn btn-default"
                                                            *ngIf="businessDetails.length > 0 && isProcessEdit"
                                                            (click)="cancelEditProcess($event)">Cancel</button>
                                                        <button class="btn btn-primary"
                                                            *ngIf="businessDetails.length == 0 && isProcessEdit"
                                                            [disabled]="!businessChallange || !businessPurpose || !business_benefits"
                                                            (click)="saveBusinessProcess($event)">Save</button>
                                                        <button class="btn btn-primary"
                                                            style="margin-right: 0px !important;"
                                                            [disabled]="!businessChallange || !businessPurpose || !business_benefits"
                                                            *ngIf="businessDetails.length > 0 && isProcessEdit"
                                                            (click)="updateBusinessDetails($event)">Update</button>
                                                    </span>
                                                </div>
                                            </div>
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div class="">
                                        <div class="col-md-12 process-div">
                                            <div class="process-under">
                                                <div class="pu-content-editmode" *ngIf="isProcessEdit">
                                                    <form action="" #processForm="ngForm">
                                                        <div class="col-md-12 form-group">
                                                            <label class="label-control">Business Challenge
                                                            </label>
                                                            <!-- <input type="text" name="business_challange" #business_challange="ngModel" id="business_challange" [(ngModel)]="businessChallange" class="form-control" placeholder="Enter Business Challenge" required> -->
                                                            <textarea name="business_challange" id="business_challange"
                                                                (keyup)="autoGrowcommentsBox()"
                                                                #business_challange="ngModel"
                                                                [(ngModel)]="businessChallange" class="form-control"
                                                                placeholder="Enter Business Challenge"
                                                                required></textarea>
                                                            <span
                                                                *ngIf="((business_challange.invalid && processForm.submitted) || (business_challange.errors && business_challange.touched) )"
                                                                class='errspan required'> Business Challenge is required
                                                            </span>
                                                        </div>
                                                        <div class="col-md-12 form-group">
                                                            <label class="label-control">Proposed Solution</label>
                                                            <textarea name="purpose" id="purpose" #purpose="ngModel"
                                                                (keyup)="autoGrowcommentsBox1()"
                                                                [(ngModel)]="businessPurpose" class="form-control"
                                                                placeholder="Enter Purpose" required></textarea>
                                                            <span
                                                                *ngIf="((purpose.invalid && processForm.submitted) || (purpose.errors && purpose.touched) )"
                                                                class='errspan required'> Proposed Solution is required </span>
                                                        </div>
                                                        <div class="col-md-12 form-group">
                                                            <label class="label-control">Benefits</label>
                                                            <textarea name="_benefits" id="_benefits"
                                                                #_benefits="ngModel" (keyup)="autoGrowcommentsBox2()"
                                                                [(ngModel)]="business_benefits" class="form-control"
                                                                placeholder="Enter Benefits" required></textarea>
                                                            <span
                                                                *ngIf="((_benefits.invalid && processForm.submitted) || (_benefits.errors && _benefits.touched) )"
                                                                class='errspan required'> Benefits is required </span>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div *ngIf="!isProcessEdit" class="pu-content">
                                                    <div class="col-md-12 form-group">
                                                        <label class="label-control">Business Challenge</label>
                                                        <p class="nextLine-text line-break">
                                                            {{processUnderstanding.businessChallenge}}</p>
                                                    </div>
                                                    <div class="col-md-12 form-group">
                                                        <label class="label-control">Purpose of Automation</label>
                                                        <p class="nextLine-text line-break">{{processUnderstanding.purpose}}</p>
                                                    </div>
                                                    <div class="col-md-12 form-group">
                                                        <label class="label-control">Benefits of Automation</label>
                                                        <p class="nextLine-text line-break">{{processUnderstanding.benefits}}</p>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 p-0 process-quesdiv" id="business_Process">
                                                    <mat-expansion-panel class="process-expansion"
                                                        (opened)="onOpenProcess('questions')">
                                                        <mat-expansion-panel-header>
                                                            <mat-panel-title disabled="true">
                                                                <span class="module-sub-header-title">
                                                                    <b>Process Questionnaire</b>
                                                                </span>
                                                            </mat-panel-title>
                                                        </mat-expansion-panel-header>
                                                        <div class="col-md-12 process-div">
                                                            <div class="col-md-12 p-0 form-group proc_deffield"
                                                                id="question-div"
                                                                [ngClass]=" processQuestions.length == 0 ? 'proc-noques' : '' ">
                                                                <textarea name="havequestion" id="have_question"
                                                                    [(ngModel)]="haveQuestion" class="form-control"
                                                                    placeholder="Have a Question?"></textarea>
                                                                <span class="procdesc_act s_ques">
                                                                    <span class="tsttooltipbtn" *ngIf="haveQuestion"
                                                                        (click)="saveQuestion()">
                                                                        <img src="../../../../assets/images/VCM/Green Tick.svg"
                                                                            class="testplus1" />
                                                                        <span class="testtooltip">Save Question</span>
                                                                    </span>
                                                                </span>
                                                            </div>
                                                            <div class="col-md-12 p-0">
                                                                <div *ngFor="let each of processQuestions"
                                                                    class="ques-block">
                                                                    <div class="col-md-8 pl-0"
                                                                        *ngIf="selectedQuestionEdit != each.questionId">
                                                                        <p class="p-questions line-break"
                                                                            [ngClass]="each.answer ? 'qwith-ans' : '' ">
                                                                            <strong>Q:</strong>
                                                                            <span class="pqut">{{each.question}}</span>
                                                                        </p>
                                                                    </div>
                                                                    <div class="col-md-4 p-0 text-right"
                                                                        *ngIf="selectedQuestionEdit != each.questionId">
                                                                        <span class="tsttooltipbtn"
                                                                            (click)="onEditQA(each,'question')">
                                                                            <img src="../../../../assets/images/VCM/edit-plus-litblue.svg"
                                                                                class="testplus2 default-img" />
                                                                            <img src="../../../../assets/images/VCM/edit-3.svg"
                                                                                class="testplus2 hover-img" />
                                                                            <span class="testtooltip">Edit</span>
                                                                        </span>
                                                                        <span class="tsttooltipbtn removeques"
                                                                            (click)="onDeleteQA(each,'question')">
                                                                            <img src="../../../../assets/images/VCM/VCM-close.svg"
                                                                                class="testplus2 default-img" />
                                                                            <img src="../../../../assets/images/VCM/VCM-close-red.svg"
                                                                                class="testplus2 hover-img" />
                                                                            <span class="testtooltip">Remove</span>
                                                                        </span>
                                                                        <span class="labelcont">{{each.createdBy}}
                                                                        </span>
                                                                        <span
                                                                            class="modif-date">{{each.convertedmodifiedAt*1000
                                                                            | date:'medium'}}</span>
                                                                    </div>
                                                                    <div class="col-md-12 p-0 form-group proc_deffield1"
                                                                        *ngIf="selectedQuestionEdit == each.questionId">
                                                                        <span>
                                                                            <strong>Q:</strong>
                                                                            <textarea name="answerUpdate"
                                                                                id="question_update"
                                                                                [(ngModel)]="selectedQuestionUpdate"
                                                                                class="form-control"></textarea>
                                                                        </span>
                                                                        <span class="procdesc_act">
                                                                            <span class="tsttooltipbtn"
                                                                                (click)="updateAnswer_Question(each,'question')"
                                                                                *ngIf="selectedQuestionUpdate">
                                                                                <img src="../../../../assets/images/VCM/Green Tick.svg"
                                                                                    class="testplus" />
                                                                                <span class="testtooltip">Update</span>
                                                                            </span>
                                                                            <span class="tsttooltipbtn"
                                                                                (click)="cancelUpdate('question')">
                                                                                <img src="../../../../assets/images/VCM/VCM-close.svg"
                                                                                    class="testplus2" />
                                                                                <span class="testtooltip">Cancel</span>
                                                                            </span>
                                                                        </span>
                                                                    </div>

                                                                    <div class="row">
                                                                        <div class="col-md-11 p-0 form-group answeredcontent"
                                                                            *ngIf="each.answer && selected_questionId != each.questionId">
                                                                            <div class="leftan-cont">
                                                                                <span
                                                                                    class="ltuser_profile">{{getuserLetters(each.answeredBy)}}</span>
                                                                            </div>
                                                                            <div class="rightan-cont">
                                                                                <span
                                                                                    class="labelcont">{{each.answeredBy}}
                                                                                </span>
                                                                                <span
                                                                                    class="modif-date">{{each.convertedansweredAt*1000
                                                                                    | date:'medium'}}</span>
                                                                                <p class="line-break">{{each.answer}}</p>
                                                                            </div>
                                                                        </div>
                                                                        <div *ngIf="!each.answer && selected_questionId != each.questionId"
                                                                            class="col-md-7 pl-0 form-group answer-btn">
                                                                            <button [disabled]="selectedQuestionEdit" class="btn btn-primary"
                                                                                (click)="answerToQuestion(each)">Answer</button>
                                                                        </div>
                                                                        <div class="col-md-1 p-0 text-right pques-actions"
                                                                            *ngIf="selected_questionId != each.questionId">
                                                                            <span
                                                                                *ngIf="userRole == 'System Admin' || userRole == 'Process Owner' || userRole == 'Process Architect' || loggedUserData.userId == each.createdUserId">
                                                                                <span
                                                                                    *ngIf="selected_questionId != each.questionId && each.answer">
                                                                                    <span class="tsttooltipbtn">
                                                                                        <img src="../../../../assets/images/VCM/edit-plus-litblue.svg"
                                                                                            class="testplus2 default-img" />
                                                                                        <img src="../../../../assets/images/VCM/edit-3.svg"
                                                                                            class="testplus2 hover-img"
                                                                                            (click)="onEditQA(each,'answer')" />
                                                                                        <span
                                                                                            class="testtooltip">Edit</span>
                                                                                    </span>
                                                                                    <span
                                                                                        class="tsttooltipbtn removeques">
                                                                                        <img src="../../../../assets/images/VCM/VCM-close.svg"
                                                                                            class="testplus2 default-img" />
                                                                                        <img src="../../../../assets/images/VCM/VCM-close-red.svg"
                                                                                            class="testplus2 hover-img"
                                                                                            (click)="onDeleteQA(each,'answer')" />
                                                                                        <span
                                                                                            class="testtooltip">Remove</span>
                                                                                    </span>
                                                                                </span>
                                                                            </span>
                                                                        </div>
                                                                        <div class="col-md-12 p-0 form-group proc_deffield1"
                                                                            *ngIf="selected_questionId == each.questionId">
                                                                            <strong>A:</strong>
                                                                            <textarea name="answerUpdate"
                                                                                id="answer_update"
                                                                                [(ngModel)]="selectedAnswerUpdate"
                                                                                class="form-control"
                                                                                placeholder="Enter Answer"></textarea>
                                                                            <span class="procdesc_act">
                                                                                <span class="tsttooltipbtn"
                                                                                    (click)="updateAnswer_Question(each,'answer')"
                                                                                    *ngIf="selectedAnswerUpdate">
                                                                                    <img src="../../../../assets/images/VCM/Green Tick.svg"
                                                                                        class="testplus" />
                                                                                    <span
                                                                                        class="testtooltip">Save</span>
                                                                                </span>
                                                                                <span class="tsttooltipbtn"
                                                                                    (click)="cancelUpdate()">
                                                                                    <img src="../../../../assets/images/VCM/VCM-close.svg"
                                                                                        class="testplus2" />
                                                                                    <span
                                                                                        class="testtooltip">Cancel</span>
                                                                                </span>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </mat-expansion-panel>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </mat-expansion-panel>
                            </div>
                        </div>
                    </div>
                </mat-card>
            </div>
        </div>
    </div>

    <ng-template class="modal-lg" #createtaskmodal>
    </ng-template>


    <ng-template #addresourcemodal>
        <app-add-resources (newItemEvent)="addresources($event)" [resources]="resources"
                [addresourcemodalref]="addresourcemodalref" [userslist]="userslist"></app-add-resources>
    </ng-template>

    <ng-template class="modal-lg" #updatetaskmodal>
        <div class="modal-header modelprhead">
            <h4 class="modal-title pull-left">
                {{selectedtaskdata.id}} / {{selectedtaskdata.taskCategory}} / {{selectedtaskdata.taskName}}
            </h4>
            <span class="pull-right lastedit-date">Last Updated Date : {{selectedtaskdata.lastModifiedTimestamp |
                date}}</span>
        </div>
        <div class="modal-body modelprbody editmodelprbody">
            <div class="container p-0" style="width:100%">
                <form [formGroup]="updatetaskForm" (ngSubmit)="updatetask()">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group col-md-3 pl-0">
                                <label id="assignee" for="assignee">Assignee</label>
                                <span class="labelcont">{{selectedtaskdata.resources| userPipe : users_list}}</span>
                            </div>
                            <div class="form-group col-md-3 pr-0">
                                <label id="startdate" for="startDate">Start Date</label>
                                <span class="labelcont">{{selectedtaskdata.startDate | date}}</span>
                            </div>
                            <div class="form-group col-md-3 pr-0">
                                <label id="enddate" for="endDate">End Date</label>
                                <span class="labelcont">{{selectedtaskdata.endDate | date}}</span>
                            </div>
                            <div class="form-group col-md-3 pr-0">
                                <label id="percentage" for="percentage">Percentage Completed</label>
                                <ng5-slider [(value)]="slider" formControlName="percentageComplete" [options]="options">
                                </ng5-slider>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group col-md-6 pl-0">
                                <label id="status" for="status">Status<span class="star">*</span></label>
                                <select formControlName="status" class="form-control data">
                                    <option value="">Select Status</option>
                                    <option value="New">New</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="In Review">In Review</option>
                                    <option value="Done">Done</option>
                                </select>
                                <span
                                    *ngIf="updatetaskForm.get('status').invalid && updatetaskForm.get('status').touched"
                                    class="errspan required">Status Required*</span>
                            </div>
                            <div class="form-group col-md-6 pr-0">
                                <label id="priority" for="priority">Priority<span class="star">*</span></label>
                                <select formControlName="priority" class="form-control data">
                                    <option value="">Select Priority</option>
                                    <option value="High">High</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                                <span
                                    *ngIf="updatetaskForm.get('priority').invalid && updatetaskForm.get('priority').touched"
                                    class="errspan required">Priority Required*</span>
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label id="summary" class="label-control">Summary</label>
                            <textarea class="form-control" maxlength="150" formControlName="summary" rows="3"
                                placeholder="Enter Summary">
                        </textarea>
                        </div>
                        <div class="form-group col-md-12">
                            <label id="description" class="label-control">Description</label>
                            <textarea class="form-control" maxlength="150" formControlName="description" rows="3"
                                placeholder="Enter Description">
                        </textarea>
                        </div>
                        <div class="col-md-12">
                            <h4 class="module-sub-header-title">Activity</h4>
                            <mat-tab-group [selectedIndex]="selectedTab" id="Project-dashboard-tabs"
                                (selectedTabChange)="onTabChanged($event)">
                                <mat-tab label="Comment">
                                    <div class="t-comments-box">
                                        <div class="add-comment">
                                            <div class="res-circle " *ngIf="profilePicture==false">
                                                {{firstletter|uppercase}}</div>
                                            <div *ngIf="profilePicture==true"><img class="res-circle-img "
                                                    [src]="retrievedImage"></div>
                                            <div>
                                            </div>
                                            <div class="form-group col-md-12 pr-0 comment-input">
                                                <input class=" form-control" maxlength="150" type="text" #commentInput
                                                    id="addcomment" placeholder="Add a comment.." />
                                                <div class="comment-send" id="sendcomment"
                                                    (click)="postcomments(commentInput.value)">
                                                    <img src="../../../../assets/images/Projects/send.svg"
                                                        class="default-img" />
                                                    <img src="../../../../assets/images/Projects/send-blue.svg"
                                                        class="hover-img" />
                                                    <!-- <i class="fab fa-telegram-plane" id="sendcomment" (click)="postcomments(commentInput.value)"></i> -->
                                                </div>
                                            </div>
                                        </div>
                                        <div class="comment comment-level-1" *ngIf="taskcomments!=0">
                                            <!-- <div  class="res-circle " *ngIf="profilePicture==false">{{firstletter|uppercase}}</div> 
                                  <div   *ngIf="profilePicture==true"><img class="res-circle " [src]="retrievedImage" ></div> -->

                                            <div class="comment-content" *ngFor="let c of taskcomments;let i=index">
                                                <div class="comment-content-subdiv">
                                                    <div class="userimage"
                                                        *ngIf="(c.createdUserEmail|userImagePipe: users_list)as result">
                                                        <div class="res-circle " *ngIf="result.length==3">
                                                            {{c.createdUserEmail|userImagePipe: users_list}}
                                                        </div>
                                                        <div *ngIf="result.length>3"><img class="res-circle-img "
                                                                src="{{c.createdUserEmail|userImagePipe: users_list}}">
                                                        </div>
                                                    </div>
                                                    <div class="w-100">
                                                        <div class="row d-flex">
                                                            <div class="col-md-10 pl-0 comment-name">
                                                                {{c.createdBy}} {{c.createdTimestamp | date :'MMM dd, y,
                                                                HH:mm:ss'}}
                                                            </div>
                                                            <div class="col-md-2 pr-0 comment-action"
                                                                *ngIf="i!=commentnumber">
                                                                <button type="button"
                                                                    (click)="editComments(c.comments,i)">
                                                                    Edit
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <div class="commentsadded" *ngIf="i!=commentnumber">
                                                            {{c.comments}}
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="updatecomments"
                                                    *ngIf="(showeditcomment && i==commentnumber)">
                                                    <div class="form-group col-md-12 p-0">
                                                        <input type="text" name="comment" maxlength="150"
                                                            class="form-control" formControlName="editcomment"
                                                            placeholder="Add Comment..." />
                                                    </div>
                                                    <div class="modal-footer modelprfooter">
                                                        <div class="pull-right">
                                                            <button id="updatecancelcomment" type="button"
                                                                class="btn btn-default"
                                                                (click)="posteditcancelcomment()">
                                                                Cancel
                                                            </button>
                                                            <button id="updatesavecomment" type="button"
                                                                class="btn btn-primary btn-update"
                                                                (click)="updatecomment(c.id)">
                                                                Save
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>

                                </mat-tab>
                                <mat-tab label="History">

                                    <ul class="historydiv">
                                        <li *ngFor="let history of taskhistory">

                                            <div class="row">
                                                <div class="col-sm-1 pr-0"
                                                    *ngIf="(history.lastModifiedUserEmail|userImagePipe: users_list)as result">
                                                    <div class="res-circle " *ngIf="result.length==3">
                                                        {{history.lastModifiedUserEmail|userImagePipe: users_list}}
                                                    </div>
                                                    <div *ngIf="result.length>3">
                                                        <img class="res-circle-img"
                                                            src="{{history.lastModifiedUserEmail|userImagePipe: users_list}}">
                                                    </div>
                                                </div>
                                                <div class="col-sm-11 p-0 histcontent">
                                                    {{history.message}}{{history.lastModifiedTimestamp | date:'MMM dd,
                                                    y, HH:mm:ss'}}
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </mat-tab>
                                <mat-tab label="Attachments">
                                    <div class="row attachmentdiv">
                                        <div class="col-md-12 p-0">
                                            <table class="table"
                                                *ngIf="(taskattacments!=null && taskattacments.length!=0)">
                                                <thead>
                                                    <tr>
                                                        <th class="text-left">File Name</th>
                                                        <th class="text-left">File Size (MB)</th>
                                                        <th class="text-left">Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr
                                                        *ngFor="let attachments of taskattacments | paginate: { itemsPerPage: 2, currentPage: att } ">
                                                        <td>{{attachments.fileName}}</td>
                                                        <td class="text-left">{{attachments.fileSize | fileSizePipe}}
                                                        </td>
                                                        <td class="text-left">
                                                            <span class="clickable"
                                                                (click)="downloadTaskAttachment(attachments)">
                                                                <img src="../../../../assets/images/Projects/Download.svg"
                                                                    class="testplus" />
                                                            </span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <pagination-controls
                                                *ngIf="(taskattacments!=null && taskattacments.length!=0)"
                                                class="pull-right" (pageChange)="att = $event"></pagination-controls>
                                        </div>
                                    </div>

                                </mat-tab>
                                <mat-tab label="Resources">
                                    <div class="edit-resourcesdiv">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th class="text-left">Name</th>
                                                    <th class="text-left">Role</th>
                                                    <th class="text-left">Last Updated</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <span
                                                            *ngIf="(taskresourceemail|userImagePipe: users_list)as result">
                                                            <div class="res-circle" *ngIf="result.length==3">
                                                                {{taskresourceemail|userImagePipe: users_list}}
                                                            </div>
                                                            <div *ngIf="result.length>3">
                                                                <img class="res-circle-img"
                                                                    src="{{taskresourceemail|userImagePipe: users_list}}">
                                                            </div>
                                                        </span>
                                                    </td>
                                                    <td>{{selectedtaskdata.resources| userPipe : users_list}}</td>
                                                    <td class="text-left">{{roles?roles:'-'}}</td>
                                                    <td class="text-left">{{selectedtaskdata.lastModifiedTimestamp |
                                                        date:'MMM dd, y, HH:mm:ss'}}</td>
                                                </tr>
                                            </tbody>

                                        </table>
                                    </div>
                                </mat-tab>
                            </mat-tab-group>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal-footer modelprfooter">
            <div class="pull-right">
                <button (click)="resetupdatetaskproject()" class="btn btn-default">Reset</button>
                <button (click)="canceltaskform()" class="btn btn-primary">Cancel</button>
                <button [disabled]="updatetaskForm.invalid" (click)="updatetask()"
                    class="btn btn-primary btn-update">Update</button>
            </div>
        </div>

    </ng-template>

    <ng-template class="modal-up" #uploadtaskfilemodal>
        <div ngb-modal-draggable [ngbModalDraggableHandle]="draggableHandle" class="cursor-all-scroll">
        <div #draggableHandle class="modal-header modelprhead">
            <h4 class="modal-title pull-left">Upload File</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="uploadtaskFilemodalCancel()">
                <span aria-hidden="true"><img alt=""
                        src="../../../../../assets/images/Projects/circle-close.svg"></span>
            </button>
        </div>
        </div>
        <div class="modal-body modelprbody uploadfilebdiv">
            <div class="container p-0" style="width:100%">
                <form [formGroup]="uploadtaskFileForm" (ngSubmit)="submitUploadFileForm()">
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label for="category">File Category<span class="star">*</span></label>
                            <select class="form-control" formControlName="category" [(ngModel)]="file_Category">
                                <option [value]="undefined" disabled hidden>Select Category</option>
                                <option [value]="null" disabled hidden>Select Category</option>
                                <option [value]="" disabled hidden>Select Category</option>
                                <option value="" disabled hidden>Select Category</option>
                                <option *ngFor="let categories of filecategoriesList"
                                    [disabled]="categories.display == 'false'">{{categories.category}}</option>

                            </select>
                            <span
                                *ngIf="uploadtaskFileForm.get('category').invalid && uploadtaskFileForm.get('category').touched"
                                class="errspan required">File Category Required*</span>
                        </div>
                        <div class="form-group col-md-12">

                            <label>Description<span class="star">*</span></label>
                            <textarea name="desc" class="form-control" rows="2" maxlength="151"
                                formControlName="description"
                                (keyup)="uploadFileDescriptionMaxLength($event.target.value)"
                                placeholder="Enter Description...">

              </textarea>
                            <span
                                *ngIf="uploadtaskFileForm.get('description').invalid && uploadtaskFileForm.get('description').touched"
                                class="errspan required">Description Required*</span>
                            <span *ngIf="uploadFileDescriptionFlag" class="errspan required">
                                Maximum of 150 characters
                            </span>
                        </div>

                        <div class="form-group col-md-12">
                            <label>Upload<span class="star">*</span></label>
                            <div class="box-fileupload">
                                <input type="file" name="file" (change)="chnagefileUploadForm($event)" id="file"
                                    class="inputfile" [multiple]='file_Category != "Template"' />
                                <label for="file" matTooltip="Upload File" (change)="chnagefileUploadForm($event)">
                                    <img src="../../../../assets/images/Projects/fileupload.svg" class="testplusupload">

                                    <span>Select File</span>
                                </label>
                            </div>

                            <div class="upload-filesdiv">
                                <div class="row">
                                    <div class="col-md-4 pl-0" *ngFor="let selected of listOfFiles">
                                        <div class="project-card">
                                            <span class="pull-right clickable" matTooltip="Remove"
                                                (click)="removeSelectedFile(index)">
                                                <img class="testplus1"
                                                    src="../../../../assets/images/Projects/circle-close.svg" />
                                                <!-- <i class="fa fa-trash"></i> -->
                                            </span>
                                            <span class="card-placeholder">
                                                File Name : {{selected.name}}
                                            </span>

                                            <span class="file-size">
                                                Size : {{selected.size | fileSizePipe}}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <span
                                *ngIf="uploadtaskFileForm.get('filePath').invalid && uploadtaskFileForm.get('filePath').touched"
                                class="errspan required"></span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal-footer modelprfooter">
            <div class="pull-right">
                <button (click)="uploadtaskFilemodalCancel()" class="btn btn-default">Cancel</button>
                <button [disabled]="uploadtaskFileForm.invalid || uploadFileDescriptionFlag"
                    (click)="submitUploadFileForm()" class="btn btn-primary btn-update">Submit</button>
            </div>
        </div>
    </ng-template>

</div>
<ng-template class="modal-up" #uploadFilemodal>
    <div ngb-modal-draggable [ngbModalDraggableHandle]="draggableHandle" class="cursor-all-scroll">
        <div #draggableHandle class="modal-header modelprhead">
    <!-- <div class="modal-header modelprhead"> -->
        <h4 class="modal-title pull-left">Upload File</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="uploadFilemodalCancel()">
            <span aria-hidden="true"><img alt="" src="../../../../../assets/images/Projects/circle-close.svg"></span>
        </button>
    </div>
</div>
    <div class="modal-body modelprbody uploadfilebdiv">
        <div class="container p-0" style="width:100%">
            <form [formGroup]="uploadFileFormDetails" (ngSubmit)="submitUploadFileFormattachment()">
                <div class="row">
                    <div class="form-group col-md-12">
                        <label for="fileCategory">File Category<span class="star">*</span></label>
                        <select class="form-control" name="file_cate" [(ngModel)]="file_Category"
                            formControlName="fileCategory" required>
                            <option [value]="undefined" disabled hidden>Select Category</option>
                            <option [value]="null" disabled hidden>Select Category</option>
                            <option [value]="" disabled hidden>Select Category</option>
                            <option value="" disabled hidden>Select Category</option>
                            <option *ngFor="let categories of filecategoriesList"
                                [disabled]="categories.display == 'false'">{{categories.category}}</option>
                        </select>
                        <span
                            *ngIf="uploadFileFormDetails.get('fileCategory').invalid && uploadFileFormDetails.get('fileCategory').touched"
                            class="errspan required">File Category Required*</span>
                    </div>
                </div>
                <div class="form-group col-md-12">

                    <label>Description<span class="star">*</span></label>
                    <textarea name="desc" class="form-control" maxlength="151" rows="2" formControlName="description"
                        (keyup)="uploadFileDescriptionMaxLength($event.target.value)"
                        placeholder="Enter Description...">

                  </textarea>
                    <span
                        *ngIf="uploadFileFormDetails.get('description').invalid && uploadFileFormDetails.get('description').touched"
                        class="errspan required">Description Required*</span>
                    <span *ngIf="uploadFileDescriptionFlag" class="errspan required">
                        Maximum of 150 characters
                    </span>
                </div>
                <div class="form-group col-md-12">

                    <label>Upload<span class="star">*</span></label>
                    <div class="box-fileupload">
                        <input type="file" name="file" (change)="chnagefileUploadForm($event)" id="file"
                            class="inputfile" [multiple]='file_Category != "Template"' />
                        <label for="file" matTooltip="Upload File" (change)="chnagefileUploadForm($event)">
                            <img src="../../../../assets/images/Projects/fileupload.svg" class="testplusupload">

                            <span>Select File</span>
                        </label>
                    </div>

                    <div class="upload-filesdiv">
                        <div class="row">
                            <div class="col-md-4 pl-0" *ngFor="let selected of listOfFiles">
                                <div class="project-card">
                                    <span class="pull-right clickable" matTooltip="Remove"
                                        (click)="removeSelectedFile(index)">
                                        <img class="testplus1"
                                            src="../../../../assets/images/Projects/circle-close.svg" />
                                    </span>
                                    <span class="card-placeholder">
                                        File Name : {{selected.name}}
                                    </span>

                                    <span class="file-size">
                                        Size : {{selected.size | fileSizePipe}}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <span
                        *ngIf="uploadFileFormDetails.get('uploadFile').invalid && uploadFileFormDetails.get('uploadFile').touched"
                        class="errspan required">File Required*</span>

                </div>

            </form>
        </div>
    </div>
    <div class="modal-footer modelprfooter">
        <div class="pull-right">
            <button (click)="uploadFilemodalCancel()" class="btn btn-default">Cancel</button>
            <button [disabled]="uploadFileFormDetails.invalid || uploadFileDescriptionFlag"
                (click)="submitUploadFileFormattachment()" class="btn btn-primary btn-update">Submit</button>
        </div>
    </div>
</ng-template>
<div id="canvas1"></div>
<div id="canvas2"></div>