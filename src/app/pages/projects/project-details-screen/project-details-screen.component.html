<div class="project-details-main" *ngIf="projectDetails!=undefined">
  <div class="module-heading title">
    <div>
      <span class="module-back-button" *ngIf="programId==undefined" routerLink="/pages/projects/listOfProjects">
        <i aria-hidden="true" class="fas fa-arrow-left"></i>
      </span>
      <span class="module-back-button" *ngIf="programId!=undefined" [routerLink]="['/pages/projects/programdetails']"
        [queryParams]="       {id:programId}">
        <i aria-hidden="true" class="fas fa-arrow-left"></i>
      </span>
      <span class="module-header-title">
        Project Details
      </span>
    </div>
    <div class="ml-auto module-heading-buttons">
      <span class="pull-right">
        <span (click)="navigateToProjectRepo()" class="prj-db-btn">
          <button class="tsttooltipbtn">
            <img src="../../../../assets/images/Projects/Project-Repo.svg" class="testplus1" >
            <span class="testtooltip">Project Repo</span>
          </button>
          <button class="tsttooltipbtn" (click)="navigateToOrchestration()">
                <img height="20" width="20" src="../../../assets/images/BPMS/orchestration.svg">
                <span class="testtooltip">Orchestration</span>
              </button>
          <!-- <button class="btn btn-default">
            <img src="../../../../assets/images/Projects/Project-Repo.svg" class="testplus default-img">
            <img src="../../../../assets/images/Projects/project-repo-white.svg" class="testplus hover-img">
            Project Repo
          </button> -->
        </span>
        <!-- <span class="projects-menu-item"><i class="ri-history-line"></i></span> -->
        <span class="prj-db-btn">
          <button  [matMenuTriggerFor]="menu" class="tsttooltipbtn">
            <img class="more testplus1" src="../../../../assets/images/Projects/Download.svg">
            <span class="testtooltip">Download</span>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="downloadExcel()">Download as Excel</button>
          </mat-menu>        
        </span>
        <span  *ngIf="(!(this.userRole.includes('System Admin')) && userName==projectDetails.createdBy)
        || (this.userRole.includes('System Admin'))">
        <span class="prjdetails-headerbuttons" *ngIf="editdata==true" (click)="projectdetails()">
          <button class="btn btn-default">Cancel</button>
        </span>
        <span *ngIf="editdata==true" (click)="updateprojectDetails()">
          <button class="btn btn-primary">Save</button>
        </span>
        <span class="prjdetails-headerbuttons" *ngIf="editdata==false">
          <button class="btn btn-primary" (click)="editdata=true">
            <img class="testplus" src="../../../../assets/images/Projects/edit.svg"> Edit
          </button>
        </span>          
       </span>
      </span>
    </div>

  </div>
  <div class="new-prj-details">
    <mat-card id="projects_details_screen" *ngIf="projects_toggle==false">

      <div class="project-details-div">
        <div class="row newprhcl">
          <div class="col-md-8 p-0 project-info">
            <div>
              <img src="..\assets\images\Projects\project_icon.svg" alt="">
            </div>
            <div class="project-data">
              <div class="prj-title" *ngIf="editdata==false">
                <span class="tab-text"
                  *ngIf="projectDetails.projectName==null || projectDetails.projectName==undefined">-</span>
                <span class="tab-text">{{projectDetails.projectName}}</span>
              </div>
              <div class="prj-title" *ngIf="editdata==true">
                <input type="text"  maxlength="50" (change)="projectDetails.projectName=$event.target.value"
                  [value]="(projectDetails.projectName==undefined||projectDetails.projectName==null)?'':projectDetails.projectName"
                  class="small-input" placeholder="Enter Project Name">
              </div>

              <div *ngIf="editdata==false">
                <span class="projectdesc"
                  *ngIf="projectDetails.projectPurpose==undefined || projectDetails.projectPurpose==null || projectDetails.projectPurpose=='' " class="h6">-</span>
                  <span class="projectdesc">{{projectDetails.projectPurpose}}</span>
              </div>  
              <div *ngIf="editdata==true">
                <textarea  maxlength="150" (change)="projectDetails.projectPurpose=$event.target.value"
                [value]="(projectDetails.projectPurpose==undefined||projectDetails.projectPurpose==null)?'':projectDetails.projectPurpose"
                class="small-input" placeholder="Enter Project Description" maxlength="150"></textarea>                    
              </div> 
            </div>
          </div>
          <div class="col-md-4 pr-0">
            <div class="row newprjdates">
              <div class="status-tabs">
                <!-- <div class="user-owner-div">
                  <span class="user-owner">{{owner_letters | uppercase}}</span>
                  </div> -->
                  <div class="user-owner-div" *ngIf="(projectDetails.owner|userImagePipe: users_list)as result">
                    <div  *ngIf="result.length==3">
                      <span class="letter-image">{{owner_letters | uppercase}}</span>
                    </div>
                    <div *ngIf="result.length>3">
                      <span >  <img class="project-owner-img " src="{{projectDetails.owner|userImagePipe: users_list}}"></span>
                    </div>
                  </div>
                <div class="status-data">                  
                  <span class="tab-text" *ngIf="projectDetails.owner==null">-</span>
                  <span class="tab-text">{{projectDetails.owner| userPipe : users_list}}</span>
                  <span class="labeltit">Project Owner</span>
                </div>
              </div>
            </div>

            <!-- <div class="col-sm-4">
                  <label class="labeltit">Start Date</label>
                  <label class="labelcont">{{projectDetails.startDate | date}}</label>
                </div>
                <div class="col-sm-4">
                  <label class="labeltit">End Date</label>
                  <label class="labelcont">{{projectDetails.endDate | date}}</label>
                </div>
                <div class="col-sm-4">
                  <label class="labeltit">Status</label>
                  <p class="labelcont">{{projectDetails.status}}</p>
                </div> -->

          </div>
        </div>
        <div class="row">

          <div class="col-sm-12 p-0 project-details-set projinfo">
              <!-- <div class="det-innerheader">
                <span class="module-sub-header-title">PROJECT INFO</span>
              </div> -->
              <div class="row">
                  <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit">Initiative</span>
      
                      <span class="tab-text"
                        *ngIf="projectDetails.initiatives==undefined ||  projectDetails.initiatives==null">-</span>
                      <span class="tab-text labelcont"
                        *ngIf="projectDetails.initiatives!=undefined &&  projectDetails.initiatives!=null">
                        {{projectDetails.initiatives|initiativePipe : initiatives|titlecase}}
                      </span>
                    </div>
                  </div>
                  <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit">Value Chain</span>
      
                      <span class="tab-text"
                        *ngIf="projectDetails.mapValueChain==null||projectDetails.mapValueChain==''|| projectDetails.mapValueChain==undefined">-</span>
                      <span
                        *ngIf="projectDetails.mapValueChain!=null && projectDetails.mapValueChain!=''&& projectDetails.mapValueChain!=undefined"
                        class="tab-text labelcont">{{projectDetails.mapValueChain}}</span>
      
                    </div>
                  </div>
                  <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit">Process</span>
                        <div *ngIf="editdata==false">
                          <span class="tab-text"
                            *ngIf="projectDetails.process==null || projectDetails.process==undefined || projectDetails.process==''">-</span>
                          <span *ngIf="projectDetails.process!=null && projectDetails.process!=undefined && projectDetails.process!=''"
                            class="tab-text labelcont">{{projectDetails.process | processName : processes}}</span>
                        </div>
                        <div *ngIf="editdata==true">
                          <select class="small-input" (change)="projectDetails.process=$event.target.value"
                          [value]="(projectDetails.process==undefined||projectDetails.process==null)?'':projectDetails.process">
                          <option value="">Select Process</option>
                          <option *ngFor="let process of processes" [value]="process.processId">{{process.processName}}</option>
                        </select>
                        </div>
                    </div>
                  </div>
                  <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit">Project Health</span>
      
                      <div *ngIf="editdata==false">
                        <span
                          *ngIf="projectDetails.projectHealth != null && projectDetails.projectHealth != undefined && projectDetails.projectHealth !='' "
                          class="tab-text labelcont">{{projectDetails.projectHealth }}</span>
                        <span
                          *ngIf="projectDetails.projectHealth == null || projectDetails.projectHealth == undefined || projectDetails.projectHealth =='' "
                          class="tab-text labelcont">-</span>
      
                      </div>
      
                      <span *ngIf="editdata==true" class="tab-text labelcont">
                        <select class="small-input" (change)="projectDetails.projectHealth=$event.target.value"
                          [value]="(projectDetails.projectHealth==undefined||projectDetails.projectHealth==null)?'':projectDetails.projectHealth">
                          <option value="">Select Project Health</option>
                          <option value="Good">Good</option>
                          <option value="Needs Attention">Needs Attention</option>
                          <option value="Risk">Risk</option>
                        </select>
                      </span>
                    </div>
                  </div>
                  <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit">Project Priority</span>
    
                      <div *ngIf="editdata==false">
                        <span class="tab-text"
                          *ngIf="projectDetails.priority==null || projectDetails.priority==undefined">-</span>
                        <span class="tab-text labelcont">{{projectDetails.priority}}</span>
                      </div>
                      <div *ngIf="editdata==true">
                        <select class="small-input" (change)="projectDetails.priority=$event.target.value"
                          [value]="(projectDetails.priority==undefined||projectDetails.priority==null)?'':projectDetails.priority">
                          <option value="">Select Project Priority</option>
                          <option value="High">High</option>
                          <option value="Medium">Medium</option>
                          <option value="Low">Low</option>
                        </select>
                      </div>
                    </div>
                </div>
                  <!-- <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit">Process ID</span>
      
                      <span class="tab-text labelcont">{{projectDetails.process }}</span>
                    </div>
                  </div> -->
                  <!-- <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit" >Resources</span>
                      <span class="tab-text labelcont" >{{resourceslength}}</span>
                    </div>
                  </div> -->
              </div>
              <div class="row">
                <div class="col-sm-2 p-0">
                  <div class="mainset">
                    <span class="labeltit">Status</span>
  
                    <div *ngIf="editdata==false">
                      <span class="tab-text labelcont">{{projectDetails.status}}</span>
                    </div>
                    <div *ngIf="editdata==true">
                      <select class="small-input" (change)="projectDetails.status=$event.target.value"
                        [value]="(projectDetails.status==undefined||projectDetails.status==null)?'':projectDetails.status">
                        <option value="">Select Status</option>
                        <option value="New">New</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Pipeline">Pipeline</option>
                        <option value="On Hold">On Hold</option>
                        <option value="In Review">In Review</option>
                        <option value="Deployed">Deployed</option>
                        <option value="Closed">Closed</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-sm-2 p-0">
                <div class="mainset">
                  <span class="labeltit">Start Date</span>
                  <div *ngIf="editdata==false">
                    <span *ngIf="projectDetails.startDate != null && projectDetails.startDate != undefined && projectDetails.startDate !='' "
                      class="tab-text labelcont">{{projectDetails.startDate | date }}</span>
                    <span *ngIf="projectDetails.startDate == null || projectDetails.startDate == undefined || projectDetails.startDate =='' "
                      class="tab-text labelcont">-</span>
                  </div>
                  <div *ngIf="editdata==true">
                    <input type="date" class="small-input" (change)="projectDetails.startDate=$event.target.value" [value]="projectDetails.startDate">
                  </div>
                </div>
                </div>
                <div class="col-sm-2 p-0">
                  <div class="mainset">
                    <span class="labeltit">End Date</span>
                    <div *ngIf="editdata==false">
                        <span  *ngIf="projectenddate != null && projectenddate != undefined && projectenddate !='' "  class="tab-text labelcont" >{{projectenddate | date }}</span>
                      <span  *ngIf="projectenddate == null || projectenddate == undefined || projectenddate =='' "  class="tab-text labelcont" >-</span>
                     
                    </div>
                    <div *ngIf="editdata==true">
                      <!-- <input type="date" name="daytime" max="9999-12-31" [min]="mindate" formControlName="endDate" (keydown)="endDateMethod()"
                      (change)="projectenddate=$event.target.value"
                      [value]="projectenddate | date:'yyyy-mm-dd'" class="small-input"
                      [ngClass]="projectenddate?'enteredfield-color':'inputfield-color'" > -->
                      <input type="date" class="small-input" (change)="projectenddate=$event.target.value" [value]="projectenddate">
                    </div>
                  </div>
                </div>
                  <!-- <div class="col-sm-4 p-0">
                    <div class="mainset">
                      <span class="labeltit">Progress Percentage</span>
    
                      <span *ngIf="editdata==false" class="tab-text labelcont">{{projectDetails.projectPercentage}}%
                        <mat-progress-bar mode="determinate" value={{projectDetails.projectPercentage}}></mat-progress-bar>
                      </span>
                      <div *ngIf="editdata==true" class="d-flex">
                        <input type="range" (change)="projectDetails.projectPercentage=$event.target.value" class="small-input"
                          [value]="(projectDetails.projectPercentage==undefined||projectDetails.projectPercentage==null)?0:projectDetails.projectPercentage"
                          step="1" min="0" max="100">
                        <div class="py-5">
                          {{projectDetails.projectPercentage}}%
                        </div>
                      </div>
                    </div>
                  </div> -->
                <div class="col-sm-2 p-0">
                    <div class="mainset">
                      <span class="labeltit">Efforts Spent (Hrs)</span>
                      <div *ngIf="editdata==false">
                        <span
                          *ngIf="projectDetails.effortsSpent != null && projectDetails.effortsSpent != undefined && projectDetails.effortsSpent !='' "
                          class="tab-text labelcont">{{projectDetails.effortsSpent }}</span>
                        <span
                          *ngIf="projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='' "
                          class="tab-text labelcont">-</span>
    
                      </div>
                      <div *ngIf="editdata==true">
                        <input type="text" (change)="projectDetails.effortsSpent=$event.target.value" class="small-input"
                          placeholder="Efforts Spent"
                          [value]="(projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='')?'':projectDetails.effortsSpent">
                      </div>
                    </div>
                </div>
                <div class="col-sm-2 p-0">
                  <div class="mainset">
                    <span class="labeltit">Progress Percentage</span>
  
                    <span *ngIf="editdata==false" class="tab-text labelcont">{{projectDetails.projectPercentage}}%
                      <mat-progress-bar mode="determinate" value={{projectDetails.projectPercentage}}></mat-progress-bar>
                    </span>
                    <div *ngIf="editdata==true" class="d-flex">
                      <input type="range" (change)="projectDetails.projectPercentage=$event.target.value" class=""
                        [value]="(projectDetails.projectPercentage==undefined||projectDetails.projectPercentage==null)?0:projectDetails.projectPercentage"
                        step="1" min="0" max="100">
                      <div class="py-5">
                        {{projectDetails.projectPercentage}}%
                      </div>
                    </div>
                  </div>
                </div>
                <!-- <div class="col-sm-12 p-0">
                  <div class="mainset">
                    <span class="labeltit">Project Description</span>
  
                    <div *ngIf="editdata==false">
  
                      <span class="tab-text labelcont">{{projectDetails.projectPurpose}}</span>
                      <span
                      *ngIf="projectDetails.projectPurpose == null || projectDetails.projectPurpose == undefined || projectDetails.projectPurpose =='' "
                      class="tab-text labelcont">-</span>
  
                    </div>
                    <div *ngIf="editdata==true">
                      <textarea  (change)="projectDetails.projectPurpose=$event.target.value"
                        [value]="(projectDetails.projectPurpose==undefined||projectDetails.projectPurpose==null)?'':projectDetails.projectPurpose"
                        class="small-input" placeholder="Enter Project Description"></textarea>
                    </div>
                  </div>
              </div> -->
            </div>
          </div>
          
          <!-- <div class="col-sm-6 p-0 project-details-set progressdet">
              <div class="det-innerheader">
                  <span class="module-sub-header-title">PROGRESS DETAILS</span>
                  <span style="margin-left: 10px" *ngIf="(!(this.userRole.includes('System Admin')) && userName==projectDetails.createdBy)
                  || (this.userRole.includes('System Admin'))">
                      <span *ngIf="editdata==true" (click)="projectdetails()">
                          <button class="btn btn-default">
                            Cancel
                          </button>
                        </span>
                        <span *ngIf="editdata==true" (click)="updateprojectDetails()">
                          <button class="btn btn-primary">
                            Save
                          </button>
                        </span>
                
                        <span *ngIf="editdata==false">
                          <button class="btn btn-primary" (click)="editdata=true">
                            Edit
                            <img class="testplus" src="../../../../assets/images/Projects/edit.svg"> 
                          </button>
                        </span>
                  </span>
              </div>   
          </div> -->
      
        </div>

        <div class="d-flex w-100 project-details-setOne" style="display: none;">
          <div class="d-flex w-100 project-details-set">
            <div class="d-flex">
              <div class="py-5">
                <img src="..\assets\images\Projects\process_icon.svg" alt="">
              </div>
              <div class="py-5">
                <span class="labeltit">Initiative</span>

                <span class="tab-text"
                  *ngIf="projectDetails.initiatives==undefined ||  projectDetails.initiatives==null">-</span>
                <span class="tab-text labelcont"
                  *ngIf="projectDetails.initiatives!=undefined &&  projectDetails.initiatives!=null">
                  {{projectDetails.initiatives}}
                </span>

                <!-- <span *ngIf="editdata==true">
                          <select class="small-input" (change)="projectDetails.initiatives=$event.target.value" [value]="(projectDetails.initiatives==undefined||projectDetails.initiatives==null)?'':projectDetails.initiatives">
                            <option>Select Initiatives</option>
                            <option>Process Improvement</option>
                            <option>Business Improvement</option>
                          </select>
      
                        </span> -->
                <!-- <span class="clickable text-success " *ngIf="editdata.initiatives==true" (click)="editdata.initiatives=false">&nbsp;<i class="fa fa-check"></i></span> -->
              </div>
            </div>
          </div>
          <div class="d-flex w-100 project-details-set">
            <div class="d-flex">
              <div class="py-5">
                <img src="..\assets\images\Projects\process_icon.svg" alt="">
              </div>
              <div class="py-5">
                <span class="labeltit">Value Chain</span>

                <span class="tab-text"
                  *ngIf="projectDetails.mapValueChain==null||projectDetails.mapValueChain==''|| projectDetails.mapValueChain==undefined">-</span>
                <span
                  *ngIf="projectDetails.mapValueChain!=null && projectDetails.mapValueChain!=''&& projectDetails.mapValueChain!=undefined"
                  class="tab-text labelcont clickable">{{projectDetails.mapValueChain}}</span>

                <!-- <span *ngIf="editdata==true">
                          <select class="small-input" (change)="projectDetails.mapValueChain=$event.target.value"  [value]="(projectDetails.mapValueChain==undefined||projectDetails.mapValueChain==null)?'':projectDetails.mapValueChain">
                            <option>Select Value Chain</option>
                            <option>Invoice Managment</option>
                            <option>Acme Managment</option>
                            <option>E-Commerce</option>
                          </select>
                        </span> -->
                <!-- <span *ngIf="editdata==true"  class="text-success clickable"><i class="fa fa-check"></i></span> -->
              </div>
            </div>
          </div>

          <div class="d-flex w-100 project-details-set">
            <div class="d-flex">
              <div class="py-5">
                <img src="..\assets\images\Projects\bot.svg" alt="">
              </div>
              <div class="py-5">
                <span class="labeltit">Process</span>

                <span class="tab-text"
                  *ngIf="projectDetails.process==null || projectDetails.process==undefined || projectDetails.process==''">-</span>
                <span
                  *ngIf="projectDetails.process!=null && projectDetails.process!=undefined && projectDetails.process!=''"
                  class="tab-text clickable labelcont">{{projectDetails.process | processName : processes}}</span>
                <!-- <span *ngIf="editdata==true" class="tab-text labelcont clickable" >
                          <select class="small-input" (change)="projectDetails.process=$event.target.value"  [value]="(projectDetails.process==undefined||projectDetails.process==null)?'':projectDetails.process">
                            <option value="">Select Process</option>
                            <option *ngFor="let process of processes" [value]="process.processId">{{process.processName}}</option>
                          </select>
                        </span>
                        <span *ngIf="editdata.process==true" class="text-sucess clickable" (click)="editdata.process=false"><i class="fa fa-check"></i></span> -->
              </div>
            </div>
          </div>

          <div class="d-flex w-100 project-details-set">
            <div class="d-flex">
              <div class="py-5">
                <img src="..\assets\images\Projects\document.svg" alt="">
              </div>
              <div class="py-5">
                <span class="labeltit">Process Id</span>

                <span class="tab-text labelcont">{{projectDetails.process }}</span>
              </div>
            </div>
          </div>

          <div class="d-flex w-100 project-details-set">
            <div class="d-flex">
              <div class="py-5">
                <img src="..\assets\images\Projects\document.svg" alt="">
              </div>
              <div class="py-5">
                <span class="labeltit">Start Date</span>

                <div>
                  <span
                    *ngIf="projectDetails.startDate != null && projectDetails.startDate != undefined && projectDetails.startDate !='' "
                    class="tab-text labelcont">{{projectDetails.startDate | date }}</span>
                  <span
                    *ngIf="projectDetails.startDate == null || projectDetails.startDate == undefined || projectDetails.startDate =='' "
                    class="tab-text labelcont">-</span>
                </div>
                <!-- <div *ngIf="editdata==true">
                          <input type="date" [value]="(projectDetails.startDate | date : 'MM-dd-yyyy')" class="small-input">
                        </div> -->
              </div>
            </div>
          </div>
          <div class="d-flex w-100 project-details-set">
            <div class="d-flex">
              <div class="py-5">
                <img src="..\assets\images\Projects\document.svg" alt="">
              </div>
              <div class="py-5">
                <span class="labeltit">End Date</span>

                <div>
                  <span
                    *ngIf="projectDetails.endDate != null && projectDetails.endDate != undefined && projectDetails.endDate !='' "
                    class="tab-text labelcont">{{projectDetails.endDate | date }}</span>
                  <span
                    *ngIf="projectDetails.endDate == null || projectDetails.endDate == undefined || projectDetails.endDate =='' "
                    class="tab-text labelcont">-</span>

                </div>
                <!-- <div *ngIf="editdata==true">
                          <input type="date" [value]="projectDetails.endDate | date : 'MM/dd/yyyy'" class="small-input">
                        </div> -->
              </div>
            </div>
          </div>
          <div class="d-flex w-100 project-details-set">
            <div class="d-flex">
              <div class="py-5">
                <img src="..\assets\images\Projects\process_icon.svg" alt="">
              </div>
              <div class="py-5">
                <span class="labeltit">Resources</span>


                <span class="tab-text labelcont">{{projectDetails.resources.length}}</span>
              </div>
            </div>
          </div>
          <!-- <td>
                  <div class=" formelement">
                      <div class="status-tabs">
                          <div class="body-img">
                            <img src="..\assets\images\Projects\process_icon.svg" alt="" >
                          </div>
                          <div class="status-data">
                            <span class="labeltit">Project Owner</span>
                            <span class="tab-text" *ngIf="projectDetails.owner==null" ><b>-</b></span>
                            <span class="tab-text" ><b>{{projectDetails.owner| userPipe : users_list}}</b></span>
                          </div>
                        </div>
                  </div>
              </td> -->

        </div>

        <div class="d-flex w-100" style="display: none;">
          <div class="d-flex w-100 project-details-set">
            <div class="py-5">
              <img src="..\assets\images\Projects\process_icon.svg" alt="">
            </div>
            <div class="py-5">
              <span class="labeltit">Project Health</span>

              <div *ngIf="editdata==false">
                <span
                  *ngIf="projectDetails.projectHealth != null && projectDetails.projectHealth != undefined && projectDetails.projectHealth !='' "
                  class="tab-text labelcont">{{projectDetails.projectHealth }}</span>
                <span
                  *ngIf="projectDetails.projectHealth == null || projectDetails.projectHealth == undefined || projectDetails.projectHealth =='' "
                  class="tab-text labelcont">-</span>

              </div>

              <span *ngIf="editdata==true" class="tab-text labelcont">
                <select class="small-input" (change)="projectDetails.projectHealth=$event.target.value"
                  [value]="(projectDetails.projectHealth==undefined||projectDetails.projectHealth==null)?'':projectDetails.projectHealth">
                  <option value="">Select Project Health</option>
                  <option value="Good">Good</option>
                  <option value="Need Attention">Need Attention</option>
                  <option value="Risk">Risk</option>
                </select>
              </span>
            </div>
          </div>

          <div class="d-flex w-100 project-details-set">

            <div class="py-5">
              <img src="..\assets\images\Projects\process_icon.svg" alt="">
            </div>
            <div class="py-5">
              <span class="labeltit">Progress Percentage</span>

              <span *ngIf="editdata==false" class="tab-text labelcont">{{projectDetails.projectPercentage}}%
                <mat-progress-bar mode="determinate" value={{projectDetails.projectPercentage}}></mat-progress-bar>
              </span>
              <div *ngIf="editdata==true" class="d-flex">
                <input type="range" (change)="projectDetails.projectPercentage=$event.target.value" class="small-input"
                  [value]="(projectDetails.projectPercentage==undefined||projectDetails.projectPercentage==null)?0:projectDetails.projectPercentage"
                  step="1" min="0" max="100">
                <div class="py-5">
                  {{projectDetails.projectPercentage}}%
                </div>
              </div>

            </div>
          </div>

          <div class="d-flex w-100 project-details-set">

            <div class="py-5">
              <img src="..\assets\images\Projects\process_icon.svg" alt="">
            </div>
            <div class="py-5">
              <span class="labeltit">Efforts Spent</span>
              <div *ngIf="editdata==false">
                <span
                  *ngIf="projectDetails.effortsSpent != null && projectDetails.effortsSpent != undefined && projectDetails.effortsSpent !='' "
                  class="tab-text labelcont">{{projectDetails.effortsSpent }}</span>
                <span
                  *ngIf="projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='' "
                  class="tab-text labelcont">-</span>

              </div>
              <div *ngIf="editdata==true">
                <input type="text" maxlength="20" (keypress)="projectDetails.effortsSpent=$event.target.value" class="small-input"
                  placeholder="Efforts Spent"
                  [value]="(projectDetails.effortsSpent == null || projectDetails.effortsSpent == undefined || projectDetails.effortsSpent =='')?'':projectDetails.effortsSpent">
              </div>
            </div>

          </div>

          <div class="d-flex w-100 project-details-set">

            <div class="py-5">
              <img src="..\assets\images\Projects\process_icon.svg" alt="">
            </div>
            <div class="py-5">
              <span class="labeltit">Project Priority</span>

              <div *ngIf="editdata==false">
                <span class="tab-text"
                  *ngIf="projectDetails.priority==null || projectDetails.priority==undefined">-</span>
                <span class="tab-text labelcont">{{projectDetails.priority}}</span>
              </div>
              <div *ngIf="editdata==true">
                <select class="small-input" (change)="projectDetails.priority=$event.target.value"
                  [value]="(projectDetails.priority==undefined||projectDetails.priority==null)?'':projectDetails.priority">
                  <option value="">Select Project Priority</option>
                  <option value="High">High</option>
                  <option value="Medium">Medium</option>
                  <option value="Low">Low</option>
                </select>
              </div>
            </div>
          </div>

          <div class="d-flex w-100 project-details-set">
            <div class="py-5">
              <img src="..\assets\images\Projects\process_icon.svg" alt="">
            </div>
            <div class="py-5">
              <span class="labeltit">Project Purpose</span>

              <div *ngIf="editdata==false">
                <span class="tab-text labelcont">Improve ROI</span>
              </div>
              <div *ngIf="editdata==true">
                <input type="text"
                  [value]="(projectDetails.projectPurpose==undefined||projectDetails.projectPurpose==null)?'':projectDetails.projectPurpose"
                  class="small-input" maxlength="50" placeholder="Enter Project Purpose">
              </div>
            </div>
          </div>
          <div class="d-flex w-100 project-details-set">
            <div class="py-5">
              <img src="..\assets\images\Projects\process_icon.svg" alt="">
            </div>
            <div class="py-5">
              <span class="labeltit">Status</span>

              <div *ngIf="editdata==false">
                <span class="tab-text labelcont">{{projectDetails.status}}</span>
              </div>
              <div *ngIf="editdata==true">
                <select class="small-input" (change)="projectDetails.status=$event.target.value"
                  [value]="(projectDetails.status==undefined||projectDetails.status==null)?'':projectDetails.status">
                  <option value="">Select Status</option>
                  <option value="New">New</option>
                  <option value="In Progress">In Progress</option>
                  <option value="On Hold">On Hold</option>
                  <option value="In Review">In Review</option>
                  <option value="Deployed">Deployed</option>
                </select>
              </div>
            </div>
          </div>
          <div class="d-flex w-100 project-details-set">
            <div class="py-5">
              <img src="..\assets\images\Projects\process_icon.svg" alt="">
            </div>
            <div class="py-5">
              <span class="labeltit">Burnt Rate</span>

              <span><input type="text" class="small-input" maxlength="50" placeholder="Enter Burnt Rate Value" /></span>
            </div>
          </div>
        </div>
      </div>
    </mat-card>

    <mat-card class="new-prj-tasklist" id="projects_details_screen" *ngIf="projects_toggle==false">
      <div class="row module-subheader-title">
        <div class="col-md-4 p-0">
          <span class="module-sub-header-title">
            Tasks
          </span>
        </div>
        <div class="col-md-8 pr-0">
          <span class="pull-right">
            <!--<span class="projects-menu-item">
             <button type="button" class="btn btn-default new-attach-btn">Attachments</button> 
          </span>-->
            <span class="">
              <button type="button" class="btn btn-primary"  routerLink="/pages/projects/create-task" [queryParams]="{project_id: project_id}" >
                <img src="../../../../assets/images/Projects/White-plus.svg" class="testplus" />Create New
              </button>
            </span>
          </span>
        </div>
      </div>

      <div class="tasks-body">
        <!-- <img src="..\assets\images\Projects\no_items.svg" height="190px" >
      <figcaption>No items to display!</figcaption> -->
        <table mat-table #sort10="matSort" [dataSource]="dataSource2" matSort class="projecttable table" id="autotable">

          <ng-container matColumnDef="taskCategory">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element.taskCategory!=null"
                [matTooltip]="element.taskCategory">{{element.taskCategory}}</span>
              <span *ngIf="element.taskCategory==null">---</span>
            </td>

          </ng-container>

          <ng-container matColumnDef="taskName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Task Name</th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element.taskName!=null" [matTooltip]="element.taskName">{{getreducedValue(element.taskName)}}</span>
              <span *ngIf="element.taskName==null">---</span>
            </td>
          </ng-container>
          <ng-container matColumnDef="resources">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Resource </th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="element.resources!=null">{{element.resources| userPipe : users_list}}</span>
              <span *ngIf="element.resources==null">---</span>
              <!-- <div class="addresource-btn">
                <span mat-mini-fab color="primary" matTooltip="Add Resources" (click)="addresource(addresourcemodal)"><i class="fa fa-plus"></i></span>
            </div> -->
          </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Status  </th>
        <td mat-cell *matCellDef="let element">
          <span *ngIf="element.status!=null">{{element.status}}</span>
          <span *ngIf="element.status==null">---</span>
        </td>
    </ng-container>
     
      <ng-container matColumnDef="percentage">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Percentage Complete</th>
        <td mat-cell *matCellDef="let element" >
          <span class="tab-text labelcont" >{{element.percentageComplete}}%
            <mat-progress-bar mode="determinate" [(value)]="element.percentageComplete"></mat-progress-bar>
        </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="lastModifiedTimestamp">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Updated</th>
        <td mat-cell *matCellDef="let element" >
          <span *ngIf="element.lastModifiedTimestamp!=null">{{element.lastModifiedTimestamp | date:'MMM dd, y, HH:mm:ss'}}</span>
          <span *ngIf="element.lastModifiedTimestamp==null">---</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="lastModifiedBy">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Updated By</th>
        <td mat-cell *matCellDef="let element" >
          <span *ngIf="element.lastModifiedBy!=null">{{element.lastModifiedBy}}</span>
          <span *ngIf="element.lastModifiedBy==null">---</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="createdBy">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Created By</th>
        <td mat-cell *matCellDef="let element" >
          <span *ngIf="element.createdBy!=null">{{element.createdBy}}</span>
          <span *ngIf="element.createdBy==null">---</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let element" class="action-link tablacs"> 
          <div class="newinntalx">
            <a  (click)="uploadtaskfile(uploadtaskfilemodal,element)" matTooltip="Upload File">
              <img src="../../../../assets/images/Projects/upload.svg" class="default-img">
              <img src="../../../../assets/images/Projects/upload-blue.svg" class="hover-img">
            </a> 
            
            <a routerLink="/pages/projects/edit-task" [queryParams]="{projectid:projectDetails.id,taskId:element.id}" matTooltip="Edit Task">
              <img src="../../../../assets/images/Projects/edit-black.svg" class="default-img">
              <img src="../../../../../assets/images/Projects/Edit-blue.svg" class="hover-img">
            </a> 
            
            <a (click)="deletetask(element)" matTooltip="Delete Task" *ngIf="((this.userRole.includes('Process Analyst') || this.userRole.includes('RPA Developer')) && userName==element.createdBy)|| (!(this.userRole.includes('Process Analyst') || this.userRole.includes('RPA Developer')))">
              <!-- <img src="../../../../assets/images/Projects/delete-black.svg"> -->
              <img src="../../../../../assets/images/Projects/delete-black.svg" class="default-img">
              <img src="../../../../../assets/images/Projects/delete-red.svg" class="hover-img">
            </a> 
            <!-- <span class="actions-seperator">|</span> -->
            <a class="clickable text-dark"  *ngIf="element.taskCategory =='RPA Implementation'|| element.taskCategory =='BPMN Design'|| element.taskCategory =='Process Mining'"
            (click)="navigateToWorkspace(element)" matTooltip="View Task">
              <!-- <img src="../../../../../assets/images/Projects/eye-show.svg" /> -->
              <img src="../../../../../assets/images/Projects/eye-show.svg" class="default-img">
              <img src="../../../../../assets/images/Projects/eye-show-blue.svg" class="hover-img">
            </a> 

            <a *ngIf="element.taskCategory =='Analysis'">
              <img src="../../../../../assets/images/Projects/eye-hide.svg" class="icon-disabled" >
              
            </a>
        </div>
        </td>
      </ng-container>

          <ng-container matColumnDef="Loading">
            <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
              Loading
            </td>
          </ng-container>
          <ng-container matColumnDef="noData">
            <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
              No Records Found
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']"
            [ngClass]="{'hide':dataSource2!=null}"></tr>
          <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']"
            [ngClass]="{'hide':!(dataSource2!=null && dataSource2.data.length==0)}"></tr>
        </table>
      </div>
      <mat-paginator class="newpaginationdiv" #paginator101 [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 50]"
        [showFirstLastButtons]="true">
      </mat-paginator>

    </mat-card>


    <div class="row bortopsec">
      <div class="col-md-12 p-0 resources">
        <mat-card id="projects_details_screen" class="new-resourcediv" *ngIf="projects_toggle==false">
          <div class="row module-subheader-title">
            <div class="col-md-6 p-0">
              <span class="module-sub-header-title">
                Resources
              </span>
            </div>
            <div class="col-md-6 pr-0">
              <span class="pull-right">
                <button type="button" class="btn btn-primary" (click)="addresource(addresourcemodal)"  *ngIf="this.userRole.includes('SuperAdmin') || this.userRole.includes('Admin') ||
                this.userRole.includes('System Admin') || this.userRole.includes('Process Owner') || this.userRole.includes('Process Architect')">
                  <img src="../../../../assets/images/Projects/White-plus.svg" class="testplus" />Add New
                </button>
                <span>
                  <div *ngIf="Resourcedeleteflag==true" class="env-btn">
                    <button title="Delete Resource" value="Delete" id="deletebtn" class="btn btn-primary" (click)="deleteresource()">Delete</button>
                </div>       
                <div *ngIf="Resourcedeleteflag==false" class="env-btn">
                    <button data-toggle="tooltip" data-placement="top" id="deletebtn" class="btn btn-primary" title="Delete Resource" disabled>Delete</button>
                </div>
                </span>
              </span>
            </div>
          </div>
          <!-- <div class="">
          <span class="">
           
          </span>
          
          <span class="module-sub-header-title">
            Resources
          </span>
          <span class="pull-right" style="font-size:20px;">
            <span class="projects-menu-item" ></span>
            <span class="projects-menu-item"><button type="button" class="btn btn-primary">Create New</button></span>
          </span>
        </div> -->
        
          <div class="projects-table-body profile-table">
          <!-- <table class="table">
            <thead>
              <tr class="separated">
                <th></th>
                <th>Name</th>
                <th>Role</th>
                <th>Email</th>
                <th>Last Active</th>
              </tr>
            </thead>
            <tbody *ngIf="users_list.lenght!=0">
              <tr *ngFor="let user of (projectDetails.resource | userDetials : users_list)  | paginate: { itemsPerPage: 3, currentPage: p } ">
                <td>
                  <span *ngIf="user.userId.profilePic!=null"><img src="../../../../assets/images/BPMS/user1.png" /></span>
                  <span  class="letter-image" *ngIf="user.userId.profilePic==null">
                    <span class="letter">{{user.userId.firstName|uppercase| slice:0:1}}{{user.userId.lastName| uppercase|slice:0:1}}</span>
                  </span>
                </td>
                <td >{{user.userId.firstName+" "+ user.userId.lastName}}</td>
                <td >{{user.roleID.displayName}}</td>
                <td >{{user.userId.userId}}</td>
                <td >{{user.last_active | date:'MMM d, y, HH:mm:ss'}}</td>
              </tr>

            </tbody>
            
          </table>

          <pagination-controls class="pull-right" (pageChange)="p = $event"></pagination-controls> -->
          <table mat-table #sort14="matSort" [dataSource]="dataSource6" matSort class="projecttable table" id="autotable">
            
            <ng-container matColumnDef="check">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  <input [disabled]="Resourcecheckeddisabled" type="checkbox" id="Credcheckall" [checked]="Resourcecheckflag" (change)="ResourcecheckAllCheckBox($event)">
              </th>
              <td mat-cell *matCellDef="let element; let i = index">
                  <input type="checkbox" [checked]="element.checked" (change)="ResourcecheckEnableDisableBtn(element.id, $event)"> 
              </td>
          </ng-container>

            <!-- <ng-container matColumnDef="profilePic">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let user" class="action-link tablacs"> 
                <span *ngIf="user.userId.profilePic!=null"><img src="../../../../assets/images/BPMS/user1.png" /></span>
                <span  class="letter-image" *ngIf="user.userId.profilePic==null">
                  <span class="letter">{{user.userId.firstName|uppercase| slice:0:1}}{{user.userId.lastName| uppercase|slice:0:1}}</span>
                </span>
              
              </td>
            </ng-container> -->
    
              <ng-container matColumnDef="firstName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                <td mat-cell   *matCellDef="let user">
                  <span style="margin-right: 10px;" *ngIf="user.userId.profilePic!=null"><img src="../../../../assets/images/BPMS/user1.png" /></span>
                <span  class="letter-image" *ngIf="user.userId.profilePic==null">
                  <span class="letter">{{user.firstName|uppercase| slice:0:1}}{{user.lastName| uppercase|slice:0:1}}</span>
                </span>
                  <span *ngIf="user.firstName!=null" [matTooltip]="user.firstName">{{user.firstName+" "+ user.lastName|titlecase}}</span>
                  <span *ngIf="user.firstName==null">---</span>
                </td>
      
            </ng-container>
      
            <ng-container matColumnDef="displayName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
              <td mat-cell *matCellDef="let user">
                <span *ngIf="user.displayName!=null" [matTooltip]="user.displayName">{{user.displayName}}</span>
                  <span *ngIf="user.displayName==null">---</span>
              </td>
            </ng-container>
            <ng-container matColumnDef="user_Id">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
              <td mat-cell *matCellDef="let user">
                <span *ngIf="user.user_Id!=null" [matTooltip]="user.user_Id">{{user.user_Id}}</span>
                <span *ngIf="user.user_Id==null">---</span>
              </td>
            </ng-container>
        
            <ng-container matColumnDef="last_active">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Active</th>
                <td mat-cell *matCellDef="let user">
                    <span *ngIf="user.last_active!=null">{{user.last_active | date:'MMM d, y, HH:mm:ss'}}</span>
                    <span *ngIf="user.last_active==null || user.last_active==undefined || user.last_active=='' ">---</span>
                   
                </td>
            </ng-container>
      
            <!-- <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let element" class="action-link tablacs"> 
                <div class="newinntalx">
                  <a (click)="deleteresource(element)" matTooltip="Delete Resource" >
                    <img src="../../../../assets/images/Projects/delete-red.svg">
                  </a> 
              </div>
              </td>
            </ng-container> -->
      
              <ng-container matColumnDef="Loading">
                <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
                    Loading
                </td>
              </ng-container>
              <ng-container matColumnDef="noData">
                  <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
                      No Records Found
                  </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns6; sticky: true"></tr>
              <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns6;"></tr>
              <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']" [ngClass]="{'hide':dataSource6!=null}"></tr>
              <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSource6!=null && dataSource6.data.length==0)}"></tr>
          </table>
            <mat-paginator class="newpaginationdiv" #paginator104 [pageSize]="3" [pageSizeOptions]="[3, 5, 10, 25, 50]" [showFirstLastButtons]="true">
            </mat-paginator>
          </div>
        
        </mat-card>
      </div>
      <div class="col-md-12 p-0 documents">
        <mat-card id="projects_details_screen" class="new-docdiv" *ngIf="projects_toggle==false">
          <div class="row module-subheader-title">
            <div class="col-md-6 p-0">
              <span class="module-sub-header-title">
                Recently Added Documents
              </span>
            </div>
            <div class="col-md-6 pr-0">
              <span class="pull-right" >
                <button type="button"  (click)="uploadFile(uploadFilemodal)"  class="btn btn-primary">
                  <img src="../../../../assets/images/BPMS/upload.svg"  class="testplusupload">Upload New</button>
              </span>
            </div>
          </div>
          <!-- <div class="">
          <span class="">
           
          </span>
          
          <span class="module-sub-header-title">
            Recently Added Documents
          </span>
          <span class="pull-right" style="font-size:20px;">
            <span class="projects-menu-item"  ></span>
            <span class="projects-menu-item"><button type="button" class="btn btn-primary">Upload</button></span>
          </span>
        </div> -->

          <div class="projects-table-body">
            <!-- <table class="table">
              <thead>
                <tr class="separated">
                  <th>Document Name</th>
                  <th>Uploaded By</th>
                  <th>Uploaded Date</th>
                  <th>File Size</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Task Mining Doc</td>
                  <td>Lakshmi Kadali</td>
                  <td>Jul 1st,2021</td>
                  <td>150kb</td>
                </tr>
                <tr>
                  <td>Design Doc</td>
                  <td>Karthik Peddinti</td>
                  <td>Jul 10th,2021</td>
                  <td>125MB</td>
                </tr>
                <tr>
                  <td>Approval Email</td>
                  <td>Siva Simhadri</td>
                  <td>Jul 21st,2021</td>
                  <td>10MB</td>
                </tr>
              </tbody>
            </table> -->


            <table mat-table #sort16="matSort" [dataSource]="dataSource9" matSort class="projecttable table" id="autotable">
          
      
                <ng-container matColumnDef="fileName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Document Name</th>
                  <td mat-cell   *matCellDef="let element">
                    <span *ngIf="element.fileName!=null" [matTooltip]="element.fileName">{{element.fileName}}</span>
                    <span *ngIf="element.fileName==null">---</span>
                  </td>
        
              </ng-container>
        
              <ng-container matColumnDef="uploadedBy">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Uploaded By</th>
                <td mat-cell *matCellDef="let element">
                  <span *ngIf="element.uploadedBy!=null" [matTooltip]="element.uploadedBy">{{element.uploadedBy| userPipe : users_list}}</span>
                    <span *ngIf="element.uploadedBy==null">---</span>
                </td>
              </ng-container>
              <ng-container matColumnDef="uploadedDate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Uploaded Date</th>
                <td mat-cell *matCellDef="let element">
                  <span *ngIf="element.uploadedDate!=null" [matTooltip]="element.uploadedDate">{{element.uploadedDate| date:'MMM dd, y, HH:mm:ss'}}</span>
                  <span *ngIf="element.uploadedDate==null">---</span>
                </td>
              </ng-container>
          
              <ng-container matColumnDef="fileSize">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>File Size</th>
                  <td mat-cell *matCellDef="let element">
                      <span *ngIf="element.fileSize!=null">{{element.fileSize | fileSizePipe}}</span>
                      <span *ngIf="element.fileSize==null">---</span>
                     
                  </td>
              </ng-container>
        
                <ng-container matColumnDef="Loading">
                  <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
                      Loading
                  </td>
                </ng-container>
                <ng-container matColumnDef="noData">
                    <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="9">
                        No Records Found
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns9; sticky: true"></tr>
                <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns9;"></tr>
                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['Loading']" [ngClass]="{'hide':dataSource9!=null}"></tr>
                <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSource9!=null && dataSource9.data.length==0)}"></tr>
            </table>
              <mat-paginator class="newpaginationdiv" #paginator109 [pageSize]="3" [pageSizeOptions]="[3, 5, 10, 25, 50]" [showFirstLastButtons]="true">
              </mat-paginator>
          </div>

        </mat-card>
      </div>
    </div>

  </div>



  <ng-template class="modal-lg" #createtaskmodal>
  </ng-template>


  <ng-template #addresourcemodal>
    <div>
      <app-add-resources (newItemEvent)="addresources($event)" [resources]="resources"
        [addresourcemodalref]="addresourcemodalref"></app-add-resources>
    </div>
  </ng-template>

  <ng-template class="modal-lg" #updatetaskmodal>
    <div class="modal-header modelprhead">
      <h4 class="modal-title pull-left">
        {{selectedtaskdata.id}} / {{selectedtaskdata.taskCategory}} / {{selectedtaskdata.taskName}}
      </h4>
      <span class="pull-right lastedit-date">Last Updated Date : {{selectedtaskdata.lastModifiedTimestamp |
        date}}</span>
    </div>
    <div class="modal-body modelprbody editmodelprbody">
      <div class="container p-0" style="width:100%">
        <form [formGroup]="updatetaskForm" (ngSubmit)="updatetask()">
          <div class="row">
            <div class="col-md-12">
              <div class="form-fields col-md-3 pl-0">
                <label id="assignee" for="assignee">Assignee</label>
                <span class="labelcont">{{selectedtaskdata.resources| userPipe : users_list}}</span>
              </div>
              <div class="form-fields col-md-3 pr-0">
                <label id="startdate" for="startDate">Start Date</label>
                <span class="labelcont">{{selectedtaskdata.startDate | date}}</span>
              </div>
              <div class="form-fields col-md-3 pr-0">
                <label id="enddate" for="endDate">End Date</label>
                <span class="labelcont">{{selectedtaskdata.endDate | date}}</span>
              </div>
              <div class="form-fields col-md-3 pr-0">
                <label id="percentage" for="percentage">Percentage Completed</label>
                <ng5-slider [(value)]="slider" formControlName="percentageComplete" [options]="options"></ng5-slider>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-fields col-md-6 pl-0">
                <label id="status" for="status">Status<span class="star">*</span></label>
                <select formControlName="status" class="form-control data">
                  <option value="">Select Status</option>
                  <option value="New">New</option>
                  <option value="In Progress">In Progress</option>
                  <option value="In Review">In Review</option>
                  <option value="Done">Done</option>
                 </select>
                <span *ngIf="updatetaskForm.get('status').invalid && updatetaskForm.get('status').touched"
                  class="errspan required">Status Required*</span>
              </div>
              <div class="form-fields col-md-6 pr-0">
                <label id="priority" for="priority">Priority<span class="star">*</span></label>
                <select formControlName="priority" class="form-control data">
                  <option value="">Select Priority</option>
                  <option value="High">High</option>
                  <option value="Medium">Medium</option>
                  <option value="Low">Low</option>
                </select>
                <span *ngIf="updatetaskForm.get('priority').invalid && updatetaskForm.get('priority').touched"
                  class="errspan required">Priority Required*</span>
              </div>
            </div>
            <div class="form-fields col-md-12">
              <label id="summary" class="label-control">Summary</label>
              <textarea class="form-control" maxlength="150" formControlName="summary" rows="3" placeholder="Enter Summary">
                        </textarea>
            </div>
            <div class="form-fields col-md-12">
              <label id="description" class="label-control">Description</label>
              <textarea class="form-control" maxlength="150" formControlName="description" rows="3" placeholder="Enter Description">
                        </textarea>
            </div>
            <div class="col-md-12">
              <h4 class="module-sub-header-title">Activity</h4>
              <mat-tab-group [selectedIndex]="selectedTab" id="Project-dashboard-tabs"
                (selectedTabChange)="onTabChanged($event)">
                <mat-tab label="Comment">
                  <div class="t-comments-box">
                    <div class="add-comment">
                      <div class="res-circle " *ngIf="profilePicture==false">{{firstletter|uppercase}}</div>
                      <div *ngIf="profilePicture==true"><img class="res-circle-img " [src]="retrievedImage"></div>
                      <div>
                      </div>
                      <div class="form-fields col-md-12 pr-0 comment-input">
                        <input class=" form-control" maxlength="150" type="text" #commentInput id="addcomment"
                          placeholder="Add a comment.." />
                        <div class="comment-send" id="sendcomment" (click)="postcomments(commentInput.value)">
                          <img src="../../../../assets/images/Projects/send.svg" class="default-img" />
                          <img src="../../../../assets/images/Projects/send-blue.svg" class="hover-img" />
                          <!-- <i class="fab fa-telegram-plane" id="sendcomment" (click)="postcomments(commentInput.value)"></i> -->
                        </div>
                      </div>
                    </div>
                    <div class="comment comment-level-1" *ngIf="taskcomments!=0">
                      <!-- <div  class="res-circle " *ngIf="profilePicture==false">{{firstletter|uppercase}}</div> 
                                  <div   *ngIf="profilePicture==true"><img class="res-circle " [src]="retrievedImage" ></div> -->

                      <div class="comment-content" *ngFor="let c of taskcomments;let i=index">
                        <div class="comment-content-subdiv">
                          <div class="userimage" *ngIf="(c.createdUserEmail|userImagePipe: users_list)as result">
                            <div class="res-circle " *ngIf="result.length==3">{{c.createdUserEmail|userImagePipe:
                              users_list}}</div>
                            <div *ngIf="result.length>3"><img class="res-circle-img "
                                src="{{c.createdUserEmail|userImagePipe: users_list}}"></div>
                          </div>
                          <div class="w-100">
                            <div class="row d-flex">
                              <div class="col-md-10 pl-0 comment-name">
                                {{c.createdBy}} {{c.createdTimestamp | date :'MMM dd, y, HH:mm:ss'}}
                              </div>
                              <div class="col-md-2 pr-0 comment-action" *ngIf="i!=commentnumber">
                                <button type="button" (click)="editComments(c.comments,i)">
                                  Edit
                                </button>
                              </div>
                            </div>
                            <div class="commentsadded" *ngIf="i!=commentnumber">
                              {{c.comments}}
                            </div>
                          </div>
                        </div>


                        <div class="updatecomments" *ngIf="(showeditcomment && i==commentnumber)">
                          <div class="form-fields col-md-12 p-0">
                            <input type="text" name="comment" maxlength="150" class="form-control" formControlName="editcomment"
                              placeholder="Add Comment..." />
                          </div>
                          <div class="modal-footer modelprfooter">
                            <div class="pull-right">
                              <button id="updatecancelcomment" type="button" class="btn btn-default"
                                (click)="posteditcancelcomment()">
                                Cancel
                              </button>
                              <button id="updatesavecomment" type="button" class="btn btn-primary btn-update"
                                (click)="updatecomment(c.id)">
                                Save
                              </button>
                              <!-- <div class="col-md-6" >
                                          <button type="button" class="btn btn-primary" (click)="posteditcancelcomment()">Cancel</button>
                                        </div> -->
                            </div>
                          </div>
                        </div>
                        <!-- <div class="comment-action" *ngIf="i!=commentnumber">
                                        <button type="button" (click)="editComments(c.comments,i)" matTooltip="Edit Comment" 
                                            style="color:red;cursor:pointer" >
                                            Edit
                                        </button>
                                    </div> -->
                      </div>

                    </div>

                  </div>

                </mat-tab>
                <mat-tab label="History">

                  <ul class="historydiv">
                    <li *ngFor="let history of taskhistory">

                      <div class="row">
                        <div class="col-sm-1 pr-0"
                          *ngIf="(history.lastModifiedUserEmail|userImagePipe: users_list)as result">
                          <div class="res-circle " *ngIf="result.length==3">
                            {{history.lastModifiedUserEmail|userImagePipe: users_list}}
                          </div>
                          <div *ngIf="result.length>3">
                            <img class="res-circle-img"
                              src="{{history.lastModifiedUserEmail|userImagePipe: users_list}}">
                          </div>
                        </div>
                        <div class="col-sm-11 p-0 histcontent">
                          {{history.message}}{{history.lastModifiedTimestamp | date:'MMM dd, y, HH:mm:ss'}}
                        </div>
                      </div>

                      <!-- <div> 
                                      <div class="usertaskimage" *ngIf="(history.lastModifiedUserEmail|userImagePipe: users_list)as result">
                                        <div  class="res-circle " *ngIf="result.length==3">{{history.lastModifiedUserEmail|userImagePipe: users_list}}</div> 
                                        <div  *ngIf="result.length>3"><img class="res-circle " src="{{history.lastModifiedUserEmail|userImagePipe: users_list}}" ></div>
                                      </div>
                                    </div>
                                  
                                  <div>
                                  {{history.message}}{{history.lastModifiedTimestamp | date:'MMM dd, y, HH:mm:ss'}}
                                </div> -->

                    </li>
                  </ul>
                  <!-- <div class="comment-content" > 
                              
                                </div> -->
                </mat-tab>
                <mat-tab label="Attachments">
                  <div class="row attachmentdiv">
                    <div class="col-md-12 p-0">
                      <table class="table" *ngIf="(taskattacments!=null && taskattacments.length!=0)">
                        <thead>
                          <tr>
                            <th class="text-left">File Name</th>
                            <th class="text-left">File Size (MB)</th>
                            <th class="text-left">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="let attachments of taskattacments | paginate: { itemsPerPage: 2, currentPage: att } ">
                            <td>{{attachments.fileName}}</td>
                            <td class="text-left">{{attachments.fileSize | fileSizePipe}}</td>
                            <td class="text-left">
                              <span class="clickable" (click)="downloadTaskAttachment(attachments)">
                                <img src="../../../../assets/images/Projects/Download.svg" class="testplus" />
                              </span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <pagination-controls *ngIf="(taskattacments!=null && taskattacments.length!=0)" class="pull-right"
                        (pageChange)="att = $event"></pagination-controls>
                    </div>
                  </div>

                </mat-tab>
                <mat-tab label="Resources">
                  <div class="edit-resourcesdiv">
                    <table class="table">
                      <thead>
                        <tr>
                          <th></th>
                          <th class="text-left">Name</th>
                          <th class="text-left">Role</th>
                          <th class="text-left">Last Updated</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            <span *ngIf="(taskresourceemail|userImagePipe: users_list)as result">
                              <div class="res-circle" *ngIf="result.length==3">
                                {{taskresourceemail|userImagePipe: users_list}}
                              </div>
                              <div *ngIf="result.length>3">
                                <img class="res-circle-img" src="{{taskresourceemail|userImagePipe: users_list}}">
                              </div>
                            </span>
                          </td>
                          <td>{{selectedtaskdata.resources| userPipe : users_list}}</td>
                          <!-- <td style="text-align:center">{{roles?roles:'-'}}</td> -->
                          <td class="text-left">{{roles?roles:'-'}}</td>
                          <td class="text-left">{{selectedtaskdata.lastModifiedTimestamp | date:'MMM dd, y, HH:mm:ss'}}</td>
                        </tr>
                      </tbody>

                    </table>
                  </div>
                </mat-tab>
              </mat-tab-group>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="modal-footer modelprfooter">
      <div class="pull-right">
        <button (click)="resetupdatetaskproject()" class="btn btn-default">Reset</button>
        <button (click)="canceltaskform()" class="btn btn-primary">Cancel</button>
        <button [disabled]="updatetaskForm.invalid" (click)="updatetask()"
          class="btn btn-primary btn-update">Update</button>
      </div>
    </div>

  </ng-template>

  <ng-template class="modal-up" #uploadtaskfilemodal>
    <div class="modal-header modelprhead">
      <h4 class="modal-title pull-left">Upload File</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="uploadtaskFilemodalCancel()">
        <span aria-hidden="true"><img alt="" src="../../../../../assets/images/Projects/circle-close.svg"></span>
      </button>
    </div>
    <div class="modal-body modelprbody uploadfilebdiv">
      <div class="container p-0" style="width:100%">
        <form [formGroup]="uploadtaskFileForm" (ngSubmit)="submitUploadFileForm()">
          <div class="row">
            <div class="form-fields col-md-12">
              <label for="category">File Category<span class="star">*</span></label>
              <select class="form-control" formControlName="category">
                <option [value]="null" disabled hidden>Select File Category</option>
                <option value="" [selected]="true">Select File Category</option>
                <option *ngFor="let categories of filecategories">{{categories.category}}</option>

              </select>
              <span *ngIf="uploadtaskFileForm.get('category').invalid && uploadtaskFileForm.get('category').touched"
                class="errspan required">File Category Required*</span>
            </div>
            <div class="form-fields col-md-12">
                
              <label>Description<span class="star">*</span></label>
              <textarea name= "desc" class="form-control" rows="2" formControlName="description" placeholder="Enter Description...">

              </textarea>
              <span *ngIf="uploadtaskFileForm.get('description').invalid && uploadtaskFileForm.get('description').touched"
                   class="errspan required">Description Required*</span>

            </div>
         
            <div class="form-fields col-md-12">
              <label>Upload<span class="star">*</span></label>
              <div class="box-fileupload">
                <input type="file" name="file" (change)="chnagefileUploadForm($event)" id="file" class="inputfile" multiple/>
                <label for="file" matTooltip="Upload File" (change)="chnagefileUploadForm($event)">
                <img src="../../../../assets/images/Projects/fileupload.svg" class="testplusupload">
                
                <span>Select File</span>
              </label>
              </div>
          
              <div class="upload-filesdiv">
                <div class="row">
                  <div class="col-md-4 pl-0" *ngFor="let selected of listOfFiles"> 
                    <div class ="project-card">
                        <span class="pull-right clickable" matTooltip="Remove"
                        (click)="removeSelectedFile(index)">
                            <img class="testplus1" src="../../../../assets/images/Projects/circle-close.svg" />
                            <!-- <i class="fa fa-trash"></i> -->
                        </span>
                     <span class="card-placeholder">
                          File Name : {{selected.name}}     
                    </span>
                    
                      <span class="file-size">
                        Size : {{selected.size | fileSizePipe}}
                      </span>
                    </div>
                  </div>
                </div>
                <!-- {{selected}}
                <button type="button" aria-label="Close" (click)="removeSelectedFile(index)">
                  <span aria-hidden="true">&times;</span>
              </button> -->
                <!-- <button mat-icon-button (click)="removeSelectedFile(index)">delete</button> -->
              </div>
              <!-- <input type="file" class="form-control" (change)="onFileSelected($event)" name="Upload-File"
                formControlName="filePath" placeholder="choose file"> -->
              <span *ngIf="uploadtaskFileForm.get('filePath').invalid && uploadtaskFileForm.get('filePath').touched"
                class="errspan required"></span>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="modal-footer modelprfooter">
      <div class="pull-right">
        <button (click)="uploadtaskFilemodalCancel()" class="btn btn-default">Cancel</button>
        <button [disabled]="uploadtaskFileForm.invalid" (click)="submitUploadFileForm()"
          class="btn btn-primary btn-update">Submit</button>
      </div>
    </div>
  </ng-template>

</div>
<ng-template class="modal-up" #uploadFilemodal>

  <div class="modal-header modelprhead">
    <h4 class="modal-title pull-left">Upload File</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="uploadFilemodalCancel()">
      <span aria-hidden="true"><img alt="" src="../../../../../assets/images/Projects/circle-close.svg"></span>
    </button>
  </div>
  <div class="modal-body modelprbody uploadfilebdiv">
    <div class="container p-0" style="width:100%">
      <form [formGroup]="uploadFileFormDetails" (ngSubmit)="submitUploadFileFormattachment()">
          <div class="row">
              <div class="form-fields col-md-12">
                  <label for="fileCategory">File Category<span class="star">*</span></label>
                  <select class="form-control"  formControlName="fileCategory" required>
                    <option  [value]="null" disabled hidden>Select Category</option>
                    <option value="" [selected]="true">Select Category</option>
                    <option *ngFor="let categories of filecategories" >{{categories.category}}</option>
                  </select>
                  <span
                      *ngIf="uploadFileFormDetails.get('fileCategory').invalid && uploadFileFormDetails.get('fileCategory').touched"
                       class="errspan required">File Category Required*</span>
              </div>
              </div>
              <div class="form-fields col-md-12">
                  
                  <label>Description<span class="star">*</span></label>
                  <textarea name= "desc" class="form-control" maxlength="150" rows="2" formControlName="description" placeholder="Enter Description...">
  
                  </textarea>
                  <span *ngIf="uploadFileFormDetails.get('description').invalid && uploadFileFormDetails.get('description').touched"
                       class="errspan required">Description Required*</span>
  
              </div>
              <div class="form-fields col-md-12">
                  
                <label>Upload<span class="star">*</span></label>
                <div class="box-fileupload">
                  <input type="file" name="file" (change)="chnagefileUploadForm($event)" id="file" class="inputfile" multiple/>
                  <label for="file" matTooltip="Upload File" (change)="chnagefileUploadForm($event)">
                  <img src="../../../../assets/images/Projects/fileupload.svg" class="testplusupload">
                  
                  <span>Select File</span>
                </label>
                </div>
               
                <div class="upload-filesdiv">
                  <div class="row">
                    <div class="col-md-4 pl-0" *ngFor="let selected of listOfFiles"> 
                      <div class ="project-card">
                          <span class="pull-right clickable" matTooltip="Remove"
                          (click)="removeSelectedFile(index)">
                              <img class="testplus1" src="../../../../assets/images/Projects/circle-close.svg" />
                              <!-- <i class="fa fa-trash"></i> -->
                          </span>
                       <span class="card-placeholder">
                            File Name : {{selected.name}}     
                      </span>
                      
                        <span class="file-size">
                          Size : {{selected.size | fileSizePipe}}
                        </span>
                      </div>
                    </div>
                  </div>
                  <!-- {{selected}}
                  <button type="button" aria-label="Close" (click)="removeSelectedFile(index)">
                    <span aria-hidden="true">&times;</span>
                </button> -->
                  <!-- <button mat-icon-button (click)="removeSelectedFile(index)">delete</button> -->
                </div>
                
                <span *ngIf="uploadFileFormDetails.get('uploadFile').invalid && uploadFileFormDetails.get('uploadFile').touched"
                     class="errspan required">File Required*</span>
  
            </div>
          
      </form>
    </div>
  </div>
  <div class="modal-footer modelprfooter">
    <div class="pull-right">
        <button (click)="uploadFilemodalCancel()" class="btn btn-default">Cancel</button>
        <button [disabled]="uploadFileFormDetails.invalid" (click)="submitUploadFileFormattachment()" class="btn btn-primary btn-update">Submit</button>
        </div>
  </div>
  </ng-template>