<div class="maincontent">
    <div class="h-100">
        <div class="row main-content-head">
            <div class="col-md-8 pl-0">
                <h3>
                    <label id="popup_title">
                        <a routerLink="/pages/projects/listOfProjects" class="imageBox">
                            <img class="default-arrow" src="./../../../../assets/images-n/projects/backarrow-default.svg" alt="">
                            <img class="hover-arrow" src="./../../../../assets/images-n/projects/backarrow-hover.svg" alt=""> 
                        </a>
                    </label>
                    
                    <span class="title_text_haspath">
                        <span routerLink="/pages/projects/listOfProjects" class="breadcrum-back">Projects</span>
                         <span class="breadcrum-align">/</span>
                         <span
                            class="sub_title_text"> {{projectDetails.projectName}}</span>
                    </span>
                </h3>
            </div>
            <div class="col-md-4 pr-0 text-right">
                <button class="btn actionmenu grey-btn" type="button" (click)="menu.toggle($event)">
                    <img src="./../../../../assets/images-n/projects/menudots.png" alt="Actions" >
                    <span class="plus">More Actions</span>
                    <!--pTooltip="Action Menu" tooltipPosition="top" 
                        class="default-icon"
                        <img src="./../../../../assets/images-n/projects/menudots-hover.png" alt="Actions" class="hover-icon"> -->
                </button>
                <p-menu class="actionspopmenu prjactmenu" #menu [popup]="true" [model]="actionsitems"></p-menu>
            </div>
        </div>
        <div class="main-content-body">
            <div class="row project-Information">
                <div class="row project-overview">
                    <div class="project-status">
                        <img *ngIf="projectDetails.status == 'New'"
                            src="./../../../../assets/images-n/projects/NewStatus.svg" alt="project-status-icon">
                        <img *ngIf="projectDetails.status == 'In Progress'"
                            src="./../../../../assets/images-n/projects/inprogress-tasks.svg" alt="project-status-icon">
                        <img *ngIf="projectDetails.status == 'On Hold'"
                            src="./../../../../assets/images-n/projects/onhold-status.svg" alt="project-status-icon">
                        <img *ngIf="projectDetails.status == 'Closed'"
                            src="./../../../../assets/images-n/projects/completed-tasks.svg" alt="project-status-icon">
                    </div>
                    <div class="col-sm-12 p-0" style="flex:auto;">
                        <div class="row project-ninfo">
                            
                            <div class="prjinfo-headerblk pr-2 align-items-end">
                                <div class="row align-items-flex-start projectnamerow">
                                    <p-inplace #inplace (onActivate)="inplaceActivate('projectName','inplace')"
                                        class="project-name">
                                        <ng-template pTemplate="display">
                                            <span class="">{{projectDetails.projectName}}</span>
                                        </ng-template>
                                        <ng-template pTemplate="content">
                                            <input type="text" [style]="{'width':'100%'}" pInputText maxlength="50"
                                                [(ngModel)]="projectName" (keydown)="Space($event)" />
                                            <span class="editfields">
                                                <i class="pi pi-check" *ngIf="projectName"
                                                    (click)="onUpdateDetails('projectName')"></i>
                                                <i class="pi pi-times" (click)="onDeactivate('inplace')"></i>
                                            </span>
                                        </ng-template>
                                    </p-inplace>
                                    <p-inplace #inplace1 (onActivate)="inplaceActivate('priority','inplace1')"
                                    class="prjname-priority">
                                        <ng-template pTemplate="display">
                                            <span class="priorlabels">
                                                <img src="./../../../../assets/images-n/projects/low_priority.svg"
                                                    alt="importance" *ngIf="projectDetails.priority == 'Low'">
                                                <span class="lowimp"
                                                    *ngIf="projectDetails.priority == 'Low'">{{projectDetails.priority}}</span>
                                                <img src="./../../../../assets/images-n/projects/medium_priority.svg"
                                                    alt="importance" *ngIf="projectDetails.priority == 'Medium'">
                                                <span class="mediumimp"
                                                    *ngIf="projectDetails.priority == 'Medium'">{{projectDetails.priority}}</span>
                                                <img src="./../../../../assets/images-n/projects/high_priority.svg"
                                                    alt="importance" *ngIf="projectDetails.priority == 'High'">
                                                <span class="highimp"
                                                    *ngIf="projectDetails.priority == 'High'">{{projectDetails.priority}}</span>
                                            </span>
                                        </ng-template>
                                        <ng-template pTemplate="content">
                                            <p-dropdown [options]="priority_list" [(ngModel)]="priority" optionLabel="name"
                                                optionValue="name"></p-dropdown>
                                            <span class="editfields">
                                                <i class="pi pi-check" (click)="onUpdateDetails('priority')"></i>
                                                <i class="pi pi-times" (click)="onDeactivate('inplace1')"></i>
                                            </span>
                                        </ng-template>
                                    </p-inplace>
                                </div>
                                <div class="prjdetfields">
                                    <div class="pinf procowner">
                                        <p-inplace #inplace2 (onActivate)="inplaceActivate('processOwner','inplace2')">
                                            <ng-template pTemplate="display">
                                                <p class="" pTooltip="{{ projectDetails.processOwner| userPipe : users_list}}">{{projectDetails.processOwner| userPipe : users_list}}</p>
                                            </ng-template>
                                            <ng-template pTemplate="content">
                                                <p-dropdown [options]="users_List1" [filter]="true"
                                                    [style]="{'width':'100%'}" filterBy="user_email,fullName" required
                                                    [autoDisplayFirst]="false" placeholder="Select Assignee"
                                                    [(ngModel)]="processOwner" optionValue="user_email"
                                                    optionLabel="fullName">
                                                </p-dropdown>
                                                <span class="editfields">
                                                    <i class="pi pi-check" (click)="onUpdateDetails('processOwner')"></i>
                                                    <i class="pi pi-times" (click)="onDeactivate('inplace2')"></i>
                                                </span>
                                            </ng-template>
                                        </p-inplace>
                                        <label>Process Owner</label>
                                    </div>
                                    <div class="pinf prjdept">
                                        <p-inplace #inplace3 (onActivate)="inplaceActivate('mapValueChain','inplace3')">
                                            <ng-template pTemplate="display">
                                                <p class="">{{projectDetails.mapValueChain}}</p>
                                            </ng-template>
                                            <ng-template pTemplate="content">
                                                <p-dropdown [options]="categories_list" [style]="{'width':'100%'}"
                                                    [autoDisplayFirst]="false" placeholder="Select Department"
                                                    [(ngModel)]="mapValueChain" optionValue="categoryName"
                                                    optionLabel="categoryName">
                                                </p-dropdown>
                                                <span class="editfields">
                                                    <i class="pi pi-check" (click)="onUpdateDetails('mapValueChain')"></i>
                                                    <i class="pi pi-times" (click)="onDeactivate('inplace3')"></i>
                                                </span>
                                            </ng-template>
                                        </p-inplace>
                                        <label>Department</label>
                                    </div>
                                    <div class="pinf prjstatus">
                                        <p-inplace #inplace4 (onActivate)="inplaceActivate('status','inplace4')">
                                            <ng-template pTemplate="display">
                                                <p>{{projectDetails.status}}</p>
                                            </ng-template>
                                            <ng-template pTemplate="content">
                                                <p-dropdown [options]="status_list" [(ngModel)]="status" autoWidth="false"
                                                    optionLabel="name" optionValue="name"></p-dropdown>
                                                <span class="editfields">
                                                    <i class="pi pi-check" (click)="onUpdateDetails('status')"></i>
                                                    <i class="pi pi-times" (click)="onDeactivate('inplace4')"></i>
                                                </span>
                                            </ng-template>
                                        </p-inplace>
                                        <label>Status</label>
                                    </div>
                                    <div class="pinf prjowner">
                                        <p><span class="non-editablefield">{{projectDetails.owner| userPipe : users_list}}</span></p>
                                        <label>Created By</label>
                                    </div>
                                    <div class="pinf prjlastupdated">
                                        <p><span class="non-editablefield">{{projectDetails.lastModifiedTimestamp | date:'MMM dd, y, HH:mm'}}</span></p>
                                        <label>Last Updated</label>
                                    </div>
                                </div>
                                
                            </div>
                            <div class="kpipercent">
                                <div class="">
                                    <span class="">
                                        <p-knob [(ngModel)]="projectDetails.projectPercentage" [size]="70"
                                            valueTemplate="{value}%" (mouseup)="mouseUp()" (click)="updateprojectDetails()"></p-knob>
                                        <label>Completed</label>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row project-description">
                    <label>Description</label>
                    <!-- <p *ngIf="isReadmoreShow && !isEditDesc"><span (click)="onClickToEditDesc()">{{project_desc}}</span>
                        <span class="readmore icon-color" (click)="onReadMoreHide()">Hide</span></p>
                    <p *ngIf="!isReadmoreShow && !isEditDesc"> <span
                            (click)="onClickToEditDesc()">{{truncateDesc(project_desc)}} </span>
                            <span class="readmore icon-color" (click)="onReadMoreHide()"
                            *ngIf="project_desc.length > 150">Read more</span>
                        </p> -->
                    <p *ngIf="!isEditDesc"><span (click)="onClickToEditDesc()" class='proj-desc desctextarea'>{{project_desc}}</span>
                        <!-- <p *ngIf="isReadmoreShow && !isEditDesc"><span (click)="onClickToEditDesc()" [innerHTML]="project_desc"></span> <span class="readmore icon-color"
                            (click)="onReadMoreHide()">Hide</span></p> -->
                        <!-- <p>{{projectDetails.projectPurpose}}</p> -->
                        <!-- <p *ngIf="!isReadmoreShow && !isEditDesc"><span (click)="onClickToEditDesc()" [innerHTML]="truncateDesc(project_desc)"></span> <span class="readmore icon-color"
                            (click)="onReadMoreHide()" *ngIf="project_desc.length > 150">Read more</span></p> -->
                    <div *ngIf="isEditDesc" class="col p-0">
                        <!-- <p-editor [(ngModel)]="project_desc_edit" [style]="{'height':'150px'}" maxlength="100">
                                    <ng-template pTemplate="header">
                                        <span class="ql-formats">
                                            <button type="button" class="ql-bold" aria-label="Bold"></button>
                                            <button type="button" class="ql-italic" aria-label="Italic"></button>
                                            <button type="button" class="ql-underline" aria-label="Underline"></button>
                                            <button title="Link" class = "ql-link"></button>
                                        </span>
                                    </ng-template>
                                </p-editor> -->

                        <textarea [style]="{'width':'100%'}" pInputTextarea [(ngModel)]="project_desc_edit"
                            [autoResize]="true"></textarea>
                        <span class="editfields prjdescef">
                            <i class="pi pi-check" (click)="onUpdateDesc()"></i>
                            <i class="pi pi-times" (click)="onDeactivateEdit()"></i>
                        </span>
                    </div>


                </div>
            </div>
            <div class="row">
                <div class="col-md-8 pl-0">
                    <div class="row quicksnapshot">
                        <h4 class="colheads">Quick Snapshot</h4>
                        <div class="row">
                            <div class="col-md-4 pl-0">
                                <div class="row quicksnapshot-cards">
                                    <div class="d-flex w-100 align-items-center">
                                        <div class="qcard-infoimg">
                                            <img src="./../../../../assets/images-n/projects/ActiveTasks.svg"
                                                alt="Active-Tasks" class="qcard-img">
                                        </div>
                                        <div class="qcard-info">
                                            <label class="qcard-count">{{snapshotDatails.ActiveTask}}</label>
                                            <p class="qcard-name">Active Tasks</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="row quicksnapshot-cards">
                                    <div class="d-flex w-100 align-items-center">
                                        <div class="qcard-infoimg">
                                            <img src="./../../../../assets/images-n/projects/OverdueTasks.svg"
                                                alt="OverdueTasks" class="qcard-img">
                                        </div>
                                        <div class="qcard-info">
                                            <label class="qcard-count">{{snapshotDatails.DelayedTask}}</label>
                                            <p class="qcard-name">Delayed Tasks</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 pr-0">
                                <div class="row quicksnapshot-cards">
                                    <div class="d-flex w-100 align-items-center">
                                        <div class="qcard-infoimg">
                                            <img src="./../../../../assets/images-n/projects/CompletedTasks.svg"
                                                alt="UserOnboard" class="qcard-img">
                                        </div>
                                        <div class="qcard-info">
                                            <label class="qcard-count">{{snapshotDatails.CompletedTask}}</label>
                                            <p class="qcard-name">Completed Tasks</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 pl-0">
                                <div class="row quicksnapshot-cards ">
                                    <div class="d-flex w-100 align-items-center">
                                        <div class="qcard-infoimg">
                                            <img src="./../../../../assets/images-n/projects/Users-Onboard.svg"
                                                alt="AutomationRate" class="qcard-img">
                                        </div>
                                        <div class="qcard-info">
                                            <label
                                                class="qcard-count">{{snapshotDatails.UsersOnboarded?snapshotDatails.UsersOnboarded-1:0}}</label>
                                            <p class="qcard-name">Users</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="row quicksnapshot-cards ">
                                    <div class="d-flex w-100 align-items-center">
                                        <div class="qcard-infoimg">
                                            <img src="./../../../../assets/images-n/projects/Documents.svg"
                                                alt="Documents" class="qcard-img">
                                        </div>
                                        <div class="qcard-info">
                                            <label class="qcard-count">{{snapshotDatails.Documents}}</label>
                                            <p class="qcard-name">Documents</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 pr-0">
                                <div class="row quicksnapshot-cards ">
                                    <div class="d-flex w-100 align-items-center">
                                        <div class="qcard-infoimg">
                                            <img src="./../../../../assets/images-n/projects/Foldercount.svg"
                                                alt="UnreadMessages" class="qcard-img">
                                        </div>
                                        <div class="qcard-info">
                                            <label class="qcard-count">{{snapshotDatails.Folders}}</label>
                                            <p class="qcard-name">Folders</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row quick-actions" *ngIf="!isCreate">
                        <h6>Quick Actions</h6>
                        <img class="mr-3" src="./../../../../assets/images-n/projects/Hand.svg" alt="handicon">
                        <button class="btn blue-btntext" (click)="onCreateTask()">
                            <a><span>Create Task</span></a>
                        </button>
                        <button class="btn blue-btntext" (click)="openUsersOverlay()">
                            <a><span>Users</span></a>
                        </button>
                        <button class="btn blue-btntext" (click)="onCreateFolderDoc('folder')">
                            <a><span>Create Folder</span></a>
                        </button>
                        <button class="btn blue-btntext" (click)="onCreateFolderDoc('document')">
                            <a><span>Create Documents</span></a>
                        </button>
                        <button class="btn blue-btntext" (click)="navigateToBPMN()">
                            <a><span>View BPMN</span></a>
                        </button>
                    </div>
                    <div class="row acresources" *ngIf="!isCreate">
                        <div class="col-4 p-0">
                            <h4 class="colheads">Recent Activities</h4>
                        </div>
                        <!-- <button class="btn blue-btntext"><a href="#">View All</a></button> -->
                        <div class="col-12 p-0">
                            <app-dynamic-table [columns_list]="columns_list_activities"
                                [table_data]="recentActivityList" [show_search_field]="true" [show_column_filter]="true"
                                [show_clear_filter]="true" [screenTable]="'recentActivityList'"
                                [search_fields]="['activity','lastModifiedUsername','lastModifiedTimestamp_new']">
                            </app-dynamic-table>
                        </div>
                    </div>
                    <div class="row quick-actionscards" *ngIf="isCreate">
                        <div class="col-sm-4 text-center">
                            <div class="qactionscard-info">
                                <img src="./../../../../assets/images-n/projects/AutomationRate.svg"
                                    alt="AutomationRate" class="">
                            </div>
                            <p class="text">Start onboarding users,who will be responsible forthe project.</p>
                            <a class="link-primary linkss" (click)='openUsersOverlay()'>Users</a>
                        </div>
                        <div class="col-sm-4 text-center qamiddlecard">
                            <div class="vertical-line"></div>
                            <div class="qactionscard-info">
                                <img src="./../../../../assets/images-n/projects/CreateTasks.svg" alt="Active-Tasks"
                                    class="">
                            </div>
                            <p class="text">Start creating and assigning tasks to get the work started.</p>
                            <a class="link-primary linkss" (click)="onCreateTask()">Create Tasks</a>
                        </div>
                        <div class="col-sm-4 text-center">
                            <div class="vertical-line"></div>
                            <div class="qactionscard-info">
                                <img src="../../../../assets/images-n/projects/prj-upload-document.svg"
                                    alt="Active-Tasks" class="">
                            </div>
                            <p class="text">You can start upload document related to the process</p>
                            <!-- <a class="link-primary linkss" (click)="onUploadDocument($event)">Upload document</a> -->
                            <div class="" (change)="onUploadDocument($event)">
                                <div class="fileupsec">
                                    <input type="file" name="myfile" multiple id="file-input">
                                    <span>Upload document</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 pr-0 ">
                    <div class="activecollaboration">
                        <div>
                            <h4 class="colheads chatheader">Collaborations</h4>
                        </div>
                        <div class="collab">
                           
                            <span>
                                <div class="pinnedmsgs selectable" *ngIf="_pinnedMessage.length > 0">
                                    <img alt="unpinmsg" src="../../../../assets/images-n/projects/unpin.svg" pTooltip="Unpin" tooltipPosition="top"
                                        class="testplus" (click)="sendMessage(null,'unpinned')">
                                    <span class="pinnedmsgtext"
                                        (click)="scrollTomain(_pinnedMessage[0],'pin_message')">
                                        <!-- <p [innerHTML]="(pinnedMessage[0].message) | sanitizeHtml : users_list" class="usermessage"></p> -->
                                        
                                        {{truncatemessage(_pinnedMessage[0].message)}}</span>
                                </div>
                            </span>
                            <div id="message-body" class="selectable" *ngIf="messages_list.length != 0">
                                <div *ngFor="let each of messages_list" [class.selected]="each.id === selectedItem"
                                    [appScrollIntoView]="each.id === selectedItem">

                                    <div *ngIf="each.rmId != 0"
                                        [ngClass]="logged_userId == each.userId ?'rgtusermsg': 'lftusermsg'" class="">
                                        <div class="rply-msg" (click)="scrollTomain(each,'replyMessage')">
                                            <p><b>{{truncateValue(each.replyMessage)}}</b></p>
                                        </div>

                                        <div class="user_keys res-circle" *ngIf="logged_userId != each.userId">
                                            {{userFirstValues(each.firstName,each.lastName)}}</div>
                                        <div class="user_keys res-reply">
                                            <img *ngIf="!each.pinnedMessage" src="../../../../assets/images-n/projects/pin.svg" alt="pinmsg" pTooltip="Pin" tooltipPosition="top"
                                                (click)="pinMessage(each)" class="testplus">
                                                <img *ngIf="each.pinnedMessage" alt="unpinmsg" src="../../../../assets/images-n/projects/unpin.svg" class="testplus" pTooltip="Unpin" tooltipPosition="top" (click)="sendMessage(null,'unpinned')">
                                            <img src="../../../../assets/images-n/projects/reply.svg" alt="replymsg" pTooltip="Reply" tooltipPosition="top" 
                                                (click)="replyMessage(each)" class="testplus">
                                        </div>
                                        <!-- <p class="usermessage">{{each.message}}</p> -->
                                        <p [innerHTML]="(each.message) | sanitizeHtml : users_list" class="usermessage"></p>
                                        <p class="userinfo">
                                            <span *ngIf="logged_userId != each.userId">{{each.firstName}}
                                                {{each.lastName}} |</span>
                                            {{each.createdTimestamp| date:'MMM d, y, HH:mm'}}
                                        </p>
                                    </div>

                                    <div *ngIf="each.rmId == 0"
                                        [ngClass]="logged_userId == each.userId ?'rgtusermsg': 'lftusermsg'" class="">
                                        <div class="user_keys res-circle" *ngIf="logged_userId != each.userId">
                                            {{userFirstValues(each.firstName,each.lastName)}}</div>
                                        <div class="user_keys res-reply">
                                            <img *ngIf="!each.pinnedMessage" src="../../../../assets/images-n/projects/pin.svg" alt="pinmsg" pTooltip="Pin" tooltipPosition="top"
                                                class="testplus" (click)="pinMessage(each)">
                                                <img *ngIf="each.pinnedMessage" alt="unpinmsg" src="../../../../assets/images-n/projects/unpin.svg" class="testplus" pTooltip="Unpin" tooltipPosition="top" (click)="sendMessage(null,'unpinned')">
                                            <img src="../../../../assets/images-n/projects/reply.svg" alt="replymsg" pTooltip="Reply" tooltipPosition="top" 
                                                (click)="replyMessage(each)" class="testplus">
                                            <!-- <i class="pi pi-tag"></i>
                                            <i class="pi pi-replay" (click)="replyMessage(each)"></i> -->
                                        </div>
                                        <div>
                                            <p [innerHTML]="(each.message) | sanitizeHtml : users_list" class="usermessage"></p>
                                        </div>
                                        <p class="userinfo">
                                            <span *ngIf="logged_userId != each.userId">{{each.firstName}}
                                                {{each.lastName}} |</span>
                                            {{each.createdTimestamp| date:'MMM d, y, HH:mm'}}
                                        </p>
                                    </div>
                                    <!-- <div class="rgtusermsg" *ngIf="logged_userId == each.userId">
                                        <div class="user_keys res-reply"><i class="pi pi-replay" (click)="replyMessage(each)"></i></div>
                                        <div>
                                            <p>{{each.message}}</p>
                                        </div>
                                        <p class="userinfo">{{each.firstName}} {{each.lastName}} |
                                            {{each.createdTimestamp| date:'MMM d, y, HH:mm'}}</p>
                                    </div> -->
                                </div>
                            </div>
                            <div *ngIf="replay_msg" class="rply-msg rply-div">
                                {{truncatemessage(replay_msg.message)}}
                                <img src="../../../../assets/images/PI/close.svg" alt="replymsg"
                                    (click)="onClearReply()" class="testplus">
                            </div>
                            <div *ngIf="messages_list.length == 0" class="emptychat text-center">
                                <img alt="user-img"
                                    src="../../../../assets/images-n/projects/StartCollaborations.svg" />
                                <p>Start a new conversation</p>
                            </div>
                        </div>
                        <div class="row collabottom">
                            <div class="col-sm-11 pl-0">

                                <!-- // TODO enable for user mention -->
                                <!-- <div style="border:1px solid #333;height:100px;width:100%;padding:10px;"
                                [mentionConfig]="{labelKey:'fullName',mentionSelect: this.onMentionSelect}" (itemSelected)="itemSelected($event)"
                                [mention]="existingUsersList" contenteditable="true" id="my-content" (keyup)="onKeyUpDiv()"></div> -->

                                <textarea [style]="{'width':'100%'}" [rows]="2" pInputTextarea
                                    placeholder="Type a new message" id="message-input" [(ngModel)]="typedMessage"
                                    [mention]="existingUsersList" [mentionConfig]="{labelKey:'fullName',mentionSelect: this.onMentionSelect}"
                                    [autoResize]="false" (keydown.enter)="$event.preventDefault()"
                                    (keyup.enter)="sendMessage(null,'save')" (keydown)="Space($event)"></textarea>

                                <!-- <input type="text" [mention]="test_items"> -->
                                <!-- <textarea [style]="{'width':'100%'}" [rows]="2" (keyup)="onKeyUp($event)" pInputTextarea placeholder="Type a new message" id="message-input"
                                    [(ngModel)]="typedMessage" [autoResize]="false" appUserFilter (filteredUsers)="onFilteredUsers($event)" ></textarea> -->
                                <!-- (keyup)="$event.keyCode == 13 && sendMessage(null,'save')" (keyup.enter)="sendMessage(null,'save')"-->
                            </div>

                            <!-- <button class="btn"><img alt="attachment" src="./../../../../assets/images-n/projects/paperclip.svg" /></button> -->
                            <div class="col-sm-1 p-0 d-flex align-items-center">
                            <button class="btn" (click)="sendMessage(null,'save')"
                                [disabled]="!(typedMessage.length>0)">
                                <img alt="send" src="./../../../../assets/images-n/projects/send.svg" />
                            </button>
                            </div>
                            <!-- <div *ngIf="showUserList" class="usersOverLay"> 
                                        <ul>
                                            <li *ngFor="let user of filteredUsers" (click)="addUserInChat(user)">{{user.firstName}} {{user.lastName}}</li>
                                        </ul>
                                    </div> -->
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="onb-usroverlay" *ngIf="hiddenPopUp" style="display: block">
    <app-split-overlay (closeOverlay)="closeOverlay($event)">
        <div class="splitoverlaydiv h-100">
            <p-tabView #tabView (onChange)="onUsersTab($event.index)">
                <p-tabPanel [selected]="true">
                    <ng-template pTemplate="header">
                        <h4>New Users <span *ngIf="checkBoxselected.length >0"> ({{checkBoxselected.length}}
                                Users selected) </span></h4>
                    </ng-template>
                </p-tabPanel>
                <p-tabPanel>
                    <ng-template pTemplate="header">
                        <h4>Existing Users <span>({{existingUsersList.length}})</span></h4>
                    </ng-template>
                </p-tabPanel>

                <div class="splitoverlaycontent usersgrid">
                    <p-table #dt1 [value]="users_tableList" [globalFilterFields]="['user_role','fullName']"
                        [columns]="columns_list" [(selection)]="checkBoxselected" [resizableColumns]="true"
                        responsiveLayout="scroll" [scrollable]="true" dataKey="id">
                        <ng-template pTemplate="caption">
                            <div class="d-flex">
                                <p-dropdown [options]="roles_list" class="listdropdown" [(ngModel)]="selectedRole"
                                    (onChange)="onChangeRole($event,users_tabIndex)" optionLabel="name" optionValue="name"></p-dropdown>
                                <span class="p-input-icon-right">
                                    <i class="pi pi-search"></i>
                                    <input type="text" pInputText placeholder="Search"
                                        (input)="dt1.filterGlobal($event.target.value, 'contains')">
                                </span>
                            </div>
                        </ng-template>
                        <ng-template pTemplate="header" let-columns>
                            <tr *ngIf="users_tabIndex == 1">
                                <th *ngFor="let col of columns">{{col.DisplayName}}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr>
                                <td *ngIf="users_tabIndex != 1"  style="flex: 0 0 5rem"> <p-tableCheckbox [value]="rowData"></p-tableCheckbox>
                                </td>
                                <td *ngFor="let col of columns">
                                    <span>{{rowData[col.ColumnName]}}</span>
                                    <span *ngIf="col.ColumnName == 'action' && projectDetails.owner != rowData['user_email']">
                                        <div class="newinntalx">
                                            <a (click)="deleteuserById(rowData)" pTooltip="Delete"
                                                tooltipPosition="top">
                                                <img src="../../../../assets/images-n/gridicons/delete-default.svg" alt="delete" class="default-icon">
                                                <img src="../../../../assets/images-n/gridicons/delete-hover.svg" alt="delete" class="hover-icon">
                                            </a>
                                        </div>
                                    </span>
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="emptymessage">
                            <tr>
                                <td style="justify-content: center;" colspan="7">No Users Found</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
                <div class="row justify-content-end" *ngIf="users_tabIndex != 1">
                    <button class="btn new-cancelbtn" (click)="onCancel()">Cancel</button>
                    <button class="btn bluebg-button" (click)="addresources()"
                        [disabled]="!(checkBoxselected.length>0)">Onboard Users</button>
                </div>
            </p-tabView>

        </div>
    </app-split-overlay>
</div>

<div [hidden]="!createTaskOverlay">
    <app-split-overlay (closeOverlay)="closeCreateTaskOverlay($event)">
        <div class="h-100">
            <div class="create-header">
                <h3>Create Task</h3>
            </div>
            <div class="h-100">
                <app-create-tasks [users_list]="users_list" [params_data]="params_data"
                    [hiddenPopUp]="createTaskOverlay" [existingUsersList]="existingUsersList"
                    [project_name]="projectDetails.projectName"></app-create-tasks>
            </div>
        </div>
    </app-split-overlay>
</div>

<p-dialog class="selectfoldername" header="Select Folder" [(visible)]="isFile_upload_dialog" [modal]="true" [baseZIndex]="10000" [style]="{width: '25vw'}"
    (onHide)="onCloseFolderOverlay()">
    <span class="p-float-label">
        <p-tree [value]="files" [filter]="false" styleClass="document-tree" selectionMode="single"
            [style]="{'max-height':'auto','overflow':'auto'}" [(selection)]="selected_folder">
        </p-tree>
    </span>
    <button *ngIf="selectedType =='createFolder' " type="button" class="btn bluebg-button savefoldername"
        (click)='createFolder()'>Ok</button>
    <button *ngIf="selectedType =='document' " type="button" class="btn bluebg-button savefoldername"
        (click)='navigateToCreateDocument()'>Ok</button>
    <button *ngIf="selectedType =='uploadFile' " type="button" class="btn bluebg-button savefoldername"
        (click)='uploadFile()'>Ok</button>
</p-dialog>

<p-dialog header="Enter Folder Name" [(visible)]="isDialog" [modal]="true" [baseZIndex]="10000" (onHide)="onDialogHide()" class="docfldnam">
    <span class="p-float-label">
    <input type="text" pInputText placeholder="Enter Folder Name" [(ngModel)]="entered_folder_name" [maxlength]="51"
        name="folder" >
    <div *ngIf="entered_folder_name.length > 50" class="errspan required">
        Maximum of 50 characters
    </div>
    <button type="button" class="btn bluebg-button" (click)="saveFolder()"
        [disabled]="!(entered_folder_name.length > 4 && entered_folder_name.length < 51 )">Save</button>
    </span>
    </p-dialog>

<p-toast [style]="{marginTop: '50px'}"></p-toast>
<p-confirmDialog #cd [style]="{width: '30vw'}" key="positionDialog" position="center" [baseZIndex]="10000" 
rejectButtonStyleClass="btn bluebg-button" [closable]="false">
    <ng-template pTemplate="footer">
        <button type="button" pButton class="btn reset-btn" label="No" (click)="cd.reject()"></button>
        <button type="button" pButton class="btn bluebg-button" label="Yes" (click)="cd.accept()"></button>
    </ng-template>
</p-confirmDialog>