    <div *ngIf="selectedtask!=undefined" class="edit-task-form">
      <div class="module-heading title ">
        <!-- <span class="projects-back-button" routerLink="/pages/projects/listOfProjects" >
            <i class="fa fa-angle-left" aria-hidden="true"></i>
        </span> -->
        <span class="module-back-button" routerLink="/pages/projects/projectdetails"  [queryParams]="{id:project_id}">
            <i class="fas fa-arrow-left" aria-hidden="true"></i>
        </span>
        <span class="module-header-title">
            <span class="module-parent-title">Tasks</span>
            <span class="backslash">/</span>
            <span class="module-parent-title">Edit Task</span>
        </span>
        
        <!-- <span class="pull-right" style="font-size:20px;">
          <span class="projects-menu-item" (click)="projects_toggle==false?projects_toggle=true:projects_toggle=false;" ><i class="ri-file-line"></i></span>
          <span class="projects-menu-item"><i class="ri-filter-line"></i></span>
          <span class="projects-menu-item"><i class="ri-more-2-line"></i></span>
        </span> -->
    </div>
    <div class=" h-scroll">  
    <div class="container-fluid" >
      
        <div class="py-5 bg-task">
          <!-- {{selectedtask.id}} /
           -->
          <h3>{{selectedtask.taskCategory}} / {{selectedtask.taskName}}</h3>
          <div>
            <span class="h5 label-control"><b>Last Modified by :</b></span>&nbsp;<span class="h5">{{selectedtask.lastModifiedBy}}</span>&nbsp;<span>|</span>&nbsp;<span>@&nbsp;{{selectedtask.lastModifiedTimestamp | date :"short"}}</span>
          </div>
          <br>
        </div>
        <br>
        <div class="container p-0" style="width:100%">
          <form [formGroup]="updatetaskForm" (ngSubmit)="updatetask()">
            <div class="row">
              <div class="col-md-12">
                <div class="form-fields col-md-3 pl-0">
                  <label class="h6 label-control" id="assignee" for="assignee">Assignee</label>
                  <span class="labelcont">{{selectedtask.resources| userPipe : users_list}}</span>
                </div>
                <div class="form-fields col-md-3 pr-0">
                  <label  class="h6 label-control" id="startdate" for="startDate">Start Date</label>
                  <span class="labelcont">{{selectedtask.startDate | date}}</span>
                </div>
                <div class="form-fields col-md-3 pr-0">
                  <label  class="h6 label-control" id="enddate" for="endDate">End Date</label><br>
                  <span class="labelcont">{{selectedtask.endDate | date}}</span>
                </div>
                <div class="form-fields col-md-3 pr-0">
                  <label   class="h6 label-control" id="percentage" for="percentage">Percentage Completed</label>
                  <!-- <ng5-slider [(value)]="slider" formControlName="percentageComplete" [options]="options"></ng5-slider> -->
                  <div>{{slider}}%<input type="range" min=0 max=100 (change)="slider=$event.target.value" formControlName="percentageComplete" [value]="slider"></div>
                </div>
              </div>
             
                <div class=" col-md-3 form-fields pr-0">
                  <label id="status" class="h6 label-control" for="status">Status<span class="star">*</span></label>
                  <select formControlName="status" class="form-control data">
                    <option value="">Select Status</option>
                    <option value="New">New</option>
                    <option value="In Progress">In Progress</option>
                    <option value="In Review">In Review</option>
                    <option value="Approved">Approved</option>
                    <option value="Rejected">Rejected</option>
                  </select>
                  <span *ngIf="updatetaskForm.get('status').invalid && updatetaskForm.get('status').touched"
                    class="errspan required">Status Required*</span>
                </div>
                <div class="form-fields col-md-3 pr-0">
                  <label id="priority" class="h6 label-control" for="priority">Priority<span class="star">*</span></label>
                  <select formControlName="priority" class="form-control data">
                    <option value="">Select Priority</option>
                    <option value="High">High</option>
                    <option value="Medium">Medium</option>
                    <option value="Low">Low</option>
                  </select>
                  <span *ngIf="updatetaskForm.get('priority').invalid && updatetaskForm.get('priority').touched"
                    class="errspan required">Priority Required*</span>
                </div>
                <div class=" col-md-3">
                  <label class="h6 label-control" id="summary" class="label-control">Summary</label>
                  <textarea class="form-control" formControlName="summary" rows="3" placeholder="Enter Summary">
                            </textarea>
                </div>
                <div class=" col-md-3">
                  <label class="h6" id="description" class="label-control">Description</label>
                  <textarea class="form-control" formControlName="description" rows="3" placeholder="Enter Description">
                            </textarea>
                </div>
            
             
              <div class="col-md-12">
                <h4 class="module-sub-header-title">Activity</h4>
                <mat-tab-group id="Project-dashboard-tabs" class="edit-task-tabs"
                >
                <mat-tab label="Comment">
                  <div class="t-comments-box">
                    <div class="add-comment">
                      <div class="res-circle " *ngIf="userdata.image=='' || userdata.image==null">{{firstletter|uppercase}}</div>
                      <div *ngIf="(userdata.image!='' && userdata.image!=null)"><img class="res-circle-img " [src]="'data:image/jpeg;base64,'+userdata.image"></div>
                      <div>
                      </div>
                      <div class="form-fields col-md-12 pr-0 comment-input">
                        <input class=" form-control" type="text" #commentInput id="addcomment"
                          placeholder="Add a comment.." />
                        <div class="comment-send" id="sendcomment" (click)="postcomments(commentInput.value)">
                         
                          <img src="../../../../assets/images/Projects/send-blue.svg" class="hover-img" />
                          <!-- <i class="fab fa-telegram-plane" id="sendcomment" (click)="postcomments(commentInput.value)"></i> -->
                        </div>
                      </div>
                    </div>
                    <div class="comment comment-level-1" *ngIf="taskcomments.length!=0">
                      <!-- <div  class="res-circle " *ngIf="userdata.image=='' || userdata.image==null">{{firstletter|uppercase}}</div> 
                      <div  *ngIf="(userdata.image!='' && userdata.image!=null)">
                        <img class="res-circle " [src]="'data:image/jpeg;base64,'+userdata.image" >
                      </div> -->

                      <div class="comment-content" *ngFor="let c of taskcomments;let i=index">
                        <div class="comment-content-subdiv">
                          <div class="userimage py-5" *ngIf="(c.createdUserEmail|userImagePipe: users_list)as result">
                            <div class="res-circle" *ngIf="result.length==3">
                              {{c.createdUserEmail|userImagePipe:users_list}}
                            </div>
                            <div *ngIf="result.length>3">
                              <img class="res-circle-img "src="{{c.createdUserEmail|userImagePipe: users_list}}">
                            </div>
                          </div>
                          <div class="w-100">
                            <div class="row d-flex">
                              <div class="col-md-10 pl-0 comment-name">
                                {{c.createdBy}} {{c.createdTimestamp | date :'MMM dd, y, HH:mm:ss'}}
                              </div>
                              <div class="col-md-2 pr-0 comment-action" *ngIf="i!=commentnumber">
                                <button type="button" (click)="editComments(c.comments,i)">
                                  Edit
                                </button>
                              </div>
                            </div>
                            <div class="commentsadded" *ngIf="i!=commentnumber">
                              {{c.comments}}
                            </div>
                          </div>
                        </div>


                        <div class="updatecomments" *ngIf="(showeditcomment && i==commentnumber)">
                          <div class="form-fields col-md-12 p-0">
                            <input type="text" name="comment" class="form-control" formControlName="editcomment"
                              placeholder="Add Comment..." />
                          </div>
                          <div class="modal-footer modelprfooter">
                            <div class="pull-right">
                              <button id="updatecancelcomment" type="button" class="btn btn-default"
                                (click)="posteditcancelcomment()">
                                Cancel
                              </button>
                              <button id="updatesavecomment" type="button" class="btn btn-primary btn-update"
                                (click)="updatecomment(c.id)">
                                Save
                              </button>
                              <!-- <div class="col-md-6" >
                                          <button type="button" class="btn btn-primary" (click)="posteditcancelcomment()">Cancel</button>
                                        </div> -->
                            </div>
                          </div>
                        </div>
                        <!-- <div class="comment-action" *ngIf="i!=commentnumber">
                                        <button type="button" (click)="editComments(c.comments,i)" matTooltip="Edit Comment" 
                                            style="color:red;cursor:pointer" >
                                            Edit
                                        </button>
                                    </div> -->
                      </div>

                    </div>

                  </div>

                </mat-tab>
                <mat-tab label="History">

                  <ul class="historydiv">
                    <li *ngFor="let history of taskhistory">

                      <div class="row">
                        <div class="col-sm-1 pr-0"
                          *ngIf="(history.lastModifiedUserEmail|userImagePipe: users_list)as result">
                          <div class="res-circle " *ngIf="result.length==3">
                            {{history.lastModifiedUserEmail|userImagePipe: users_list}}
                          </div>
                          <div *ngIf="result.length>3">
                            <img class="res-circle-img"
                              src="{{history.lastModifiedUserEmail|userImagePipe: users_list}}">
                          </div>
                        </div>
                        <div class="col-sm-11 p-0 histcontent">
                          {{history.message}}{{history.lastModifiedTimestamp | date:'MMM dd, y, HH:mm:ss'}}
                        </div>
                      </div>

                      <!-- <div> 
                                      <div class="usertaskimage" *ngIf="(history.lastModifiedUserEmail|userImagePipe: users_list)as result">
                                        <div  class="res-circle " *ngIf="result.length==3">{{history.lastModifiedUserEmail|userImagePipe: users_list}}</div> 
                                        <div  *ngIf="result.length>3">
                                          <img class="res-circle " src="{{history.lastModifiedUserEmail|userImagePipe: users_list}}" >
                                        </div>
                                      </div>
                                    </div>
                                  <br>
                                  <div>
                                  {{history.message}}{{history.lastModifiedTimestamp | date:'MMM dd, y, HH:mm:ss'}}
                                </div> -->

                    </li>
                  </ul>
                  <!-- <div class="comment-content" > 
                              
                                </div> -->
                </mat-tab>
                <mat-tab label="Attachments">
                  <div class="row attachmentdiv">
                    <div class="col-md-12 p-0">
                      <table class="table" *ngIf="(taskattacments!=null && taskattacments.length!=0)">
                        <thead>
                          <tr>
                            <th class="text-left">File Name</th>
                            <th class="text-left">File Size (MB)</th>
                            <th class="text-left">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="let attachments of taskattacments | paginate: { itemsPerPage: 2, currentPage: att } ">
                            <td>{{attachments.fileName}}</td>
                            <td class="text-left">{{attachments.fileSize | fileSizePipe}}</td>
                            <td class="text-left">
                              <span class="clickable" (click)="downloadTaskAttachment(attachments)">
                                <img src="../../../../assets/images/Projects/Download.svg" class="testplus" />
                              </span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <pagination-controls *ngIf="(taskattacments!=null && taskattacments.length!=0)" class="pull-right"
                        (pageChange)="att = $event"></pagination-controls>
                    </div>
                  </div>

                </mat-tab>
                <mat-tab label="Resources">
                  <div class="edit-resourcesdiv">
                    <table class="table">
                      <thead>
                        <tr>
                          <th></th>
                          <th class="text-left">Name</th>
                          <th class="text-left">Role</th>
                          <th class="text-left">Last Updated</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            <span *ngIf="(taskresourceemail|userImagePipe: users_list)as result">
                              <div class="res-circle" *ngIf="result.length==3">
                                {{taskresourceemail|userImagePipe: users_list}}
                              </div>
                              <div *ngIf="result.length>3">
                                <img class="res-circle-img" src="{{taskresourceemail|userImagePipe: users_list}}">
                              </div>
                            </span>
                          </td>
                          <td>{{selectedtask.resources| userPipe : users_list}}</td>
                          <!-- <td style="text-align:center">{{roles?roles:'-'}}</td> -->
                          <td class="text-left">{{roles?roles:'-'}}</td>
                          <td class="text-left">{{selectedtask.lastModifiedTimestamp | date:'MMM dd, y, HH:mm:ss'}}</td>
                        </tr>
                      </tbody>

                    </table>
                  </div>
                </mat-tab>
              </mat-tab-group>
              </div>
            </div>
          </form>
          <div class="modal-footer modelprfooter">
            <div class="pull-right">
              <button (click)="resetupdatetaskproject()" class="btn btn-default">Reset</button>
              <button (click)="canceltaskform()" class="btn btn-primary">Cancel</button>
              <button [disabled]="updatetaskForm.invalid" (click)="updatetask()"
                class="btn btn-primary btn-update">Update</button>
            </div>
          </div>
        </div>
      </div>
      </div>
   
  