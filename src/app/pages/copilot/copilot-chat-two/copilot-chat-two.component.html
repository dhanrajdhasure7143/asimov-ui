<div class="row">
    <!-- <div class="col-md-2 pl-adj">
        <div class="card-history">
            <div class="col-md-12">
                <h4 class="histry-space">History</h4>
            </div>
            <div>
                <img src="../../../../assets/copilot/noviewmsg.svg" class="histry-img" alt="" />
                <p class="histry-text">You have no saved conversations</p>
            </div>

        </div>
    </div> -->
    <div class="col-md-12 pl-0 pr-0">
        <div class="maincontent">
            <div class="h-100">
                <div class="row main-content-head">
                    <div class="col-md-6 pl-0">
                        <h3>
                            <span class="title_text">Conversational AI Process Automation</span>

                        </h3>
                    </div>
                    <div class="col-md-6 title-help">
                        <a href="#"> Need Help <span class="ml-1"><img src="../../../../assets/copilot/needhelp.svg"
                                    alt="" /></span></a>
                    </div>

                </div>
                <div class="hr"></div>

                <div class="main-content-body row">
                    <div class="col-md-9 model-box " [hidden]="showTable">
                        <div class="graph-designer">
                            <div class="studio_main">
                                <div class="drag-area">
                                    <div class="diagram_container-copilot"
                                            id="_diagram">
                                        </div>
                                    <!--Nodes inside designer-->
                                    <!-- <ng-container *ngFor="let node of nodes; let i = index">
                                        <div id="{{ node.id }}" [class]="node.updated?'node-updated':'node'"
                                            [ngStyle]="{left: node.x,top: node.y}">
                                            <img [src]="node.path" (contextmenu)="openMenuItem($event, node)"
                                                [id]="node.id+'_img'" class="w-100 node-image" alt="">
                                            <div class="connector-name" *ngIf="node.selectedNodeTask != ''">
                                                {{ node.selectedNodeTask }}
                                            </div>
                                        </div>
                                    </ng-container> -->
                                    

                                    
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-9 model-box new-box " [hidden]="!showTable">
                        <div class="mt-3 mb-4">

                            <h5>
                                <label id="popup_title">
                                    <a class="imageBox" (click)="showTable=false">
                                        <img class="default-arrow"
                                            src="./../../../../assets/images-n/projects/backarrow-default.svg" alt="">
                                        <img class="hover-arrow"
                                            src="./../../../../assets/images-n/projects/backarrow-hover.svg" alt="">
                                    </a>
                                </label>
                                <span class="title_text_haspath">
                                    <span class="">Fill in the time taken for below steps in the process:</span>
                                </span>
                            </h5>
                        </div>
                        <div style="margin:0px 60px !important;">
                            <table class="table table-striped chat-form">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th colspan="3" class="table-mainhead">Time Taken (hrs)</th>
                                    </tr>
                                    <tr>
                                        <th scope="col"></th>
                                        <th scope="col">Mins</th>
                                        <th scope="col">Hrs</th>
                                        <th scope="col">Days</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of tableData">
                                        <th>{{item.name}}</th>
                                        <td style="width:50px;">
                                            <p-dropdown [options]="minOptins" [(ngModel)]="item.min"
                                                class="custom-dd"></p-dropdown>
                                            <!-- <select  [(ngModel)]="item.min" (change)="onChange()" >
                                            <option [value]="item" *ngFor="let item of minOptins">{{item}}</option>
                                        </select> -->
                                        </td>
                                        <td style="width:50px;">
                                            <!-- <select name="" id=""  [(ngModel)]="item.hrs">
                                          <option [value]="item" *ngFor="let item of hrsOptins">{{item}}</option>
                                        </select> -->
                                            <p-dropdown [options]="hrsOptins" [(ngModel)]="item.hrs"
                                                class="custom-dd"></p-dropdown>
                                        </td>
                                        <td style="width:50px;">
                                            <!-- <select name="" id=""  [(ngModel)]="item.days">
                                          <option [value]="item" *ngFor="let item of daysOptins">{{item}}</option>
                                        </select> -->
                                            <p-dropdown [options]="daysOptins" [(ngModel)]="item.days"
                                                class="custom-dd"></p-dropdown>
                                        </td>
                                        <td style="width:20%;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-3 chat-box">
                        <div id="chat-grid" class="chat-grid">
                            <div *ngFor="let sentMessage of messages" class="py-3 ">

                                <div *ngIf="sentMessage.user!='SYSTEM'" class="user-message ">

                                    <div class="py-3 px-3 mr-2 user-msgtext" [innerHTML]="sentMessage.message"></div>
                                    <div class="sys-image">
                                        <img src="../../../../assets/copilot/user.svg" alt="" />
                                    </div>
                                </div>
                                <div></div>
                                <div *ngIf="sentMessage.user=='SYSTEM' && sentMessage.message!=''"
                                    class="system-message">
                                    <div class="d-flex">
                                        <div class="sys-image">
                                            <img src="../../../../assets/copilot/systemicon.svg" alt="" />
                                        </div>
                                        <div class="ml-2 send-msgtext" [innerHTML]="sentMessage.message">
                                        </div>
                                    </div>
                                    <div *ngIf="sentMessage.steps.length" style="margin-left:10%;">

                                        <div *ngFor="let step of sentMessage.steps">
                                            <div *ngIf="step.type=='PROCESS-IMAGE'">
                                                <div (click)="sendMessage(step.label, 'LABEL')" class="card new-card">
                                                    <div class="py-3 px-3 text-center ">
                                                        <!-- <span class="text-chat mr-2"> <input type="checkbox"  /></span> -->
                                                        <span class="h6 text-chat">{{step.label}}</span>
                                                        <!-- <a href="#" class="eye-imgchat "><img src="../../../../assets/copilot/graph-icons/eye.svg" alt=""/></a> -->
                                                    </div>
                                                    <img [src]="step.ImagePath" alt="" class="impath-adj">
                                                </div>

                                            </div>
                                            <div class="col-11 chat-btn " *ngIf="step.type=='BUTTON'">
                                                <button class="btn btn-primary text-white btn-sm"
                                                    (click)="sendMessage(step.label, 'LABEL');step.disable=true"
                                                    [disabled]="step.disable">{{step.label}}</button>
                                            </div>
                                            <div class="col-11 chat-btn " *ngIf="step.type=='OUTLINE-BUTTON'">
                                                <button class="btn btn-secondary text-white btn-sm"
                                                    (click)="sendMessage(step.label, 'LABEL');step.disable=true"
                                                    [disabled]="step.disable">{{step.label}}</button>
                                            </div>
                                            <div class="col-11 chat-btn " *ngIf="step.type=='IMG-BUTTON'">
                                                <button class="btn d-flex py-1 bg-success-new">
                                                    <div>
                                                        <img [src]="step.label=='Workday'?'../../../../assets/copilot/workday.png':'../../../../assets/copilot/SAP.png'"
                                                            alt="">
                                                    </div>
                                                    <div>
                                                        {{step.label}}
                                                    </div>
                                                </button>
                                            </div>
                                            <div class="py-1 px-1" *ngIf="step.type=='MESSAGE'">
                                                <div class="py-0 send-msgtext" [innerHTML]="step.label">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <!-- <div *ngIf="message.components" class="">
                              <div *ngIf="message.components.includes('Buttons')">
                              <div class="col-12 chat-btn " *ngFor="let each of message.values[0]">
                              
                                <button type="button" class="btn btn-primary btn-sm text-white" (click)="submitButton(each)">{{ each.label}}</button>
                              </div>
                            </div>
                            </div> -->
                                </div>
                                <div></div>
                            </div>
                        </div>
                        <div class="px-3 adjtextarea-align">
                            <span *ngIf="isChatLoad" class="loader-align">
                                <img src="./../../../../assets/images-n/co-pilot/copilot_loader.gif" alt="chat_loader"
                                    class="loader-fix">
                            </span>
                            <textarea [(ngModel)]="message" class="form-control message-input"
                                placeholder="Type to Automate" (keyup.enter)="sendMessage(message,'MESSAGE')"
                                (keydown.enter)="$event.preventDefault()"></textarea>
                            <button [disabled]="isChatLoad" (click)="sendMessage(message, 'MESSAGE')"
                                class="msg-snd-btn">
                                <img src="./../../../../assets/copilot/textareaicon.svg" alt=""
                                    *ngIf="message.length == 0">
                                <img src="./../../../../assets/copilot/textareaiconactive.svg" alt=""
                                    *ngIf="message.length > 0">
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<p-confirmDialog #cd2 [style]="{width: '30vw'}" position="center" [baseZIndex]="10000"
    rejectButtonStyleClass="btn bluebg-button" [closable]="false">
    <ng-template pTemplate="footer">
        <button type="button" pButton class="btn reset-btn" label="No" (click)="cd2.reject()"></button>
        <button type="button" pButton class="btn bluebg-button" label="Yes" (click)="cd2.accept()"></button>
    </ng-template>
</p-confirmDialog>

<p-dialog header="Employee on boarding Process Log Graph" class="dialogHeader" [(visible)]="isDialogVisible"
    [style]="{width: '50vw'}" class="bps_overlay" [modal]="true" [baseZIndex]="1000">
    <div class="" >
        <div id="_diagram" *ngIf="isDialogVisible" class="graph-preview-container readOnly" style="z-index:100;position:relative;padding:2rem 0rem;"></div>
        <div class="text-right">
         <button (click)="loadBpmnwithXML(bpmnPath,'.diagram_container-copilot');" class="btn btn-primary btn-sm text-white">Yes</button><button (click)="isDialogVisible=false;" class="btn btn-secondary text-white btn-sm">No</button>
        </div>
        <!-- <img src="../../../../assets/copilot/popup-chart.svg" *ngIf="!isLoadGraphImage" class="popup-imgchart"> -->
    </div>
    <!-- <div class="text-right">
        <button (click)="loadGraphIntiate('Load Graph');isDialogVisible=false"
            class="btn btn-primary btn-sm text-white">Ok</button>
    </div> -->




</p-dialog>

<div class="spinoverlay" *ngIf="loader">
    <div class="spincenter">
        <img src='..\assets\images\EZFlow_Loader.gif' alt="loader-image" class="ezflow-loader" />
    </div>
</div>