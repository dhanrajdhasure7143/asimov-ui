<div class="maincont" [class.main-content1]="isHeaderShow == 'true'">
  <!-- main-content -->
    <div class="maincont-contentarea"> 
      <!-- content-area -->
      <div class="maincontent">
        <div class="row main-content-head">
          <div class="col-md-6 pl-0 new-bps-header-title">
            <span class="bps-header-title" [class.gen-bpsheader]="!rejectedOrApproved">
              <h3>
                <span class="title_text">Business Process Studio 
                  <span  class="sub_title_text" *ngIf="isHeaderShow == 'true'" [pTooltip]=currentNotation_name tooltipPosition="bottom">
                    <span *ngIf="currentNotation_name">/ </span> {{fitTableView(currentNotation_name)}}</span>
                </span>
                <span class="" *ngIf="isHeaderShow == 'true'">
                  <span *ngIf="rejectedOrApproved && !isfromApprover" class="label_icon inpro-label" [class.bg-red]="rejectedOrApproved=='REJECTED'" [class.bg-orange]="rejectedOrApproved=='INPROGRESS'" [class.bg-green]="rejectedOrApproved=='APPROVED'">
                    {{rejectedOrApproved=="INPROGRESS"?'In Progress':rejectedOrApproved}}
                  </span>
                  <span *ngIf="isfromApprover" class="label_icon inpro-label">{{rejectedOrApproved}}</span>
                </span>
              </h3>
              <!-- <span class="module-header-title">Business Process Studio 
                <span *ngIf="isHeaderShow == 'true'" [matTooltip]=currentNotation_name matTooltipClass="bpsHeaderTooltip"><span *ngIf="currentNotation_name">/ </span> {{fitTableView(currentNotation_name)}}</span>
              </span> -->              
            </span>
              <div class="value" *ngIf="isHeaderShow == 'true'">
                <span *ngIf="!isShowConformance">
                  <span class="module-back-button" *ngIf="isfromApprover" (click)='backtoApprovalWorkflow()'>
                    <!-- <i aria-hidden="true" class="fas fa-arrow-left"></i> -->
                    <img src="../../../assets/images-n/projects/backarrow.svg" alt="back-arrow">
                  </span>
                  <span class="module-back-button" *ngIf="!isfromApprover && !vcm_id" (click)='backtoNavigate()'>
                    <!-- <i aria-hidden="true" class="fas fa-arrow-left"></i> -->
                    <img src="../../../assets/images-n/projects/backarrow.svg" alt="back-arrow">
                  </span>
                  <span class="module-back-button" *ngIf="vcm_id" (click)='backtoVcm()'>
                    <!-- <i aria-hidden="true" class="fas fa-arrow-left"></i> -->
                    <img src="../../../assets/images-n/projects/backarrow.svg" alt="back-arrow">
                  </span>
                </span>
                <span class="module-back-button" *ngIf="isShowConformance" (click)='backtoPI()'>
                  <!-- <i aria-hidden="true" class="fas fa-arrow-left"></i> -->
                  <img src="../../../assets/images-n/projects/backarrow.svg" alt="back-arrow">
                </span>
                <!-- <span class="level3"><strong>Level 3</strong> - Value Chain Acneage</span> -->
                <span class="level3">Last Modified By: {{lastModified_user}}</span>
                <span class="level3sep" *ngIf="updated_date_time">|</span>
                <span *ngIf="updated_date_time">Autosaved @ {{updated_date_time | date:"MM/dd/yyyy HH:mm:ss"}}</span>

              </div> 
          </div>
          <div class="col-md-6 new-bps-icons p-0" *ngIf="isHeaderShow == 'true'">
            <div class="row bps-float">
                <button *ngIf="rejectedOrApproved=='PENDING'" class="editprimary edit-disabled">
                    <img class="defaul-img" src="../../../assets/images/BPMS/edit_disabled.svg">

                  </button>
                  <span *ngIf="rejectedOrApproved!='PENDING'">
                    <span *ngIf="!(freetrail=='true' && rejectedOrApproved=='APPROVED')">
                    <button *ngIf='!iscreate_notation' class="editprimary tsttooltipbtn" [disabled]="isEditMode " (click)="editNotation()">
                      <img class="defaul-img" src="../../../assets/images/BPMS/Edit-blue.svg">
                      <span class="testtooltip">Edit</span>
                    </button>
                </span>
              </span>
              <button mat-button [matMenuTriggerFor]="download" class="tsttooltipbtn">
                <img src="../../../assets/images/BPMS/download.svg">
                <span class="testtooltip">Download</span>
              </button>
                <mat-menu #download="matMenu">
                  <button mat-menu-item (click)="downloadNotaton('svg')">SVG</button>
                  <button mat-menu-item (click)="downloadNotaton('png')">PNG</button>
                  <button mat-menu-item (click)="downloadNotaton('jpg')">JPG</button>
                  <button mat-menu-item (click)="downloadNotaton(selectedNotationType)">{{selectedNotationType | uppercase}}</button>
                </mat-menu>
                <!-- <button type="button" class="clr-hvr tsttooltipbtn" [popover]="shareTemplate" placement="bottom">
                <img src="../../../assets/images/BPMS/share.svg" >
                <span class="testtooltip">Share</span>
              </button> -->
              <button type="button" class="icon-disabled" placement="bottom">
                <img src="../../../assets/images/BPMS/share disable.svg" >
              </button>
              <!-- <button><img src="../../../assets/images/BPMS/Forward.svg" matTooltip="Forward" matTooltipClass="bpsHeaderTooltip" matTooltipPosition="below"></button> -->
              <!-- <button class="tsttooltipbtn">
                <img src="../../../assets/images/BPMS/Favorite.svg" >
                <span class="testtooltip">Favorite</span>
              </button> -->
              <button class="icon-disabled">
                <img src="../../../assets/images/BPMS/Favorite disable.svg" >
              </button>
              <button class="tsttooltipbtn" (click)="zoomIn()" >
                <img src="../../../assets/images/BPMS/zoom-in.svg">
                <span class="testtooltip">Zoom In</span>
              </button>
              <button class="tsttooltipbtn" (click)="zoomOut()">
                <img src="../../../assets/images/BPMS/zoom-out.svg">
                <span class="testtooltip">Zoom Out</span>
              </button>
              <button class="tsttooltipbtn" (click)="fitNotation()" >
                <img src="../../../assets/images/BPMS/Fit to screen.svg">
                <span class="testtooltip">Fit To Screen</span>
              </button>
              <span *ngIf="rejectedOrApproved!='PENDING'" class="bpsbtnsep">|</span>
              <button class="bps-save-icon clr-hvr tsttooltipbtn" (click)="saveProcess()" *ngIf="rejectedOrApproved!='PENDING' && isfromApprover!=true && !isSave_disabled && !iscreate_notation" >
                <img src="../../../assets/images/BPMS/Save.svg" alt="" class="defaultimg">
                <span class="testtooltip">Save</span>
              </button>
              <button class="bps-save-icon clr-hvr tsttooltipbtn" (click)="saveProcessCreate()" *ngIf="iscreate_notation" >
                <img src="../../../assets/images/BPMS/Save.svg" alt="" class="defaultimg">
                <span class="testtooltip">Save</span>
              </button>
              <button class='icon-disabled' *ngIf="rejectedOrApproved!='PENDING' && isfromApprover!=true && isSave_disabled && !iscreate_notation" >
                <img src="../../../assets/images/BPMS/Savedisabled.svg" alt="" class="defaultimg">
              </button>
            
              <button class="clr-hvr tsttooltipbtn" [outsideClick]="true" *ngIf="iscreate_notation && (freetrail != 'true')" (click)="onsaveOverlayOpen()" [popover]="popTemplate" placement="bottom">
                <img src="../../../assets/images/BPMS/submit-for-approval.svg">
                <span class="testtooltip">Save & Submit for approval</span>
              </button>
                <button type="button" [outsideClick]="true" (click)="onsaveOverlayOpen()" *ngIf="rejectedOrApproved!='PENDING' && isfromApprover!=true && !isSave_disabled && !iscreate_notation && (freetrail != 'true')" class="clr-hvr tsttooltipbtn"
        [popover]="popTemplate" placement="bottom">
        <img alt="" src="../../../assets/images/BPMS/submit-for-approval.svg">
        <span class="testtooltip">Save & Submit for approval</span>
</button>
              <button class="icon-disabled" *ngIf="rejectedOrApproved!='PENDING' && isfromApprover!=true && isSave_disabled && !iscreate_notation && (freetrail != 'true')">
                <img src="../../../assets/images/BPMS/submit-for-approvaldisabled.svg">
              </button>
              <button class="clr-hvr tsttooltipbtn" (click)="orchestartion()" *ngIf="rejectedOrApproved=='APPROVED' && freetrail!='true'">
                <img src="../../../assets/images/BPMS/orchestration.svg">
                <span class="testtooltip">Orchestration</span>
              </button>
              <button class="clr-hvr tsttooltipbtn" *ngIf="rejectedOrApproved == 'APPROVED'"  (click)="deployNotation()">
                <img src="../../../assets/images/BPMS/Deploy.svg">
                <span class="testtooltip">Deploy Notation</span>
              </button>
              <button class="clr-hvr tsttooltipbtn" *ngIf="isStartProcessBtn" (click)="startProcess()"  >
                <img src="../../../assets/images/BPMS/Play.svg">
                <span class="testtooltip">Start Process</span>
              </button>
              <button class="tsttooltipbtn" (click)="showConformance()" *ngIf="isShowConformance && !reSize && !hasConformance" [disabled]="disableShowConformance||rejectedOrApproved=='PENDING'">
                  <img src="../../../assets/images/BPMS/show-differences.svg">
                  <span class="testtooltip">Show Conformance</span>
                </button>
                <button class="tsttooltipbtn" (click)="getBpmnDifferences()" *ngIf="isShowConformance && (hasConformance || reSize)">
                    <img src="../../../assets/images/BPMS/difference.svg">
                    <span class="testtooltip">Show Differences</span>
                  </button>
              <ngx-dropzone *ngIf="(!isShowConformance && rejectedOrApproved !='PENDING') || (isShowConformance && ((reSize && isConfNavigation)||hasConformance)) && rejectedOrApproved !='PENDING' || (isUploaded && rejectedOrApproved !='PENDING')" class="upload_again_btn" (change)="UploadFile($event)" [multiple]=false [accept]="'.'+selectedNotationType">
                <ngx-dropzone-label>
                  <button class="btn bluebg-button" *ngIf="!isfromApprover && !iscreate_notation"><img src="../../../assets/images/BPMS/upload.svg" *ngIf="!isfromApprover">Upload Again</button>  
                  <button class="btn bluebg-button" *ngIf="!isfromApprover && iscreate_notation"><img src="../../../assets/images/BPMS/upload.svg" *ngIf="!isfromApprover">Upload</button>  
                </ngx-dropzone-label>
              </ngx-dropzone>
            </div>  
          </div>
          <div class="col-md-6 p-0 module-heading-buttons bps-aprwkfl" *ngIf="isHeaderShow == 'false'">
            <span>
              <button *ngIf="isApproverUser" routerLink="/pages/approvalWorkflow/home" class="btn" pTooltip="Approvals" tooltipPosition="bottom">
                <img  src="../../../assets/images/BPMS/Workflow.svg" alt="Approvals">
                <!-- Approvals -->
              </button>
              <button *ngIf="freetrail != 'true'" (click)="gotoBPMNPlatform()" class="btn" pTooltip="View Cockpit" tooltipPosition="bottom">
                <img  src="../../../assets/images/BPMS/eye-show-blue.svg" alt="viewcockpit">
                <!-- <img class="testplus" src="../../../assets/images/BPMS/White-eye.svg">
                View Cockpit -->
              </button> 
            </span>
          </div>
        </div>    
        <router-outlet></router-outlet>
      </div>
  </div>
</div>
<ng-template #popTemplate>
  <div class="custom-content Apr-cnt">
    <div class="col-md-12 p-0 form-group" *ngIf="isShowConformance">
      <label class="label-control">Process Owner</label>
      <select name="powner" #powner="ngModel" [(ngModel)]="process_owner" required class="form-control">
          <option value="" disabled hidden>Select Process Owner</option>
          <option value="null" disabled hidden>Select Process Owner</option>
          <option value="undefined" disabled hidden>Select Process Owner</option>
          <option value="" disabled hidden>Select Process Owner</option>
          <option *ngFor="let each_approver of processowner_list;let i=index" [value]=i>
              {{each_approver.firstName|titlecase}}  {{each_approver.lastName?each_approver.lastName:''}}</option>
      </select>
  </div>
  
    <div class="form-group">
      <label for="" class="label-control">Approval</label>
      <select [(ngModel)]="selected_approver" [disabled]="rejectedOrApproved=='PENDING'" class="form-control">
        <option value="undefined" disabled hidden>Select Approver</option>
        <option value="null" disabled hidden>Select Approver</option>
        <option *ngFor="let each_approver of approver_list;let i=index" [value]=i>
            {{(each_approver.firstName| titlecase)+" "+(each_approver.lastName==undefined?"":each_approver.lastName)}}</option>
    </select>
    </div>
    <div class="custom-footer-content">
      <button class="btn bluebg-button" (click)="saveandSubmit()">Save & Submit for Approval</button>
    </div>  
  </div>
</ng-template>

<ng-template #shareTemplate>
  <div class="custom-content">
    <div class="form-group">
      <label for="" class="label-control">Invite People</label>
      <select class="form-control">
        <option >Select</option>
    </select>
    </div>
    <div class="custom-footer-content">
      <button class="btn new-cancelbtn">Cancel</button>
      <button class="btn bluebg-button">Share</button>
    </div>  
  </div>
</ng-template>