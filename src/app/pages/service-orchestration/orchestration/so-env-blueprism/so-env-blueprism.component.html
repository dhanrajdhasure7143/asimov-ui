<div class="container-fluid mx-3">
    <div class="rpa-env-search">
        <mat-form-field class="rpa-mat-form-field-search">
            <mat-label>Search</mat-label>
            <mat-icon matSuffix *ngIf="!isSearch" style="font-size: 1.2em">search</mat-icon>
            <input class="toolbar-search" autocomplete="off" *ngIf="!isSearch" matInput (keyup)="applyFilter($event.target.value)">
        </mat-form-field>
  
    </div>
    <div class="env-data-tool">
        <span style="padding:5px">
            <button matTooltip="Create" mat-mini-fab color="basic" (click)="createBlueprism()"><i  class="fas fa-plus"></i></button>
        </span>        
        <span style="padding:5px">
            <button [disabled]="updateflag == false" matTooltip="Modify" mat-mini-fab color="basic" (click)="updatedata()"><i style="margin-right: -4px !important;" class="fas fa-edit"></i></button>
        </span>
        <span style="padding:5px">
            <button [disabled]="deleteflag == false" matTooltip="Delete" mat-mini-fab color="basic" (click)="delete_blueprism_config()"><i  class="fas fa-trash"></i></button>
        </span>
    </div>  
  
    <!--foms  -->
    <div style="width:100%;height:45vh;overflow: scroll;">
    <table mat-table #sort1="matSort" [dataSource]="dataSource1" matSort class=" table" id="listofenv">
  
        <ng-container matColumnDef="check">
            <th mat-header-cell *matHeaderCellDef mat-sort-header><input [disabled]="checkeddisabled" type="checkbox" id="checkall" [checked]="checkflag" (change)="checkAllCheckBox($event)"></th>
            <td mat-cell *matCellDef="let element; let i = index"><input type="checkbox" [checked]="element.checked" (change)="checkEnableDisableBtn(element.bluePrismId, $event)"> </td>
        </ng-container>
        
        <ng-container matColumnDef="bluePrismUsername">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>BluePrism Username</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.bluePrismUsername!=null">{{(element.bluePrismUsername.length > 15) ? ((element.bluePrismUsername).slice(0, 15) + '...') : element.bluePrismUsername}}</span> <span *ngIf="element.bluePrismUsername==''">-</span> </td>
        </ng-container>

        <ng-container matColumnDef="configName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Connection Name</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.configName!=null">{{(element.configName.length > 15) ? ((element.configName).slice(0, 15) + '...') : element.configName}}</span> <span *ngIf="element.configName==''">-</span> </td>
        </ng-container>
        
        <ng-container matColumnDef="bluPrismPassword">
            <th mat-header-cell *matHeaderCellDef >BluePrism Password</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.bluPrismPassword!=null">{{element.bluPrismPassword  | ipcustompipe}}</span> <span *ngIf="element.bluPrismPassword==''">-</span> </td>
        </ng-container>
        <ng-container matColumnDef="hostAddress">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>IP Address/Host</th>
            <td mat-cell *matCellDef="let element">
                <span *ngIf="element.hostAddress!=null">{{element.hostAddress | ipcustompipe}}</span>
                <span *ngIf="element.hostAddress==''">-</span> </td>
        </ng-container>
        <ng-container matColumnDef="username">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Username</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.username!=null">{{(element.username.length > 10) ? ((element.username).slice(0, 10) + '...') : element.username}}</span> <span *ngIf="element.username==''">-</span> </td>
        </ng-container>
        <ng-container matColumnDef="password">
            <th mat-header-cell *matHeaderCellDef>Password</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.password!=null">{{element.password  | ipcustompipe}}</span> <span *ngIf="element.password==''">-</span> </td>
        </ng-container>
  
        <ng-container matColumnDef="port">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Port</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.port!=null">{{element.port}}</span> <span *ngIf="element.port==''">-</span> </td>
        </ng-container>
       <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
            <td mat-cell *matCellDef="let element">
                <span *ngIf="element.status == 'Active'"><span><img class="rpa-image1" src="/assets/images/RPA/GreenCricle.png"></span>&nbsp;Active</span>
                <span *ngIf="element.status == 'Inactive'"><span><img class="rpa-image1" src="/assets/images/RPA/red-circle.png"></span>&nbsp;Inactive</span>
           </td>
        </ng-container>
        <ng-container matColumnDef="createdTimeStamp">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Date</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.createdTimeStamp!=null">{{element.createdTimeStamp | date}} {{element.createdTimeStamp.split("T")[1].split(".")[0]}}</span> <span *ngIf="element.createdTimeStamp==''">-</span> </td>
        </ng-container>
        <ng-container matColumnDef="createdBy">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Created By</th>
            <td mat-cell *matCellDef="let element"> <span *ngIf="element.createdBy!=null" [matTooltip]="element.createdBy">{{(element.createdBy.length > 10) ? ((element.createdBy).slice(0, 10) + '...') : element.createdBy}}</span> <span *ngIf="element.createdBy==''">-</span> <span *ngIf="element.createdBy==null">-</span></td>
        </ng-container>
        <ng-container matColumnDef="noData">
            <td mat-footer-cell class="mat-footer" style="text-align:center" *matFooterCellDef colspan="11">
                No Records Found 
            </td>
        </ng-container>  
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr class="row-highlight" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <tr class="row-highlight mat-footer" mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide': FilterHasnodata && !isTableHasData }"></tr>
    </table>
  
  </div>
    <mat-paginator #paginator1 [pageSize]="10" [showFirstLastButtons]="true"></mat-paginator>
  </div>

  <div id="createbprism" class="rpa-modal">
    <div class="rpa-modal-content">
        <div class="rpa-modal-header">
            <span class="rpa-modal-close" (click)="close()">&times;</span>
            <h4>Create BluePrism Configuration</h4>
        </div>
        <div class="rpa-modal-body">
            <br>
            <div class="container">
                <form [formGroup]="BluePrismConfigForm" (ngSubmit)="savedata()">
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <label for="configName">Name<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control data" formControlName="configName" #configName value="" placeholder="Enter Name">
                            <span *ngIf="BluePrismConfigForm.get('configName').invalid && BluePrismConfigForm.get('configName').touched" style="color:red" class="fa fa-info-circle errspan">Name Required*</span>
                        </div>
                        
                        <div class="col-md-3 formelement">
                            <label for="bluePrismUsername">BluePrism Username<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control" formControlName="bluePrismUsername" #bluePrismUsername value="" placeholder="Enter BluePrism Username">
                            <span *ngIf="BluePrismConfigForm.get('bluePrismUsername').invalid && BluePrismConfigForm.get('bluePrismUsername').touched" style="color:red" class="fa fa-info-circle errspan"> BluePrism Username Required*</span>
                        </div>

                        <div class="col-md-3 formelement">
                            <label for="bluPrismPassword">BluPrism Password<span style="color:red">*</span></label>
                            <input [type]="passwordtype2 ? 'text': 'password'" maxlength="50" class="form-control" formControlName="bluPrismPassword" #bluPrismPassword value="" placeholder="Enter BluPrism Password" passwordToggle>
                            <span *ngIf="passwordtype2==false" class="fa fa-fw fa-eye field-icon" (click)="passwordtype2 =!passwordtype2"></span>
                            <span *ngIf="passwordtype2==true" class="fa fa-fw fa-eye-slash field-icon" (click)="passwordtype2 =!passwordtype2"></span>
                            <span *ngIf="BluePrismConfigForm.get('bluPrismPassword').invalid && BluePrismConfigForm.get('bluPrismPassword').touched" style="color:red" class="fa fa-info-circle errspan">BluPrism Password Required*</span>
                        </div>

                        <div class="col-md-3 formelement">
                            <label for="hostAddress"> IP Address/Host<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control" formControlName="hostAddress" value="" placeholder="Enter IP Address/Host">
                            <span *ngIf="BluePrismConfigForm.get('hostAddress').invalid && BluePrismConfigForm.get('hostAddress').touched" style="color:red" class="fa fa-info-circle errspan"> IP Address/Host Required*</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <label for="username">Username<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control" formControlName="username" #username value="" placeholder="Enter Username">
                            <span *ngIf="BluePrismConfigForm.get('username').invalid && BluePrismConfigForm.get('username').touched" style="color:red" class="fa fa-info-circle errspan"> Username Required*</span>
  
                        </div>
  
                        <div class="col-md-3 formelement">
                            <label for="password">Password<span style="color:red">*</span></label>
                            <input [type]="passwordtype1 ? 'text': 'password'" maxlength="50" class="form-control" formControlName="password" #password value="" placeholder="Enter Password" passwordToggle>
                            <span *ngIf="passwordtype1==false" class="fa fa-fw fa-eye field-icon" (click)="passwordtype1 =!passwordtype1"></span>
                            <span *ngIf="passwordtype1==true" class="fa fa-fw fa-eye-slash field-icon" (click)="passwordtype1 =!passwordtype1"></span>
                            <span *ngIf="BluePrismConfigForm.get('password').invalid && BluePrismConfigForm.get('password').touched" style="color:red" class="fa fa-info-circle errspan"> Password Required*</span>
                        </div>
  
                        <div class="col-md-3 formelement">
                            <label for="port">Port<span style="color:red">*</span></label>
                            <input type="text"  maxlength="6" onkeypress="return (event.charCode > 48 && event.charCode < 57)" class="form-control" formControlName="port" value="" placeholder="Enter Port">
  
                            <span *ngIf="BluePrismConfigForm.get('port').invalid && BluePrismConfigForm.get('port').touched" style="color:red" class="fa fa-info-circle errspan"> Port Required*</span>
                        </div> 
                        <div class="col-md-3 formelement" style="padding-top: 38px;padding-left: 19px;">
                            <input type="checkbox" checked formControlName="status"> Active
                        </div> 
                    </div>
                    <br>
                </form>
                <button class='btn btn-primary' (click)="saveBluePrism()" tooltip="Save" [disabled]="BluePrismConfigForm.invalid || submitted">Save</button>
                <!-- <button class="btn btn-primary" (click)="testBluePrismconnection()" tooltip="Test Connection" [disabled]="BluePrismConfigForm.invalid">Test Connection -->
                <button class="btn btn-primary" (click)="BluePrismCreatetestconnection()" tooltip="Test Connection" [disabled]="BluePrismConfigForm.invalid">Test Connection
                </button>
                <button class="btn btn-primary" (click)="reset_createblueprism()" tooltip="Reset">Reset
                </button>
            </div>
        </div>
        <br><br>
    </div>
  <br><br>
  </div>
  

  <div id="updatebprism" class="rpa-modal">
    <div class="rpa-modal-content">
        <div class="rpa-modal-header">
            <span class="rpa-modal-close" (click)="closeUBP()">&times;</span>
            <h4>Update BluePrism Configuration</h4>
        </div>
        <div class="rpa-modal-body">
            <br>
            <div class="container">
                <form [formGroup]="UpdateBluePrismConfigForm" (ngSubmit)="updateBlueprism()">
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <label for="configName">Name<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control data" formControlName="configName" #configName value="" placeholder="Enter Name">
                            <span *ngIf="UpdateBluePrismConfigForm.get('configName').invalid && UpdateBluePrismConfigForm.get('configName').touched" style="color:red" class="fa fa-info-circle errspan">Name Required*</span>
                        </div>
                        
                        <div class="col-md-3 formelement">
                            <label for="bluePrismUsername">BluePrism Username<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control" formControlName="bluePrismUsername" #bluePrismUsername value="" placeholder="Enter BluePrism Username">
                            <span *ngIf="UpdateBluePrismConfigForm.get('bluePrismUsername').invalid && UpdateBluePrismConfigForm.get('bluePrismUsername').touched" style="color:red" class="fa fa-info-circle errspan"> BluePrism Username Required*</span>
                        </div>

                        <div class="col-md-3 formelement">
                            <label for="bluPrismPassword">BluPrism Password<span style="color:red">*</span></label>
                            <input [type]="passwordtype1 ? 'text': 'password'" maxlength="50" class="form-control" formControlName="bluPrismPassword" #bluPrismPassword value="" placeholder="Enter Password" passwordToggle>
                            <span *ngIf="passwordtype1==false" class="fa fa-fw fa-eye field-icon" (click)="passwordtype1 =!passwordtype1"></span>
                            <span *ngIf="passwordtype1==true" class="fa fa-fw fa-eye-slash field-icon" (click)="passwordtype1 =!passwordtype1"></span>
                            <span *ngIf="UpdateBluePrismConfigForm.get('bluPrismPassword').invalid && UpdateBluePrismConfigForm.get('bluPrismPassword').touched" style="color:red" class="fa fa-info-circle errspan">BluPrism Password Required*</span>
                        </div>

                        <div class="col-md-3 formelement">
                            <label for="hostAddress"> IP Address/Host<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control" formControlName="hostAddress" value="" placeholder="Enter IP Address/Host">
                            <span *ngIf="UpdateBluePrismConfigForm.get('hostAddress').invalid && UpdateBluePrismConfigForm.get('hostAddress').touched" style="color:red" class="fa fa-info-circle errspan"> IP Address/Host Required*</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 formelement">
                            <label for="username">Username<span style="color:red">*</span></label>
                            <input type="text" maxlength="50" class="form-control" formControlName="username" #username value="" placeholder="Enter Username">
                            <span *ngIf="UpdateBluePrismConfigForm.get('username').invalid && UpdateBluePrismConfigForm.get('username').touched" style="color:red" class="fa fa-info-circle errspan"> Username Required*</span>
  
                        </div>
  
                        <div class="col-md-3 formelement">
                            <label for="password">Password<span style="color:red">*</span></label>
                            <input [type]="passwordtype2 ? 'text': 'password'" maxlength="50" class="form-control" formControlName="password" #password value="" placeholder="Enter Password" passwordToggle>
                            <span *ngIf="passwordtype2==false" class="fa fa-fw fa-eye field-icon" (click)="passwordtype2 =!passwordtype2"></span>
                            <span *ngIf="passwordtype2==true" class="fa fa-fw fa-eye-slash field-icon" (click)="passwordtype2 =!passwordtype2"></span>
                            <span *ngIf="UpdateBluePrismConfigForm.get('password').invalid && UpdateBluePrismConfigForm.get('password').touched" style="color:red" class="fa fa-info-circle errspan"> Password Required*</span>
                        </div>
  
                        <div class="col-md-3 formelement">
                            <label for="port">Port<span style="color:red">*</span></label>
                            <input type="text"  maxlength="6" class="form-control" onkeypress="return (event.charCode > 48 && event.charCode < 57)" formControlName="port" value="" placeholder="Enter Port">
  
                            <span *ngIf="UpdateBluePrismConfigForm.get('port').invalid && UpdateBluePrismConfigForm.get('port').touched" style="color:red" class="fa fa-info-circle errspan"> Port Required*</span>
                        </div> 
                        <div class="col-md-3 formelement" style="padding-top: 38px;padding-left: 19px;">
                            <input type="checkbox" [checked]="toggle" formControlName="status"> Active
                        </div> 
                    </div>
                    <br>
                </form>
                    <button class='btn btn-primary' (click)="Update_BluePrism()" tooltip="Save" [disabled]="UpdateBluePrismConfigForm.invalid || updatesubmitted">Save</button>
                    <!-- <button class="btn btn-primary" (click)="testBluePrismconnection()" [disabled]="UpdateBluePrismConfigForm.invalid" tooltip="Test Connection">Test Connection -->
                    <button class="btn btn-primary" (click)="BluePrismupdatetestconnection()" [disabled]="UpdateBluePrismConfigForm.invalid" tooltip="Test Connection">Test Connection
                    </button>
                    <button class="btn btn-primary" (click)="reset_Updateblueprism()" tooltip="Reset">Reset
                    </button>
                </div>
            </div>
            <br><br>
        </div>
  <br><br>
  </div>
  
  